(window.webpackJsonpNuxtCustomElementsNcComponents=window.webpackJsonpNuxtCustomElementsNcComponents||[]).push([[21],{1e3:function(e,t,n){"use strict";n(733)},1001:function(e,t,n){var a=n(177)(!1);a.push([e.i,"div[data-v-e45904f0]{width:100%;height:100%;color:var(--v-textColor-base)}.nc-hint[data-v-e45904f0]{font-size:.61rem;color:grey}.nc-cell[data-v-e45904f0]{position:relative}.nc-locked-overlay[data-v-e45904f0]{position:absolute;z-index:2;height:100%;width:100%;top:0;left:0}",""]),e.exports=a},1002:function(e,t,n){"use strict";n(734)},1003:function(e,t,n){var a=n(177)(!1);a.push([e.i,".name[data-v-cd6d554c]{max-width:calc(100% - 40px);overflow:hidden;text-overflow:ellipsis}",""]),e.exports=a},1004:function(e,t,n){"use strict";n(735)},1005:function(e,t,n){var a=n(177)(!1);a.push([e.i,".name[data-v-8c7178b6]{max-width:calc(100% - 40px);overflow:hidden;text-overflow:ellipsis}",""]),e.exports=a},103:function(e,t,n){"use strict";n.r(t);n(182);var a=n(365),i={name:"ColorPicker",props:{value:{type:String,default:function(){return a.b.light[0]}},colors:{type:Array,default:function(){return a.b.light.concat(a.b.dark)}},rowSize:{type:Number,default:function(){return 10}},advanced:{type:Boolean,default:function(){return!0}}},data:function(){return{picked:""}},created:function(){this.picked=this.value||""},methods:{select:function(e){this.picked=e,this.$emit("input",e)},compare:function(e,t){return("string"==typeof e||e instanceof String)&&("string"==typeof t||t instanceof String)&&e.toLowerCase()===t.toLowerCase()}}},o=(n(689),n(191)),r=n(210),l=n.n(r),s=n(354),c=n(1065),u=n(617),d=n(1061),m=n(1062),p=n(1063),f=n(1064),v=Object(o.a)(i,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"color-picker"},[e._l(Math.ceil(e.colors.length/e.rowSize),(function(t){return n("div",{key:t,staticClass:"color-picker-row"},e._l(e.colors.slice((t-1)*e.rowSize,t*e.rowSize),(function(a,i){return n("button",{key:"color-"+t+"-"+i,staticClass:"color-selector",class:e.compare(e.picked,a)?"selected":"",style:{"background-color":a},on:{click:function(t){return e.select(a)}}},[e._v("\n      "+e._s(e.compare(e.picked,a)?"âœ“":"")+"\n    ")])})),0)})),e._v(" "),e.advanced?n("v-expansion-panels",[n("v-expansion-panel",[n("v-expansion-panel-header",[e._v("Advanced")]),e._v(" "),n("v-expansion-panel-content",[n("v-container",{staticClass:"d-flex flex-column"},[n("v-btn",{staticClass:"primary lighten-2",on:{click:function(t){return e.select(e.picked)}}},[e._v("\n            Pick Color\n          ")]),e._v(" "),n("v-color-picker",{staticClass:"align-self-center ma-2",attrs:{"canvas-height":"100px",mode:"hexa"},model:{value:e.picked,callback:function(t){e.picked=t},expression:"picked"}})],1)],1)],1)],1):e._e()],2)}),[],!1,null,"3c2de60e",null);t.default=v.exports;l()(v,{VBtn:s.a,VColorPicker:c.a,VContainer:u.a,VExpansionPanel:d.a,VExpansionPanelContent:m.a,VExpansionPanelHeader:p.a,VExpansionPanels:f.a})},104:function(e,t,n){"use strict";n.r(t);n(213),n(54),n(224),n(55),n(56);var a=n(216),i=n(243),o=n(36),r=n(229),l=n(212),s=(n(230),n(201),n(52),n(208),n(190),n(207),n(728),n(220),n(199),n(219),n(214),n(294),n(281),n(593),n(53),n(228),n(616)),u=n.n(s),d=n(394),m=n(242),p=n(374),f="numeric",v="string",h="date",b="conditional_expression",g={AVG:{type:f,validation:{args:{min:1}},description:"Average of input parameters",syntax:"AVG(value1, [value2, ...])",examples:["AVG(10, 5) => 7.5","AVG({column1}, {column2})","AVG({column1}, {column2}, {column3})"]},ADD:{type:f,validation:{args:{min:1}},description:"Sum of input parameters",syntax:"ADD(value1, [value2, ...])",examples:["ADD(5, 5) => 10","ADD({column1}, {column2})","ADD({column1}, {column2}, {column3})"]},DATEADD:{type:h,validation:{args:{rqd:3}},description:'Adds a "count" units to Datetime.',syntax:'DATEADD(date | datetime, value, ["day" | "week" | "month" | "year"])',examples:['DATEADD({column1}, 2, "day")','DATEADD({column1}, -2, "day")','DATEADD({column1}, 2, "week")','DATEADD({column1}, -2, "week")','DATEADD({column1}, 2, "month")','DATEADD({column1}, -2, "month")','DATEADD({column1}, 2, "year")','DATEADD({column1}, -2, "year")']},AND:{type:b,validation:{args:{min:1}},description:"TRUE if all expr evaluate to TRUE",syntax:"AND(expr1, [expr2, ...])",examples:["AND(5 > 2, 5 < 10) => 1","AND({column1} > 2, {column2} < 10)"]},OR:{type:b,validation:{args:{min:1}},description:"TRUE if at least one expr evaluates to TRUE",syntax:"OR(expr1, [expr2, ...])",examples:["OR(5 > 2, 5 < 10) => 1","OR({column1} > 2, {column2} < 10)"]},CONCAT:{type:v,validation:{args:{min:1}},description:"Concatenated string of input parameters",syntax:"CONCAT(str1, [str2, ...])",examples:['CONCAT("AA", "BB", "CC") => "AABBCC"',"CONCAT({column1}, {column2}, {column3})"]},TRIM:{type:v,validation:{args:{rqd:1}},description:"Remove trailing and leading whitespaces from input parameter",syntax:"TRIM(str)",examples:['TRIM("         HELLO WORLD  ") => "HELLO WORLD"',"TRIM({column1})"]},UPPER:{type:v,validation:{args:{rqd:1}},description:"Upper case converted string of input parameter",syntax:"UPPER(str)",examples:['UPPER("nocodb") => "NOCODB"',"UPPER({column1})"]},LOWER:{type:v,validation:{args:{rqd:1}},description:"Lower case converted string of input parameter",syntax:"LOWER(str)",examples:['LOWER("NOCODB") => "nocodb"',"LOWER({column1})"]},LEN:{type:v,validation:{args:{rqd:1}},description:"Input parameter character length",syntax:"LEN(value)",examples:['LEN("NocoDB") => 6',"LEN({column1})"]},MIN:{type:f,validation:{args:{min:1}},description:"Minimum value amongst input parameters",syntax:"MIN(value1, [value2, ...])",examples:["MIN(1000, 2000) => 1000","MIN({column1}, {column2})"]},MAX:{type:f,validation:{args:{min:1}},description:"Maximum value amongst input parameters",syntax:"MAX(value1, [value2, ...])",examples:["MAX(1000, 2000) => 2000","MAX({column1}, {column2})"]},CEILING:{type:f,validation:{args:{rqd:1}},description:"Rounded next largest integer value of input parameter",syntax:"CEILING(value)",examples:["CEILING(1.01) => 2","CEILING({column1})"]},FLOOR:{type:f,validation:{args:{rqd:1}},description:"Rounded largest integer less than or equal to input parameter",syntax:"FLOOR(value)",examples:["FLOOR(3.1415) => 3","FLOOR({column1})"]},ROUND:{type:f,validation:{args:{rqd:1}},description:"Nearest integer to the input parameter",syntax:"ROUND(value)",examples:["ROUND(3.1415) => 3","ROUND({column1})"]},MOD:{type:f,validation:{args:{rqd:2}},description:"Remainder after integer division of input parameters",syntax:"MOD(value1, value2)",examples:["MOD(1024, 1000) => 24","MOD({column}, 2)"]},REPEAT:{type:v,validation:{args:{rqd:2}},description:"Specified copies of the input parameter string concatenated together",syntax:"REPEAT(str, count)",examples:['REPEAT("A", 5) => "AAAAA"',"REPEAT({column}, 5)"]},LOG:{type:f,validation:{},description:"Logarithm of input parameter to the base (default = e) specified",syntax:"LOG([base], value)",examples:["LOG(2, 1024) => 10","LOG(2, {column1})"]},EXP:{type:f,validation:{},description:"Exponential value of input parameter (e ^ power)",syntax:"EXP(power)",examples:["EXP(1) => 2.718281828459045","EXP({column1})"]},POWER:{type:f,validation:{args:{rqd:2}},description:"base to the exponent power, as in base ^ exponent",syntax:"POWER(base, exponent)",examples:["POWER(2, 10) => 1024","POWER({column1}, 10)"]},SQRT:{type:f,validation:{args:{rqd:1}},description:"Square root of the input parameter",syntax:"SQRT(value)",examples:["SQRT(100) => 10","SQRT({column1})"]},ABS:{type:f,validation:{args:{rqd:1}},description:"Absolute value of the input parameter",syntax:"ABS(value)",examples:["ABS({column1})"]},NOW:{type:h,validation:{args:{rqd:0}},description:"Returns the current time and day",syntax:"NOW()",examples:["NOW() => 2022-05-19 17:20:43"]},REPLACE:{type:v,validation:{args:{rqd:3}},description:"String, after replacing all occurrences of srchStr with rplcStr",syntax:"REPLACE(str, srchStr, rplcStr)",examples:['REPLACE("AABBCC", "AA", "BB") => "BBBBCC"',"REPLACE({column1}, {column2}, {column3})"]},SEARCH:{type:v,validation:{args:{rqd:2}},description:"Index of srchStr specified if found, 0 otherwise",syntax:"SEARCH(str, srchStr)",examples:['SEARCH("HELLO WORLD", "WORLD") => 7','SEARCH({column1}, "abc")']},INT:{type:f,validation:{args:{rqd:1}},description:"Integer value of input parameter",syntax:"INT(value)",examples:["INT(3.1415) => 3","INT({column1})"]},RIGHT:{type:v,validation:{args:{rqd:2}},description:"n characters from the end of input parameter",syntax:"RIGHT(str, n)",examples:['RIGHT("HELLO WORLD", 5) => WORLD',"RIGHT({column1}, 3)"]},LEFT:{type:v,validation:{args:{rqd:2}},description:"n characters from the beginning of input parameter",syntax:"LEFT(str, n)",examples:["LEFT({column1}, 2)",'LEFT("ABCD", 2) => "AB"']},SUBSTR:{type:v,validation:{args:{min:2,max:3}},description:"Substring of length n of input string from the postition specified",syntax:"\tSUBTR(str, position, [n])",examples:['SUBSTR("HELLO WORLD", 7) => WORLD','SUBSTR("HELLO WORLD", 7, 3) => WOR',"SUBSTR({column1}, 7, 5)"]},MID:{type:v,validation:{args:{rqd:3}},description:"Alias for SUBSTR",syntax:"MID(str, position, [count])",examples:['MID("NocoDB", 3, 2) => "co"',"MID({column1}, 3, 2)"]},IF:{type:b,validation:{args:{min:2,max:3}},description:"SuccessCase if expr evaluates to TRUE, elseCase otherwise",syntax:"IF(expr, successCase, elseCase)",examples:['IF(5 > 1, "YES", "NO") => "YES"','IF({column} > 1, "YES", "NO")']},SWITCH:{type:b,validation:{args:{min:3}},description:"Switch case value based on expr output",syntax:"SWITCH(expr, [pattern, value, ..., default])",examples:['SWITCH(1, 1, "One", 2, "Two", "N/A") => "One""','SWITCH(2, 1, "One", 2, "Two", "N/A") => "Two"','SWITCH(3, 1, "One", 2, "Two", "N/A") => "N/A"','SWITCH({column1}, 1, "One", 2, "Two", "N/A")']},URL:{type:v,validation:{args:{rqd:1}},description:"Convert to a hyperlink if it is a valid URL",syntax:"URL(str)",examples:['URL("https://github.com/nocodb/nocodb")',"URL({column1})"]}},y=Object.keys(g),x=n(301),w=n(620),_=n(621);function C(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return k(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return k(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var a=0,i=function(){};return{s:i,n:function(){return a>=e.length?{done:!0}:{done:!1,value:e[a++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,r=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return r=e.done,e},e:function(e){l=!0,o=e},f:function(){try{r||null==n.return||n.return()}finally{if(l)throw o}}}}function k(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}var O=function(){function e(){Object(w.a)(this,e),this.trie=null,this.suggestions=[]}return Object(_.a)(e,[{key:"newNode",value:function(){return{isLeaf:!1,children:{}}}},{key:"add",value:function(e){this.trie||(this.trie=this.newNode());var t,n=this.trie,a=C(e.text.toLowerCase());try{for(a.s();!(t=a.n()).done;){var i=t.value;i in n.children||(n.children[i]=this.newNode()),n=n.children[i]}}catch(e){a.e(e)}finally{a.f()}n.value=n.value||[],n.value.push(e)}},{key:"find",value:function(e){var t,n=this.trie,a=C(e);try{for(a.s();!(t=a.n()).done;){var i=t.value;if(!(i in n.children))return null;n=n.children[i]}}catch(e){a.e(e)}finally{a.f()}return n}},{key:"traverse",value:function(e){var t;e.value&&e.value.length&&(t=this.suggestions).push.apply(t,Object(l.a)(e.value));for(var n in e.children)this.traverse(e.children[n])}},{key:"complete",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;this.suggestions=[];var n=this.find(e.toLowerCase());if(!n)return this.suggestions;var a=n.children,i=0;for(var o in a)if(this.traverse(a[o],e+o),i++,t&&i===t)break;return this.suggestions}}]),e}();function S(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function M(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?S(Object(n),!0).forEach((function(t){Object(o.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):S(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function j(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return D(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return D(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var a=0,i=function(){};return{s:i,n:function(){return a>=e.length?{done:!0}:{done:!1,value:e[a++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,r=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return r=e.done,e},e:function(e){l=!0,o=e},f:function(){try{r||null==n.return||n.return()}finally{if(l)throw o}}}}function D(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}var $={name:"FormulaOptions",props:["nodes","column","meta","isSQLite","alias","value","sqlUi"],data:function(){return{formula:{},availableFunctions:y,availableBinOps:["+","-","*","/",">","<","==","<=",">=","!="],autocomplete:!1,suggestion:null,wordToComplete:"",selected:0,tooltip:!0,sortOrder:{column:0,function:1,op:2}}},computed:{suggestionsList:function(){var e=this,t=this.sqlUi.getUnsupportedFnList();return[].concat(Object(l.a)(this.availableFunctions.filter((function(e){return!t.includes(e)})).map((function(e){return{text:e+"()",type:"function",description:g[e].description,syntax:g[e].syntax,examples:g[e].examples}}))),Object(l.a)(this.meta.columns.filter((function(t){return!e.column||e.column.id!==t.id})).map((function(e){return{text:e.title,type:"column",icon:Object(p.b)(e.uidt),c:e}}))),Object(l.a)(this.availableBinOps.map((function(e){return{text:e,type:"op"}}))))},acTree:function(){var e,t=new O,n=j(this.suggestionsList);try{for(n.s();!(e=n.n()).done;){var a=e.value;t.add(a)}}catch(e){n.e(e)}finally{n.f()}return t}},watch:{value:function(e,t){e!==t&&(this.formula=this.formula||{},this.formula.value=e||"")},"formula.value":function(e,t){e!==t&&this.$emit("input",e)}},created:function(){this.formula={value:this.value||""},d.a.plugins.register(m.k)},methods:{save:function(){var e=this;return Object(r.a)(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,n={title:e.alias,uidt:m.f.Formula,formula_raw:e.formula.value},t.next=4,e.$api.dbTableColumn.create(e.meta.id,n);case 4:return t.sent,e.$toast.success("Formula column saved successfully").goAway(3e3),t.abrupt("return",e.$emit("saved",e.alias));case 9:return t.prev=9,t.t0=t.catch(0),t.t1=e.$toast,t.next=14,e._extractSdkResponseErrorMsg(t.t0);case 14:t.t2=t.sent,t.t1.error.call(t.t1,t.t2).goAway(3e3);case 16:case"end":return t.stop()}}),t,null,[[0,9]])})))()},update:function(){var e=this;return Object(r.a)(regeneratorRuntime.mark((function t(){var n,a;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,n=JSON.parse(JSON.stringify(e.$store.state.meta.metas[e.meta.table_name])),a=n.v.find((function(t){return t.title===e.column.title&&t.formula})),Object.assign(a,{_cn:e.alias,formula:M(M({},e.formula),{},{tree:Object(d.a)(e.formula.value),error:void 0})}),t.next=6,e.$store.dispatch("sqlMgr/ActSqlOp",[{env:e.nodes.env,dbAlias:e.nodes.dbAlias},"xcModelSet",{tn:e.nodes.table_name,meta:n}]);case 6:e.$toast.success("Formula column updated successfully").goAway(3e3),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(0),e.$toast.error(t.t0.message).goAway(3e3);case 12:case"end":return t.stop()}}),t,null,[[0,9]])})))()},parseAndValidateFormula:function(e){try{var t=Object(d.a)(e),n=this.validateAgainstMeta(t);return!n.size||Object(l.a)(n).join(", ")}catch(e){return e.message}},validateAgainstMeta:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Set,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new Set;if(e.type===d.a.CALL_EXP){this.availableFunctions.includes(e.callee.name)||n.add("'".concat(e.callee.name,"' function is not available"));var r=g[e.callee.name]&&g[e.callee.name].validation;if(r&&r.args&&(void 0!==r.args.rqd&&r.args.rqd!==e.arguments.length?n.add("'".concat(e.callee.name,"' required ").concat(r.args.rqd," arguments")):void 0!==r.args.min&&r.args.min>e.arguments.length?n.add("'".concat(e.callee.name,"' required minimum ").concat(r.args.min," arguments")):void 0!==r.args.max&&r.args.max<e.arguments.length&&n.add("'".concat(e.callee.name,"' required maximum ").concat(r.args.max," arguments"))),e.arguments.map((function(e){return t.validateAgainstMeta(e,n)})),e.callee.type===d.a.IDENTIFIER){var s=g[e.callee.name].type;s===f?e.arguments.map((function(e){return t.validateAgainstType(e,s,null,a)})):s===h&&"DATEADD"===e.callee.name&&(this.validateAgainstType(e.arguments[0],h,(function(e){e instanceof Date||a.add("The first parameter of DATEADD() should have date value")}),a),this.validateAgainstType(e.arguments[1],f,(function(e){"number"!=typeof e&&a.add("The second parameter of DATEADD() should have numeric value")}),a),this.validateAgainstType(e.arguments[2],v,(function(e){["day","week","month","year"].includes(e)||a.add('The third parameter of DATEADD() should have the value either "day", "week", "month" or "year"')}),a))}n=new Set([].concat(Object(l.a)(n),Object(l.a)(a)))}else if(e.type===d.a.IDENTIFIER){this.meta.columns.filter((function(e){return!t.column||t.column.id!==e.id})).every((function(t){return t.title!==e.name}))&&n.add("Column '".concat(e.name,"' is not available"));var c=this.meta.columns.filter((function(e){return e.id!==t.column.id&&e.uidt===m.f.Formula})).reduce((function(e,n){var a=(n.colOptions.formula.match(/cl_\w{14}/g)||[]).filter((function(e){return t.meta.columns.filter((function(t){return t.id===e&&t.uidt===m.f.Formula})).length}));return a.length>0&&e.push(Object(o.a)({},n.id,a)),e}),[]),u=this.meta.columns.find((function(t){return t.title===e.name&&t.uidt===m.f.Formula}));u&&c.push(Object(o.a)({},this.column.id,[u.id]));var p=c.length;p>0&&function(){for(var e=new Map,t=new Map,a=0,o=Object.entries(c);a<o.length;a++){var r=Object(i.a)(o[a],2),l=(r[0],r[1]),s=Object.keys(l)[0],u=l[s];t.set(s,t.get(s)||0);var d,m=j(u);try{for(m.s();!(d=m.n()).done;){var f=d.value;e.set(s,(e.get(s)||new Set).add(f)),t.set(f,(t.get(f)||0)+1)}}catch(e){m.e(e)}finally{m.f()}}var v=[];t.forEach((function(e,t){0===e&&v.push(t)}));for(var h=0;0!==v.length;){var b=v.shift(),g=e.get(b)||new Set;g.size>0&&(h+=1),g.forEach((function(e){t.set(e,t.get(e)-1),0===t.get(e)&&v.push(e)}))}p!==h&&n.add("Canâ€™t save field because it causes a circular reference")}()}else e.type===d.a.BINARY_EXP?(this.availableBinOps.includes(e.operator)||n.add("'".concat(e.operator,"' operation is not available")),this.validateAgainstMeta(e.left,n),this.validateAgainstMeta(e.right,n)):e.type===d.a.LITERAL||e.type===d.a.UNARY_EXP||(e.type===d.a.COMPOUND?e.body.length&&n.add("Canâ€™t save field because the formula is invalid"):n.add("Canâ€™t save field because the formula is invalid"));return n},validateAgainstType:function(e,t,n){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:new Set;if(!1===e||void 0===e)return a;if(e.type===d.a.LITERAL)"function"==typeof n?n(e.value):t===f?"number"!=typeof e.value&&a.add("Numeric type is expected"):t===v&&"string"!=typeof e.value&&a.add("string type is expected");else if(e.type===d.a.IDENTIFIER){var i=this.meta.columns.find((function(t){return t.title===e.name}));if(void 0===i)return;if(i.uidt===m.f.Formula){var o=this.getRootDataType(Object(d.a)(i.colOptions.formula_raw));"N/A"===o?a.add("Not supported to reference column ".concat(c.title)):t!==o&&a.add("Type ".concat(t," is expected but found Type ").concat(o))}else switch(i.uidt){case m.f.SingleLineText:case m.f.LongText:case m.f.MultiSelect:case m.f.SingleSelect:case m.f.PhoneNumber:case m.f.Email:case m.f.URL:t!==v&&a.add("Column '".concat(e.name,"' with ").concat(v," type is found but ").concat(t," type is expected"));break;case m.f.Year:case m.f.Number:case m.f.Decimal:case m.f.Rating:case m.f.Count:case m.f.AutoNumber:t!==f&&a.add("Column '".concat(e.name,"' with ").concat(f," type is found but ").concat(t," type is expected"));break;case m.f.Date:case m.f.DateTime:case m.f.CreateTime:case m.f.LastModifiedTime:t!==h&&a.add("Column '".concat(e.name,"' with ").concat(h," type is found but ").concat(t," type is expected"));break;case m.f.ForeignKey:case m.f.Attachment:case m.f.ID:case m.f.Time:case m.f.Currency:case m.f.Percent:case m.f.Duration:case m.f.Rollup:case m.f.Lookup:case m.f.Barcode:case m.f.Button:case m.f.Checkbox:case m.f.Collaborator:default:a.add("Not supported to reference column '".concat(e.name,"'"))}}else if(e.type===d.a.UNARY_EXP||e.type===d.a.BINARY_EXP)t!==f&&a.add("".concat(f," type is found but ").concat(t," type is expected"));else if(e.type===d.a.CALL_EXP){var r;null!==(r=g[e.callee.name])&&void 0!==r&&r.type&&t!==g[e.callee.name].type&&a.add("".concat(t," not matched with ").concat(g[e.callee.name].type))}return a},getRootDataType:function(e){if(e.type===d.a.CALL_EXP)return g[e.callee.name].type;if(e.type!==d.a.IDENTIFIER)return e.type===d.a.BINARY_EXP||e.type===d.a.UNARY_EXP?f:e.type===d.a.LITERAL?Object(a.a)(e.value):"N/A";var t=this.meta.columns.find((function(t){return t.title===e.name}));if(t.uidt===m.f.Formula)return this.getRootDataType(Object(d.a)(t.colOptions.formula_raw));switch(t.uidt){case m.f.SingleLineText:case m.f.LongText:case m.f.MultiSelect:case m.f.SingleSelect:case m.f.PhoneNumber:case m.f.Email:case m.f.URL:return v;case m.f.Year:case m.f.Number:case m.f.Decimal:case m.f.Rating:case m.f.Count:case m.f.AutoNumber:return f;case m.f.Date:case m.f.DateTime:case m.f.CreateTime:case m.f.LastModifiedTime:return h;case m.f.ForeignKey:case m.f.Attachment:case m.f.ID:case m.f.Time:case m.f.Currency:case m.f.Percent:case m.f.Duration:case m.f.Rollup:case m.f.Lookup:case m.f.Barcode:case m.f.Button:case m.f.Checkbox:case m.f.Collaborator:default:return"N/A"}},isCurlyBracketBalanced:function(){var e=(this.$refs.input.$el.querySelector("input").value.match(/\{|}/g)||[]).reduce((function(e,t){return e[t]=(e[t]||0)+1,e}),{});return(e["{"]||0)===(e["}"]||0)},appendText:function(e){var t=e.text,n=this.wordToComplete.length;"function"===e.type?this.$set(this.formula,"value",Object(x.c)(this.$refs.input.$el.querySelector("input"),t,n,1)):"column"===e.type?this.$set(this.formula,"value",Object(x.c)(this.$refs.input.$el.querySelector("input"),"{"+t+"}",n+!this.isCurlyBracketBalanced())):this.$set(this.formula,"value",Object(x.c)(this.$refs.input.$el.querySelector("input"),t,n)),this.autocomplete=!1,this.suggestion=null},_handleInputDeb:u()(function(){var e=Object(r.a)(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.handleInput();case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),250),handleInputDeb:function(){this._handleInputDeb(this)},handleInput:function(){var e,t=this;this.selected=0,this.suggestion=null;var n=Object(x.b)(this.$refs.input.$el.querySelector("input")).split(/\W+/);this.wordToComplete=n.pop(),this.suggestion=null===(e=this.acTree.complete(this.wordToComplete))||void 0===e?void 0:e.sort((function(e,n){return t.sortOrder[e.type]-t.sortOrder[n.type]})),this.isCurlyBracketBalanced()||(this.suggestion=this.suggestion.filter((function(e){return"column"===e.type}))),this.autocomplete=!!this.suggestion.length},selectText:function(){this.suggestion&&this.selected>-1&&this.selected<this.suggestion.length&&this.appendText(this.suggestion[this.selected])},suggestionListDown:function(){this.suggestion&&(this.selected=++this.selected%this.suggestion.length,this.scrollToSelectedOption())},suggestionListUp:function(){this.suggestion&&(this.selected=--this.selected>-1?this.selected:this.suggestion.length-1,this.scrollToSelectedOption())},scrollToSelectedOption:function(){var e=this;this.$nextTick((function(){if(e.$refs.sugOptions[e.selected])try{e.$refs.sugList.$el.scrollTo({top:e.$refs.sugOptions[e.selected].$el.offsetTop,behavior:"smooth"})}catch(e){}}))}}},L=(n(692),n(191)),T=n(210),R=n.n(T),A=n(372),P=n(217),E=n(312),N=n(510),V=n(297),I=n(258),F=n(298),U=n(236),q=n(299),B=n(305),K=n(717),Y=Object(L.a)($,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"formula-wrapper"},[n("v-text-field",{ref:"input",staticClass:"caption",attrs:{dense:"",outlined:"","hide-details":"auto",label:"Formula",rules:[function(e){return!!e||"Required"},function(t){return e.parseAndValidateFormula(t)}],autocomplete:"off"},on:{input:e.handleInputDeb,keydown:[function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"down",40,t.key,["Down","ArrowDown"])?null:(t.preventDefault(),e.suggestionListDown.apply(null,arguments))},function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"up",38,t.key,["Up","ArrowUp"])?null:(t.preventDefault(),e.suggestionListUp.apply(null,arguments))},function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:(t.preventDefault(),e.selectText.apply(null,arguments))}]},model:{value:e.formula.value,callback:function(t){e.$set(e.formula,"value",t)},expression:"formula.value"}}),e._v(" "),e._m(0),e._v(" "),e.suggestion&&e.suggestion.length?n("v-card",{staticClass:"formula-suggestion"},[n("v-card-text",[e._v("Suggestions")]),e._v(" "),n("v-divider"),e._v(" "),n("v-list",{ref:"sugList",staticStyle:{overflow:"auto"},attrs:{dense:"","max-height":"50vh"}},[n("v-list-item-group",{attrs:{color:"primary"},model:{value:e.selected,callback:function(t){e.selected=t},expression:"selected"}},e._l(e.suggestion,(function(t,a){return n("v-list-item",{key:a,ref:"sugOptions",refInFor:!0,attrs:{dense:"",selectable:""},on:{mousedown:function(n){return n.preventDefault(),e.appendText(t)}}},["function"===t.type?[n("v-tooltip",{attrs:{right:"","offset-x":"","nudge-right":"100"},scopedSlots:e._u([{key:"activator",fn:function(a){var i=a.on;return[n("v-list-item-content",e._g({},i),[n("span",{staticClass:"caption primary--text text--lighten-2 font-weight-bold"},[n("v-icon",{staticClass:"mr-1",attrs:{color:"primary lighten-2",small:""}},[e._v("\n                      mdi-function\n                    ")]),e._v("\n                    "+e._s(t.text)+"\n                  ")],1)]),e._v(" "),n("v-list-item-action",[n("span",{staticClass:"caption"},[e._v("\n                    Function\n                  ")])])]}}],null,!0)},[e._v(" "),n("div",[e._v("\n                "+e._s(t.description)+" "),n("br"),n("br"),e._v("\n                Syntax: "),n("br"),e._v("\n                "+e._s(t.syntax)+" "),n("br"),n("br"),e._v("\n                Examples: "),n("br"),e._v(" "),e._l(t.examples,(function(t,a){return n("div",{key:a},[n("pre",[e._v("("+e._s(a+1)+"): "+e._s(t))])])}))],2)])]:e._e(),e._v(" "),"column"===t.type?[n("v-list-item-content",[n("span",{staticClass:"caption text--darken-3 font-weight-bold"},[n("v-icon",{staticClass:"mr-1",attrs:{color:"grey darken-4",small:""}},[e._v("\n                  "+e._s(t.icon)+"\n                ")]),e._v("\n                "+e._s(t.text)+"\n              ")],1)]),e._v(" "),n("v-list-item-action",[n("span",{staticClass:"caption"},[e._v("\n                Column\n              ")])])]:e._e(),e._v(" "),"op"===t.type?[n("v-list-item-content",[n("span",{staticClass:"caption indigo--text text--darken-3 font-weight-bold"},[n("v-icon",{staticClass:"mr-1",attrs:{color:"indigo darken-3",small:""}},[e._v("\n                  mdi-calculator-variant\n                ")]),e._v("\n                "+e._s(t.text)+"\n              ")],1)]),e._v(" "),n("v-list-item-action",[n("span",{staticClass:"caption"},[e._v("\n                Operator\n              ")])])]:e._e()],2)})),1)],1)],1):e._e()],1)}),[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"hint"},[this._v("\n    Hint: Use {} to reference columns, e.g: {column_name}. For more, please check out\n    "),t("a",{attrs:{href:"https://docs.nocodb.com/setup-and-usages/formulas#available-formula-features",target:"_blank"}},[this._v("Formulas")]),this._v(".\n  ")])}],!1,null,"4e2250ac",null);t.default=Y.exports;R()(Y,{VCard:A.a,VCardText:P.b,VDivider:E.a,VIcon:N.a,VList:V.a,VListItem:I.a,VListItemAction:F.a,VListItemContent:U.a,VListItemGroup:q.a,VTextField:B.a,VTooltip:K.a})},1047:function(e,t,n){"use strict";n(983)},1048:function(e,t,n){var a=n(177)(!1);a.push([e.i,".row-col>label[data-v-11db4f30]{color:grey;font-weight:700}.active-row>label[data-v-11db4f30],.row-col:focus>label[data-v-11db4f30]{color:var(--v-primary-base)}.title.text-center[data-v-11db4f30]{white-space:nowrap;overflow:hidden;text-overflow:ellipsis}[data-v-11db4f30]{position:relative}[data-v-11db4f30] .v-breadcrumbs__item:nth-child(odd){font-size:.72rem;color:grey}[data-v-11db4f30] .v-breadcrumbs li:nth-child(2n){padding:0 6px;font-size:.72rem;color:var(--v-textColor-base)}[data-v-11db4f30] .comment-icon{position:absolute;right:60px;bottom:60px}[data-v-11db4f30] .row-col>div>.xc-input>div>input,[data-v-11db4f30] .row-col>div>.xc-input>input,[data-v-11db4f30] .row-col>div>.xc-input>select,[data-v-11db4f30] .row-col>div>input,[data-v-11db4f30] .row-col>div>select,[data-v-11db4f30] .row-col>div textarea:not(.inputarea){border:1px solid rgba(127,130,139,.2);padding:1px 5px;font-size:.8rem;border-radius:4px;min-height:44px}[data-v-11db4f30] .row-col>div>.xc-input>div>input:focus,[data-v-11db4f30] .row-col>div>.xc-input>input:focus,[data-v-11db4f30] .row-col>div>.xc-input>select:focus,[data-v-11db4f30] .row-col>div>input:focus,[data-v-11db4f30] .row-col>div>select:focus,[data-v-11db4f30] .row-col>div textarea:not(.inputarea):focus{border:1px solid var(--v-primary-base)}[data-v-11db4f30] .row-col>div>.xc-input>div>input:hover:not(:focus),[data-v-11db4f30] .row-col>div>.xc-input>input:hover:not(:focus),[data-v-11db4f30] .row-col>div>.xc-input>select:hover:not(:focus),[data-v-11db4f30] .row-col>div>input:hover:not(:focus),[data-v-11db4f30] .row-col>div>select:hover:not(:focus),[data-v-11db4f30] .row-col>div textarea:not(.inputarea):hover:not(:focus){box-shadow:0 0 2px #696969}[data-v-11db4f30].v-card.theme--dark .v-card__text{background:#363636}[data-v-11db4f30].v-card.theme--dark .v-card__text .row-col>div>.xc-input>div>input,[data-v-11db4f30].v-card.theme--dark .v-card__text .row-col>div>.xc-input>input,[data-v-11db4f30].v-card.theme--dark .v-card__text .row-col>div>.xc-input>select,[data-v-11db4f30].v-card.theme--dark .v-card__text .row-col>div>input,[data-v-11db4f30].v-card.theme--dark .v-card__text .row-col>div>select,[data-v-11db4f30].v-card.theme--dark .v-card__text .row-col>div textarea:not(.inputarea){background:#1e1e1e}[data-v-11db4f30].v-card.theme--light .v-card__text{background-color:#f1f1f1!important}[data-v-11db4f30].v-card.theme--light .v-card__text .row-col>div>.xc-input>div>input,[data-v-11db4f30].v-card.theme--light .v-card__text .row-col>div>.xc-input>input,[data-v-11db4f30].v-card.theme--light .v-card__text .row-col>div>.xc-input>select,[data-v-11db4f30].v-card.theme--light .v-card__text .row-col>div>input,[data-v-11db4f30].v-card.theme--light .v-card__text .row-col>div>select,[data-v-11db4f30].v-card.theme--light .v-card__text .row-col>div textarea:not(.inputarea){background:#fff}h5[data-v-11db4f30]{color:var(--v-textColor-base)}.form-container[data-v-11db4f30]{max-height:calc(100vh - 200px);min-height:200px;overflow:auto}.edited-text[data-v-11db4f30],.time[data-v-11db4f30]{font-size:.65rem;color:grey}.comment-box.focus[data-v-11db4f30]{border:1px solid #4185f4}.required>div>label+*[data-v-11db4f30]{border:1px solid red;border-radius:4px;background:var(--v-backgroundColorDefault-base)}.nc-chip[data-v-11db4f30]{padding:8px;border-radius:8px}",""]),e.exports=a},105:function(e,t,n){"use strict";n.r(t);n(201),n(228),n(257);var a={name:"SetListCell",mixins:[n(463).a],props:["value","column"],computed:{setValues:function(){return this.column&&this.column.dtxp?this.column.dtxp.split(",").map((function(e){return e.replace(/\\'/g,"'").replace(/^'|'$/g,"")})):[]},selectedValues:function(){return this.value?this.value.split(",").map((function(e){return e.replace(/\\'/g,"'").replace(/^'|'$/g,"")})):[]}}},i=(n(678),n(191)),o=n(210),r=n.n(o),l=n(308),s=Object(i.a)(a,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",e._l(e.selectedValues,(function(t){return n("v-chip",{directives:[{name:"show",rawName:"v-show",value:t||e.setValues.includes(t),expression:"v || setValues.includes(v)"}],key:t,staticClass:"set-item ma-1 py-1 px-3",attrs:{small:"",color:e.colors[e.setValues.indexOf(t)%e.colors.length]}},[e._v("\n    "+e._s(t)+"\n  ")])})),1)}),[],!1,null,"97dece34",null);t.default=s.exports;r()(s,{VChip:l.a})},106:function(e,t,n){"use strict";n.r(t);var a=n(36),i=(n(201),n(228),n(257),n(53),n(54),n(52),n(55),n(56),n(365));function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function r(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){Object(a.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var l={name:"EnumCell",props:["value","column"],computed:{colors:function(){var e=this.$store.state.settings.darkTheme?i.b.dark:i.b.light;return this.column&&this.column.dtxp?this.column.dtxp.split(",").map((function(e){return e.replace(/\\'/g,"'").replace(/^'|'$/g,"")})).reduce((function(t,n,i){return r(r({},t),{},Object(a.a)({},n,e[i]))}),{}):{}}}},s=(n(683),n(191)),c=Object(s.a)(l,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",e._l([(e.value||"").replace(/\\'/g,"'").replace(/^'|'$/g,"")],(function(t){return n("span",{key:t,staticClass:"set-item ma-1 py-1 px-3",style:{background:e.colors[t]}},[e._v(e._s(t))])})),0)}),[],!1,null,"38574e10",null);t.default=c.exports},107:function(e,t,n){"use strict";n.r(t);var a=n(212),i=n(229),o=(n(230),n(52),n(201),n(54),n(224),n(220),n(199),n(219),n(214),n(213),n(685)),r=n.n(o),l=n(602),s=n.n(l),c=n(670);function u(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return d(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return d(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var a=0,i=function(){};return{s:i,n:function(){return a>=e.length?{done:!0}:{done:!1,value:e[a++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,r=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return r=e.done,e},e:function(e){l=!0,o=e},f:function(){try{r||null==n.return||n.return()}finally{if(l)throw o}}}}function d(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}var m={name:"EditableAttachmentCell",components:{draggable:s.a},props:["dbAlias","value","active","isLocked","meta","column","isPublicGrid","isForm","isPublicForm","viewId"],data:function(){return{carousel:null,uploading:!1,localState:"",dialog:!1,showImage:!1,selectedImage:null,dragOver:!1,localFilesState:[],urlString:""}},watch:{value:function(e,t){try{this.localState=(("string"==typeof e&&e!==t?JSON.parse(e):e)||[]).filter(Boolean)}catch(e){this.localState=[]}}},created:function(){try{this.localState=(("string"==typeof this.value?JSON.parse(this.value):this.value)||[]).filter(Boolean)}catch(e){this.localState=[]}document.addEventListener("keydown",this.onArrowDown)},beforeDestroy:function(){document.removeEventListener("keydown",this.onArrowDown)},mounted:function(){},methods:{uploadByUrl:function(){var e=this;return Object(i.a)(regeneratorRuntime.mark((function t(){var n,i;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$api.storage.uploadByUrl({path:["noco",e.projectName,e.meta.title,e.column.title].join("/")},[{url:e.urlString}]);case 2:i=t.sent,(n=e.localState).push.apply(n,Object(a.a)(i));case 4:case"end":return t.stop()}}),t)})))()},openUrl:function(e,t){window.open(e,t)},isImage:c.a,hideIfVisible:function(){this.showImage&&(this.showImage=!1)},selectImage:function(e,t){this.carousel=t,this.selectedImage=e,this.showImage=!0},addFile:function(){this.isLocked||this.$refs.file.click()},onFileSelection:function(){var e=this;return Object(i.a)(regeneratorRuntime.mark((function t(){var n,i,o,r,l,s;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!e.isPublicGrid){t.next=2;break}return t.abrupt("return");case 2:if(e.$refs.file.files&&e.$refs.file.files.length){t.next=4;break}return t.abrupt("return");case 4:if(!e.isPublicForm){t.next=8;break}return(n=e.localFilesState).push.apply(n,Object(a.a)(Array.from(e.$refs.file.files).map((function(t){var n={file:t,title:t.name};if(Object(c.a)(t.name,t.mimetype)){var a=new FileReader;a.onload=function(t){e.$set(n,"data",t.target.result)},a.readAsDataURL(t)}return n})))),e.$emit("input",e.localFilesState.map((function(e){return e.file}))),t.abrupt("return");case 8:e.uploading=!0,i=u(e.$refs.file.files),t.prev=10,i.s();case 12:if((o=i.n()).done){t.next=28;break}return r=o.value,t.prev=14,t.next=17,e.$api.storage.upload({path:["noco",e.projectName,e.meta.title,e.column.title].join("/")},{files:r,json:"{}"});case 17:s=t.sent,(l=e.localState).push.apply(l,Object(a.a)(s)),t.next=26;break;case 21:return t.prev=21,t.t0=t.catch(14),e.$toast.error(t.t0.message||"Some internal error occurred").goAway(3e3),e.uploading=!1,t.abrupt("return");case 26:t.next=12;break;case 28:t.next=33;break;case 30:t.prev=30,t.t1=t.catch(10),i.e(t.t1);case 33:return t.prev=33,i.f(),t.finish(33);case 36:e.uploading=!1,e.$emit("input",JSON.stringify(e.localState)),e.$emit("update");case 39:case"end":return t.stop()}}),t,null,[[10,30,33,36],[14,21]])})))()},onOrderUpdate:function(){this.$emit("input",JSON.stringify(this.localState)),this.$emit("update")},removeItem:function(e){this.isPublicForm?(this.localFilesState.splice(e,1),this.$emit("input",this.localFilesState.map((function(e){return e.file})))):(this.localState.splice(e,1),this.$emit("input",JSON.stringify(this.localState))),this.$emit("update")},downloadItem:function(e){r.a.saveAs(e.url||e.data,e.title)},onArrowDown:function(e){this.showImage&&("37"==(e=e||window.event).keyCode?this.carousel=(this.carousel||this.localState.length)-1:"39"==e.keyCode?this.carousel=++this.carousel%this.localState.length:"27"==e.keyCode&&this.hideIfVisible())},onFileDrop:function(e){var t=this;return Object(i.a)(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return t.dragOver=!1,t.$refs.file.files=e.dataTransfer.files,n.next=4,t.onFileSelection();case 4:case"end":return n.stop()}}),n)})))()}}},p=(n(686),n(191)),f=n(210),v=n.n(f),h=n(354),b=n(372),g=n(217),y=n(1066),x=n(1058),w=n(688),_=n(617),C=n(674),k=n(510),O=n(984),S=n(380),M=n(262),j=n(1019),D=n(732),$=n(1067),L=n(596),T=n(717),R=n(597),A=n.n(R),P=n(256),E=Object(p.a)(m,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"main h-100",on:{dragover:function(t){t.preventDefault(),e.dragOver=!0},dragenter:function(t){t.preventDefault(),e.dragOver=!0},dragexit:function(t){e.dragOver=!1},dragleave:function(t){e.dragOver=!1},dragend:function(t){e.dragOver=!1},drop:function(t){return t.preventDefault(),t.stopPropagation(),e.onFileDrop.apply(null,arguments)}}},[n("div",{directives:[{name:"show",rawName:"v-show",value:(e.isForm||e._isUIAllowed("tableAttachment"))&&e.dragOver,expression:"(isForm || _isUIAllowed('tableAttachment')) && dragOver"}],staticClass:"drop-overlay"},[n("div",[n("v-icon",{attrs:{small:""}},[e._v("\n        mdi-cloud-upload-outline\n      ")]),e._v(" "),n("span",{staticClass:"caption font-weight-bold"},[e._v("Drop here")])],1)]),e._v(" "),n("div",{staticClass:"d-flex align-center img-container"},[n("div",{staticClass:"d-flex no-overflow"},e._l(e.isPublicForm?e.localFilesState:e.localState,(function(t,a){return n("div",{key:t.url||t.title,staticClass:"thumbnail align-center justify-center d-flex"},[n("v-tooltip",{attrs:{bottom:""},scopedSlots:e._u([{key:"activator",fn:function(i){var o=i.on;return[e.isImage(t.title,t.mimetype)?n("v-img",e._g({attrs:{"lazy-src":"https://via.placeholder.com/60.png?text=Loading...",alt:"#","max-height":"99px",contain:"",src:t.url||t.data},on:{click:function(n){return e.selectImage(t.url||t.data,a)}},scopedSlots:e._u([{key:"placeholder",fn:function(){return[n("v-skeleton-loader",{attrs:{type:"image",height:e.active?33:22,width:e.active?33:22}})]},proxy:!0}],null,!0)},o)):t.icon?n("v-icon",e._g({attrs:{size:e.active?33:22},on:{click:function(n){return e.openUrl(t.url||t.data,"_blank")}}},o),[e._v("\n              "+e._s(t.icon)+"\n            ")]):n("v-icon",e._g({attrs:{size:e.active?33:22},on:{click:function(n){return e.openUrl(t.url||t.data,"_blank")}}},o),[e._v("\n              mdi-file\n            ")])]}}],null,!0)},[e._v(" "),n("span",[e._v(e._s(t.title))])])],1)})),0),e._v(" "),e.isForm||e.active&&!e.isPublicGrid&&!e.isLocked?n("div",{staticClass:"add d-flex align-center justify-center px-1 nc-attachment-add",on:{click:e.addFile}},[e.uploading?n("v-icon",{staticClass:"nc-attachment-add-spinner",attrs:{small:"",color:"primary"}},[e._v("\n        mdi-loading mdi-spin\n      ")]):e.isForm?n("v-btn",{staticClass:"nc-attachment-add-btn",attrs:{outlined:"","x-small":"",color:"",text:""}},[n("v-icon",{attrs:{"x-small":"",color:""}},[e._v("\n          mdi-plus\n        ")]),e._v("\n        Attachment\n      ")],1):e._isUIAllowed("tableAttachment")?n("v-icon",{directives:[{name:"show",rawName:"v-show",value:e.active,expression:"active"}],attrs:{small:"",color:"primary nc-attachment-add-icon"}},[e._v("\n        mdi-plus\n      ")]):e._e()],1):e._e(),e._v(" "),n("v-spacer"),e._v(" "),n("v-icon",{staticClass:"expand-icon mr-1",attrs:{"x-small":"",color:"primary"},on:{click:function(t){t.stopPropagation(),e.dialog=!0}}},[e._v("\n      mdi-arrow-expand\n    ")]),e._v(" "),n("input",{ref:"file",staticClass:"d-none",attrs:{type:"file",multiple:""},on:{change:e.onFileSelection}})],1),e._v(" "),e.dialog?n("v-dialog",{attrs:{width:"800"},model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[n("v-card",{staticClass:"h-100 images-modal"},[n("v-card-text",{staticClass:"h-100 backgroundColor"},[n("div",{staticClass:"d-flex mx-2"},[!e.isForm&&!e._isUIAllowed("tableAttachment")||e.isPublicGrid||e.isLocked?e._e():n("v-btn",{staticClass:"my-4 ",attrs:{small:"",loading:e.uploading},on:{click:e.addFile}},[n("v-icon",{staticClass:"mr-2",attrs:{small:""}},[e._v("\n              mdi-link-variant\n            ")]),e._v(" "),n("span",{staticClass:"caption"},[e._v("Attach File")])],1)],1),e._v(" "),n("div",{staticClass:"d-flex flex-wrap h-100"},[n("v-container",{staticStyle:{"max-height":"calc(90vh - 80px)","overflow-y":"auto"},attrs:{fluid:""}},[n("draggable",{staticClass:"row",on:{update:e.onOrderUpdate},model:{value:e.localState,callback:function(t){e.localState=t},expression:"localState"}},e._l(e.isPublicForm?e.localFilesState:e.localState,(function(t,a){return n("v-col",{key:a,attrs:{cols:"4"}},[n("v-card",{staticClass:"modal-thumbnail-card align-center justify-center d-flex",staticStyle:{position:"relative"},attrs:{height:"200px"}},[!e._isUIAllowed("tableAttachment")||e.isPublicGrid||e.isLocked?e._e():n("v-icon",{staticClass:"remove-icon",attrs:{small:""},on:{click:function(t){return e.removeItem(a)}}},[e._v("\n                    mdi-close-circle\n                  ")]),e._v(" "),n("v-icon",{staticClass:"download-icon",attrs:{color:"grey"},on:{click:function(n){return n.stopPropagation(),e.downloadItem(t,a)}}},[e._v("\n                    mdi-download\n                  ")]),e._v(" "),n("div",{staticClass:"pa-2 d-flex align-center",staticStyle:{height:"200px"}},[e.isImage(t.title,t.mimetype)?n("img",{staticStyle:{"max-height":"100%","max-width":"100%"},attrs:{alt:"#",src:t.url||t.data},on:{click:function(n){return e.selectImage(t.url,a)}}}):t.icon?n("v-icon",{attrs:{size:"33"},on:{click:function(n){return e.openUrl(t.url||t.data,"_blank")}}},[e._v("\n                      "+e._s(t.icon)+"\n                    ")]):n("v-icon",{attrs:{size:"33"},on:{click:function(n){return e.openUrl(t.url||t.data,"_blank")}}},[e._v("\n                      mdi-file\n                    ")])],1)],1),e._v(" "),n("p",{staticClass:"caption mt-2 modal-title",attrs:{title:t.title}},[e._v("\n                  "+e._s(t.title)+"\n                ")])],1)})),1)],1)],1)])],1)],1):e._e(),e._v(" "),e.showImage?n("v-overlay",{attrs:{"z-index":"99999",opacity:".93"},model:{value:e.showImage,callback:function(t){e.showImage=t},expression:"showImage"}},[n("div",{directives:[{name:"click-outside",rawName:"v-click-outside",value:e.hideIfVisible,expression:"hideIfVisible"}],staticClass:"image-overlay-container"},[e.showImage&&e.selectedImage?[n("v-carousel",{attrs:{height:"calc(100vh - 100px)","hide-delimiters":""},model:{value:e.carousel,callback:function(t){e.carousel=t},expression:"carousel"}},e._l(e.isPublicForm?e.localFilesState:e.localState,(function(t,a){return n("v-carousel-item",{key:a},[n("div",{staticClass:"mx-auto d-flex flex-column justify-center align-center",staticStyle:{"min-height":"100px"}},[n("p",{staticClass:"title text-center"},[e._v("\n                "+e._s(t.title)+"\n                "),n("v-icon",{staticClass:"ml-3",attrs:{color:"grey"},on:{click:function(n){return n.stopPropagation(),e.downloadItem(t,a)}}},[e._v("\n                  mdi-download\n                ")])],1),e._v(" "),n("div",{staticClass:"d-flex align-center justify-center",staticStyle:{width:"90vh",height:"calc(100vh - 150px)"}},[e.isImage(t.title,t.mimetype)?n("img",{staticStyle:{"max-width":"90vh","max-height":"calc(100vh - 100px)"},attrs:{src:t.url||t.data}}):t.icon?n("v-icon",{attrs:{size:"55"}},[e._v("\n                  "+e._s(t.icon)+"\n                ")]):n("v-icon",{attrs:{size:"55"}},[e._v("\n                  mdi-file\n                ")])],1)])])})),1)]:e._e(),e._v(" "),e.showImage?n("v-sheet",{staticClass:"mx-auto align-center justify-center",staticStyle:{background:"transparent"},attrs:{"max-width":"90vw",height:"80px"}},[n("v-slide-group",{attrs:{multiple:"","show-arrows":""}},e._l(e.isPublicForm?e.localFilesState:e.localState,(function(t,a){return n("v-slide-item",{key:a},[n("v-card",{key:a,staticClass:"ma-2 pa-2 d-flex align-center justify-center overlay-thumbnail",class:{active:e.carousel===a},attrs:{width:"48",height:"48"},on:{click:function(t){e.carousel=a}}},[e.isImage(t.title,t.mimetype)?n("img",{staticStyle:{"max-width":"100%","max-height":"100%"},attrs:{src:t.url||t.data}}):t.icon?n("v-icon",{attrs:{size:"48"}},[e._v("\n                "+e._s(t.icon)+"\n              ")]):n("v-icon",{attrs:{size:"48"}},[e._v("\n                mdi-file\n              ")])],1)],1)})),1)],1):e._e(),e._v(" "),n("v-icon",{staticClass:"close-icon",attrs:{"x-large":""},on:{click:function(t){e.showImage=!1}}},[e._v("\n        mdi-close-circle\n      ")])],2)]):e._e()],1)}),[],!1,null,"4e410d1d",null);t.default=E.exports;v()(E,{VBtn:h.a,VCard:b.a,VCardText:g.b,VCarousel:y.a,VCarouselItem:x.a,VCol:w.a,VContainer:_.a,VDialog:C.a,VIcon:k.a,VImg:O.a,VOverlay:S.a,VSheet:M.a,VSkeletonLoader:j.a,VSlideGroup:D.b,VSlideItem:$.a,VSpacer:L.a,VTooltip:T.a}),A()(E,{ClickOutside:P.a})},108:function(e,t,n){"use strict";n.r(t);n(53),n(54),n(52),n(55),n(56);var a=n(36);n(182);function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}var o={name:"RatingCell",props:{column:Object,value:[String,Number],readOnly:Boolean},computed:{fullIcon:function(){return this.ratingMeta&&this.ratingMeta.icon&&this.ratingMeta.icon.full||"mdi-star"},emptyIcon:function(){return this.ratingMeta&&this.ratingMeta.icon&&this.ratingMeta.icon.empty||"mdi-star-outline"},localState:{get:function(){return this.value},set:function(e){this.$emit("input",e)}},ratingMeta:function(){return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){Object(a.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({icon:{full:"mdi-star",empty:"mdi-star-outline"},color:"#fcb401",max:5},this.column&&this.column.meta?this.column.meta:{})}}},r=n(191),l=n(210),s=n.n(l),c=n(510),u=n(1059),d=Object(r.a)(o,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"d-100 h-100",class:{"nc-cell-hover-show":0==e.localState||!e.localState}},[n("v-rating",{attrs:{length:e.ratingMeta.max,dense:"","x-small":"",readonly:e.readOnly,clearable:""},scopedSlots:e._u([{key:"item",fn:function(t){var a=t.isFilled,i=t.click;return[a?n("v-icon",{attrs:{size:15,color:e.ratingMeta.color},on:{click:i}},[e._v("\n        "+e._s(e.fullIcon)+"\n      ")]):n("v-icon",{staticClass:"nc-cell-hover-show",attrs:{color:e.ratingMeta.color,size:15},on:{click:i}},[e._v("\n        "+e._s(e.emptyIcon)+"\n      ")])]}}]),model:{value:e.localState,callback:function(t){e.localState=t},expression:"localState"}})],1)}),[],!1,null,"41a16896",null);t.default=d.exports;s()(d,{VIcon:c.a,VRating:u.a})},109:function(e,t,n){"use strict";n.r(t);var a=n(229),i=(n(230),n(182),{name:"ListChildItemsModal",components:{ListChildItems:n(99).default},props:{type:String,readOnly:Boolean,localState:Array,isNew:Boolean,password:String,value:Boolean,title:{type:String,default:"Link Record"},queryParams:{type:Object,default:function(){return{}}},primaryKey:String,primaryCol:String,meta:Object,parentMeta:Object,size:Number,api:[Object,Function],mm:[Object,Boolean],isPublic:Boolean,rowId:[String,Number],column:Object},data:function(){return{data:null,page:1}},computed:{show:{set:function(e){this.$emit("input",e)},get:function(){return this.value}}},mounted:function(){},methods:{loadData:function(){var e=this;return Object(a.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.$refs&&e.$refs.child&&e.$refs.child.loadData();case 1:case"end":return t.stop()}}),t)})))()}}}),o=(n(925),n(191)),r=n(210),l=n.n(r),s=n(674),c=n(510),u=Object(o.a)(i,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-dialog",{attrs:{width:"600","content-class":"dialog"},model:{value:e.show,callback:function(t){e.show=t},expression:"show"}},[n("v-icon",{staticClass:"close-icon",attrs:{small:""},on:{click:function(t){return e.$emit("input",!1)}}},[e._v("\n    mdi-close\n  ")]),e._v(" "),e.show?n("list-child-items",e._g(e._b({ref:"child",attrs:{type:e.type,"row-id":e.rowId,"local-state":e.localState,"is-new":e.isNew,size:10,meta:e.meta,password:e.password,"parent-meta":e.parentMeta,"primary-col":e.primaryCol,"primary-key":e.primaryKey,api:e.api,"query-params":e.queryParams,"read-only":e.readOnly,"is-public":e.isPublic,column:e.column}},"list-child-items",e.$attrs,!1),e.$listeners)):e._e()],1)}),[],!1,null,"2536c685",null);t.default=u.exports;l()(u,{VDialog:s.a,VIcon:c.a})},110:function(e,t,n){"use strict";n.r(t);var a=n(295),i=n.n(a),o={name:"DateCell",props:["value"],computed:{date:function(){return(/^\d+$/.test(this.value)?i()(+this.value):i()(this.value)).format("YYYY-MM-DD")}}},r=n(191),l=Object(r.a)(o,(function(){var e=this.$createElement;return(this._self._c||e)("span",[this._v(this._s(this.date))])}),[],!1,null,"45c4f78c",null);t.default=l.exports},111:function(e,t,n){"use strict";n.r(t);var a=n(295),i=n.n(a),o={name:"DateTimeCell",props:["value"],computed:{dateTime:function(){return this.value?(/^\d+$/.test(this.value)?i()(+this.value):i()(this.value)).format("YYYY-MM-DD HH:mm"):this.value}}},r=n(191),l=Object(r.a)(o,(function(){var e=this.$createElement;return(this._self._c||e)("span",[this._v(this._s(this.dateTime))])}),[],!1,null,"161887ce",null);t.default=l.exports},112:function(e,t,n){"use strict";n.r(t);n(257);var a={name:"TimeCell",props:["value"],computed:{time:function(){return"string"==typeof this.value?this.value.replace(/(\d)T(?=\d)/,"$1 "):this.value}}},i=n(191),o=Object(i.a)(a,(function(){var e=this.$createElement;return(this._self._c||e)("span",[this._v(this._s(this.time))])}),[],!1,null,"0be9ee30",null);t.default=o.exports},113:function(e,t,n){"use strict";n.r(t);var a={name:"JsonCell",props:["value"]},i=n(191),o=Object(i.a)(a,(function(){var e=this.$createElement;return(this._self._c||e)("pre",{staticClass:"text-left caption"},[this._v(this._s(this.value))])}),[],!1,null,"2d834cb8",null);t.default=o.exports},114:function(e,t,n){"use strict";n.r(t);var a=n(301),i={name:"UrlCell",props:["value"],computed:{isValid:function(){return this.value&&Object(a.e)(this.value)}}},o=n(191),r=Object(o.a)(i,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.isValid?n("a",{attrs:{href:e.value,target:"_blank"}},[e._v(e._s(e.value))]):n("span",[e._v(e._s(e.value))])}),[],!1,null,"e4b7e476",null);t.default=r.exports},115:function(e,t,n){"use strict";n.r(t);var a={name:"BooleanCell",props:["value"],computed:{localState:{get:function(){return this.value}}}},i=n(191),o=Object(i.a)(a,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"d-flex align-center "},[n("input",{directives:[{name:"model",rawName:"v-model",value:e.localState,expression:"localState"}],attrs:{type:"checkbox",disabled:!0},domProps:{checked:Array.isArray(e.localState)?e._i(e.localState,null)>-1:e.localState},on:{change:function(t){var n=e.localState,a=t.target,i=!!a.checked;if(Array.isArray(n)){var o=e._i(n,null);a.checked?o<0&&(e.localState=n.concat([null])):o>-1&&(e.localState=n.slice(0,o).concat(n.slice(o+1)))}else e.localState=i}}})])}),[],!1,null,"28a6a331",null);t.default=o.exports},116:function(e,t,n){"use strict";n.r(t);var a=n(301),i={name:"EmailCell",props:["value"],computed:{isEmail:function(){return Object(a.d)(this.value||"")}}},o=n(191),r=Object(o.a)(i,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.isEmail?n("a",{attrs:{href:"mailto:"+e.value,target:"_blank"}},[e._v(e._s(e.value))]):n("span",[e._v(e._s(e.value))])}),[],!1,null,"51d6efd8",null);t.default=r.exports},117:function(e,t,n){"use strict";n.r(t);n(53),n(54),n(52),n(55),n(56);var a=n(36);n(182);function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}var o={name:"CurrencyCell",props:{column:Object,value:[String,Number]},computed:{currency:function(){try{return isNaN(this.value)?this.value:new Intl.NumberFormat(this.currencyMeta.currency_locale||"en-US",{style:"currency",currency:this.currencyMeta.currency_code||"USD"}).format(this.value)}catch(e){return this.value}},currencyMeta:function(){return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){Object(a.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({currency_locale:"en-US",currency_code:"USD"},this.column&&this.column.meta?this.column.meta:{})}}},r=n(191),l=Object(r.a)(o,(function(){var e=this.$createElement,t=this._self._c||e;return this.value?t("a",[this._v(this._s(this.currency))]):t("span")}),[],!1,null,"674d5e4c",null);t.default=l.exports},118:function(e,t,n){"use strict";n.r(t);n(182);var a=n(508),i={name:"DurationCell",props:{column:Object,value:[String,Number]},data:function(){return{showWarningMessage:!1,localValue:null}},computed:{durationPlaceholder:function(){var e,t;return a.c[(null===(e=this.column)||void 0===e||null===(t=e.meta)||void 0===t?void 0:t.duration)||0].title}},watch:{"column.meta.duration":function(e,t){t!==e&&(this.localValue=Object(a.b)(this.value,e))},value:function(e,t){var n,i;this.localValue=Object(a.b)(e===t||e||0===e?e:t,(null===(n=this.column)||void 0===n||null===(i=n.meta)||void 0===i?void 0:i.duration)||0)}},created:function(){var e,t;this.localValue=Object(a.b)(this.value,(null===(e=this.column)||void 0===e||null===(t=e.meta)||void 0===t?void 0:t.duration)||0)}},o=n(191),r=Object(o.a)(i,(function(){var e=this,t=e.$createElement;return(e._self._c||t)("input",{directives:[{name:"model",rawName:"v-model",value:e.localValue,expression:"localValue"}],attrs:{placeholder:e.durationPlaceholder,readonly:""},domProps:{value:e.localValue},on:{input:function(t){t.target.composing||(e.localValue=t.target.value)}}})}),[],!1,null,"1e569891",null);t.default=r.exports},119:function(e,t,n){"use strict";n.r(t);n(53),n(54),n(52),n(55),n(56);var a=n(36),i=(n(190),n(201),n(214),n(942)),o=n.n(i),r=["AED","AFN","ALL","AMD","ANG","AOA","ARS","AUD","AWG","AZN","BAM","BBD","BDT","BGN","BHD","BIF","BMD","BND","BOB","BOV","BRL","BSD","BTN","BWP","BYR","BZD","CAD","CDF","CHE","CHF","CHW","CLF","CLP","CNY","COP","COU","CRC","CUP","CVE","CYP","CZK","DJF","DKK","DOP","DZD","EEK","EGP","ERN","ETB","EUR","FJD","FKP","GBP","GEL","GHC","GIP","GMD","GNF","GTQ","GYD","HKD","HNL","HRK","HTG","HUF","IDR","ILS","INR","IQD","IRR","ISK","JMD","JOD","JPY","KES","KGS","KHR","KMF","KPW","KRW","KWD","KYD","KZT","LAK","LBP","LKR","LRD","LSL","LTL","LVL","LYD","MAD","MDL","MGA","MKD","MMK","MNT","MOP","MRO","MTL","MUR","MVR","MWK","MXN","MXV","MYR","MZN","NAD","NGN","NIO","NOK","NPR","NZD","OMR","PAB","PEN","PGK","PHP","PKR","PLN","PYG","QAR","ROL","RON","RSD","RUB","RWF","SAR","SBD","SCR","SDD","SEK","SGD","SHP","SIT","SKK","SLL","SOS","SRD","STD","SYP","SZL","THB","TJS","TMM","TND","TOP","TRY","TTD","TWD","TZS","UAH","UGX","USD","USN","USS","UYU","UZS","VEB","VND","VUV","WST","XAF","XAG","XAU","XBA","XBB","XBC","XBD","XCD","XDR","XFO","XFU","XOF","XPD","XPF","XPT","XTS","XXX","YER","ZAR","ZMK","ZWD"];
/**
 * @copyright Copyright (c) 2021, Xgene Cloud Ltd
 *
 * @author Mert Ersoy <mertmit99@gmail.com>
 *
 * @license GNU AGPL version 3 or any later version
 *
 * This program is free software: you can redistribute it and/or modify
 * it under the terms of the GNU Affero General Public License as
 * published by the Free Software Foundation, either version 3 of the
 * License, or (at your option) any later version.
 *
 * This program is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 * GNU Affero General Public License for more details.
 *
 * You should have received a copy of the GNU Affero General Public License
 * along with this program. If not, see <http://www.gnu.org/licenses/>.
 *
 */
function l(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function s(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?l(Object(n),!0).forEach((function(t){Object(a.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var c={name:"CurrencyOptions",props:["column","meta","value"],data:function(){return{colMeta:{currency_locale:"en-US",currency_code:"USD"},currencyList:r,currencyLocaleList:o.a.all.filter((function(e){try{return Intl.NumberFormat.supportedLocalesOf(e.tag).length>0}catch(e){return!1}})).map((function(e){return{text:e.name+" ("+e.tag+")",value:e.tag}})),isValidCurrencyLocale:function(e){return function(e){try{return Intl.NumberFormat.supportedLocalesOf(e).length>0}catch(e){return!1}}(e)||"Invalid locale"},isValidCurrencyCode:function(e){return t=e,r.includes(t)||"Invalid Currency Code";var t}}},computed:{isMoney:function(){return"money"===this.column.dt},isPG:function(){return["pg"].includes(this.$store.getters["project/GtrClientType"])},message:function(){return this.isMoney&&this.isPG?"PostgreSQL 'money' type has own currency settings":""}},watch:{value:function(){this.colMeta=this.value||{}},colMeta:function(e){this.$emit("input",e)}},created:function(){this.colMeta=this.value?s({},this.value):s({},this.colMeta)}},u=(n(915),n(191)),d=n(210),m=n.n(d),p=n(605),f=n(688),v=n(904),h=n(717),b=Object(u.a)(c,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-tooltip",{attrs:{top:"",disabled:!(e.isMoney&&e.isPG)},scopedSlots:e._u([{key:"activator",fn:function(t){var a=t.on,i=t.attrs;return[n("v-row",e._g(e._b({staticClass:"currency-wrapper"},"v-row",i,!1),a),[n("v-col",{attrs:{cols:"6"}},[n("v-autocomplete",{staticClass:"caption",attrs:{dense:"",label:"Currency Locale",rules:[e.isValidCurrencyLocale],items:e.currencyLocaleList,outlined:"","hide-details":"",disabled:e.isMoney&&e.isPG},model:{value:e.colMeta.currency_locale,callback:function(t){e.$set(e.colMeta,"currency_locale",t)},expression:"colMeta.currency_locale"}})],1),e._v(" "),n("v-col",{attrs:{cols:"6"}},[n("v-autocomplete",{staticClass:"caption",attrs:{dense:"",label:"Currency Code",rules:[e.isValidCurrencyCode],items:e.currencyList,outlined:"","hide-details":"",disabled:e.isMoney&&e.isPG},model:{value:e.colMeta.currency_code,callback:function(t){e.$set(e.colMeta,"currency_code",t)},expression:"colMeta.currency_code"}})],1)],1)]}}])},[e._v(" "),n("span",[e._v(e._s(e.message))])])}),[],!1,null,"2e3e5e9b",null);t.default=b.exports;m()(b,{VAutocomplete:p.a,VCol:f.a,VRow:v.a,VTooltip:h.a})},120:function(e,t,n){"use strict";n.r(t);var a=n(110),i=n(111),o=n(112),r=n(113),l=n(114),s=n(518),c=n(105),u=n(106),d=n(107),m=n(115),p=n(116),f=n(108),v=n(117),h=n(118),b={name:"TableCell",components:{RatingCell:f.default,EmailCell:p.default,TimeCell:o.default,DateTimeCell:i.default,DateCell:a.default,JsonCell:r.default,UrlCell:l.default,EditableAttachmentCell:d.default,EnumCell:u.default,SetListCell:c.default,BooleanCell:m.default,CurrencyCell:v.default,DurationCell:h.default},mixins:[s.a],props:["value","dbAlias","isLocked","selected","column"],computed:{title:function(){return"string"==typeof this.value?this.value:""}}},g=(n(743),n(191)),y=Object(g.a)(b,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.isAttachment?n("editable-attachment-cell",{attrs:{"is-locked":e.isLocked,"db-alias":e.dbAlias,value:e.value,column:e.column},on:{click:function(t){return t.stopPropagation(),e.$emit("enableedit")}}}):e.isSet?n("set-list-cell",{attrs:{value:e.value,column:e.column},on:{click:function(t){return t.stopPropagation(),e.$emit("enableedit")}}}):e.isEnum?n("enum-cell",{attrs:{value:e.value,column:e.column},on:{click:function(t){return t.stopPropagation(),e.$emit("enableedit")}}}):e.isURL?n("url-cell",{attrs:{value:e.value}}):e.isEmail?n("email-cell",{attrs:{value:e.value}}):e.isJSON?n("json-cell",{attrs:{value:e.value}}):e.isDate?n("date-cell",{attrs:{value:e.value}}):e.isDateTime?n("date-time-cell",{attrs:{value:e.value}}):e.isTime?n("time-cell",{attrs:{value:e.value}}):e.isBoolean?n("boolean-cell",{attrs:{value:e.value,"read-only":""}}):e.isDuration?n("duration-cell",{attrs:{column:e.column,value:e.value,"read-only":""}}):e.isRating?n("rating-cell",{attrs:{value:e.value,"read-only":""}}):e.isCurrency?n("currency-cell",{attrs:{value:e.value,column:e.column}}):n("span",{class:{"long-text-cell":e.isTextArea},attrs:{title:e.title}},[e._v(e._s(e.value))])}),[],!1,null,"624efb6f",null);t.default=y.exports},121:function(e,t,n){"use strict";n.r(t);n(53),n(54),n(55),n(56);var a=n(229),i=n(36),o=(n(230),n(201),n(52),n(207),n(242));function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}var l={name:"RollupOptions",props:["nodes","column","meta","isSQLite","alias"],data:function(){return{rollup:{},loadingColumns:!1,tables:[],relationNames:{mm:"Many To Many",hm:"Has Many"},aggrFunctionsList:[{text:"count",value:"count"},{text:"min",value:"min"},{text:"max",value:"max"},{text:"avg",value:"avg"},{text:"min",value:"min"},{text:"sum",value:"sum"},{text:"countDistinct",value:"countDistinct"},{text:"sumDistinct",value:"sumDistinct"},{text:"avgDistinct",value:"avgDistinct"}]}},computed:{refTables:function(){var e=this;if(!this.tables||!this.tables.length)return[];var t=this.meta.columns.filter((function(e){return e.uidt===o.f.LinkToAnotherRecord&&"bt"!==e.colOptions.type&&!e.system})).map((function(t){return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){Object(i.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({col:t.colOptions,column:t},e.tables.find((function(e){return e.id===t.colOptions.fk_related_model_id})))}));return t},columnList:function(){return(this.rollup&&this.rollup.table&&this.$store.state.meta.metas&&this.$store.state.meta.metas[this.rollup.table.table_name]&&this.$store.state.meta.metas[this.rollup.table.table_name].columns||[]).filter((function(e){return!Object(o.j)(e.uidt)&&!Object(o.i)(e)}))}},mounted:function(){var e=this;return Object(a.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.loadTablesList();case 2:case"end":return t.stop()}}),t)})))()},methods:{loadTablesList:function(){var e=this;return Object(a.a)(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$api.dbTable.list(e.$store.state.project.projectId,e.$store.state.project.project.bases[0].id);case 2:n=t.sent,e.tables=n.list;case 4:case"end":return t.stop()}}),t)})))()},onTableChange:function(){var e=this;return Object(a.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.loadingColumns=!0,!e.rollup.table){t.next=9;break}return t.prev=2,t.next=5,e.$store.dispatch("meta/ActLoadMeta",{dbAlias:e.nodes.dbAlias,env:e.nodes.env,id:e.rollup.table.id});case 5:t.next=9;break;case 7:t.prev=7,t.t0=t.catch(2);case 9:e.loadingColumns=!1;case 10:case"end":return t.stop()}}),t,null,[[2,7]])})))()},save:function(){var e=this;return Object(a.a)(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,n={title:e.alias,fk_relation_column_id:e.rollup.table.col.fk_column_id,fk_rollup_column_id:e.rollup.column.id,uidt:o.f.Rollup,rollup_function:e.rollup.fn},t.next=4,e.$api.dbTableColumn.create(e.meta.id,n);case 4:return t.abrupt("return",e.$emit("saved",e.alias));case 7:t.prev=7,t.t0=t.catch(0),e.$toast.error(t.t0.message).goAway(3e3);case 10:case"end":return t.stop()}}),t,null,[[0,7]])})))()}}},s=n(191),c=n(210),u=n.n(c),d=n(605),m=n(688),p=n(617),f=n(904),v=Object(s.a)(l,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("v-container",{staticClass:"wrapper",attrs:{fluid:""}},[n("v-row",[n("v-col",{attrs:{cols:"6"}},[n("v-autocomplete",{ref:"input",staticClass:"caption nc-rollup-table",attrs:{outlined:"","hide-details":"auto",label:e.$t("labels.childTable"),"full-width":!1,items:e.refTables,"item-text":"title","item-value":function(e){return e},rules:[function(e){return!!e||"Required"}],dense:""},scopedSlots:e._u([{key:"item",fn:function(t){var a=t.item;return[n("span",{staticClass:"caption"},[n("span",{staticClass:"font-weight-bold"},[e._v(e._s(a.column.title))]),e._v(" "),n("small",[e._v("("+e._s(e.relationNames[a.col.type])+" "+e._s(a.title||a.table_name)+")\n            ")])])]}}]),model:{value:e.rollup.table,callback:function(t){e.$set(e.rollup,"table",t)},expression:"rollup.table"}})],1),e._v(" "),n("v-col",{attrs:{cols:"6"}},[n("v-autocomplete",{ref:"input",staticClass:"caption  nc-rollup-column",attrs:{outlined:"","hide-details":"auto",label:e.$t("labels.childColumn"),"full-width":!1,items:e.columnList,"item-text":"title",dense:"",loading:e.loadingColumns,"item-value":function(e){return e},rules:[function(e){return!!e||"Required"}]},model:{value:e.rollup.column,callback:function(t){e.$set(e.rollup,"column",t)},expression:"rollup.column"}})],1),e._v(" "),n("v-col",{attrs:{cols:"12"}},[n("v-autocomplete",{ref:"aggrInput",staticClass:"caption  nc-rollup-fn",attrs:{outlined:"","hide-details":"auto",label:"Aggregate function","full-width":!1,items:e.aggrFunctionsList,dense:"",loading:e.loadingColumns,rules:[function(e){return!!e||"Required"}]},model:{value:e.rollup.fn,callback:function(t){e.$set(e.rollup,"fn",t)},expression:"rollup.fn"}})],1)],1)],1)],1)}),[],!1,null,"137dbd40",null);t.default=v.exports;u()(v,{VAutocomplete:d.a,VCol:m.a,VContainer:p.a,VRow:f.a})},122:function(e,t,n){"use strict";n.r(t);n(53),n(54),n(55),n(56);var a=n(229),i=n(36),o=(n(230),n(201),n(52),n(207),n(242));function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}var l={name:"LookupOptions",props:["nodes","column","meta","isSQLite","alias"],data:function(){return{lookup:{},loadingColumns:!1,relationNames:{mm:"Many To Many",hm:"Has Many",bt:"Belongs To"},tables:[]}},computed:{refTables:function(){var e=this;if(!this.tables||!this.tables.length)return[];var t=this.meta.columns.filter((function(e){return e.uidt===o.f.LinkToAnotherRecord&&!e.system})).map((function(t){return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){Object(i.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({col:t.colOptions,column:t},e.tables.find((function(e){return e.id===t.colOptions.fk_related_model_id})))}));return t},columnList:function(){return(this.lookup&&this.lookup.table&&this.$store.state.meta.metas&&this.$store.state.meta.metas[this.lookup.table.id]&&this.$store.state.meta.metas[this.lookup.table.id].columns||[]).filter((function(e){return!Object(o.i)(e)}))}},mounted:function(){var e=this;return Object(a.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.loadTablesList();case 2:case"end":return t.stop()}}),t)})))()},methods:{loadTablesList:function(){var e=this;return Object(a.a)(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$api.dbTable.list(e.$store.state.project.projectId,e.$store.state.project.project.bases[0].id);case 2:n=t.sent,e.tables=n.list;case 4:case"end":return t.stop()}}),t)})))()},checkLookupExist:function(e){var t=this;return this.lookup.table&&(this.meta.v||[]).every((function(n){return!(n.lk&&n.lk.type===t.lookup.table.type&&n.lk.ltn===t.lookup.table.ltn&&n.lk.lcn===e.lcn)}))||"Lookup already exist"},onTableChange:function(){var e=this;return Object(a.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.loadingColumns=!0,!e.lookup.table){t.next=9;break}return t.prev=2,t.next=5,e.$store.dispatch("meta/ActLoadMeta",{dbAlias:e.nodes.dbAlias,env:e.nodes.env,id:e.lookup.table.id});case 5:t.next=9;break;case 7:t.prev=7,t.t0=t.catch(2);case 9:e.loadingColumns=!1;case 10:case"end":return t.stop()}}),t,null,[[2,7]])})))()},save:function(){var e=this;return Object(a.a)(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,n={title:e.alias,fk_relation_column_id:e.lookup.table.col.fk_column_id,fk_lookup_column_id:e.lookup.column.id,uidt:o.f.Lookup},t.next=4,e.$api.dbTableColumn.create(e.meta.id,n);case 4:return t.abrupt("return",e.$emit("saved",e.alias));case 7:t.prev=7,t.t0=t.catch(0),console.log(t.t0),e.$toast.error(t.t0.message).goAway(3e3);case 11:case"end":return t.stop()}}),t,null,[[0,7]])})))()}}},s=n(191),c=n(210),u=n.n(c),d=n(605),m=n(688),p=n(617),f=n(904),v=Object(s.a)(l,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("v-container",{staticClass:"wrapper",attrs:{fluid:""}},[n("v-row",[n("v-col",{attrs:{cols:"6"}},[n("v-autocomplete",{ref:"input",staticClass:"caption",attrs:{outlined:"","hide-details":"auto",label:e.$t("labels.childTable"),"full-width":!1,items:e.refTables,"item-text":"title","item-value":function(e){return e},rules:[function(e){return!!e||"Required"}],dense:""},scopedSlots:e._u([{key:"item",fn:function(t){var a=t.item;return[n("span",{staticClass:"caption"},[n("span",{staticClass:"font-weight-bold"},[e._v(e._s(a.column.title))]),e._v(" "),n("small",[e._v("("+e._s(e.relationNames[a.col.type])+" "+e._s(a.title||a.table_name)+")\n            ")])])]}}]),model:{value:e.lookup.table,callback:function(t){e.$set(e.lookup,"table",t)},expression:"lookup.table"}})],1),e._v(" "),n("v-col",{attrs:{cols:"6"}},[n("v-autocomplete",{ref:"input",staticClass:"caption",attrs:{outlined:"","hide-details":"auto",label:e.$t("labels.childColumn"),"full-width":!1,items:e.columnList,"item-text":"title",dense:"",loading:e.loadingColumns,"item-value":function(e){return e},rules:[function(e){return!!e||"Required"},e.checkLookupExist]},model:{value:e.lookup.column,callback:function(t){e.$set(e.lookup,"column",t)},expression:"lookup.column"}})],1)],1)],1)],1)}),[],!1,null,"9a2c3426",null);t.default=v.exports;u()(v,{VAutocomplete:d.a,VCol:m.a,VContainer:p.a,VRow:f.a})},123:function(e,t,n){"use strict";n.r(t);n(201),n(257),n(228),n(370);var a=n(365),i={name:"CustomSelectOptions",props:["value"],data:function(){return{localState:[]}},computed:{colors:function(){return this.$store.state.settings.darkTheme?a.a.dark:a.a.light}},watch:{localState:{handler:function(e){this.$emit("input",e.map((function(e){return"'".concat(e.replace(/'/g,"\\'"),"'")})).join(","))},deep:!0},value:function(){this.syncState()}},mounted:function(){this.syncState()},methods:{syncState:function(){this.localState=(this.value||"").split(",").map((function(e){return e.replace(/\\'/g,"'").replace(/^'|'$/g,"")}))},listenForComma:function(e,t){var n=t.trim();n.endsWith(",")?this.localState.push(""):this.localState[e]=n}}},o=(n(905),n(191)),r=n(210),l=n.n(r),s=n(354),c=n(617),u=n(510),d=n(305),m=Object(o.a)(i,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-container",{staticClass:"wrapper",attrs:{fluid:""}},[e._l(e.localState,(function(t,a){return n("div",{key:a,staticClass:"d-flex py-1"},[n("v-icon",{staticClass:"mr-2",attrs:{color:e.colors[a%e.colors.length]},on:{click:function(t){return e.localState.splice(a,1)}}},[e._v("\n      mdi-arrow-down-drop-circle\n    ")]),e._v(" "),n("v-text-field",{staticClass:"caption",attrs:{autofocus:!0,dense:"",outlined:""},on:{input:function(t){return e.listenForComma(a,t)}},model:{value:e.localState[a],callback:function(t){e.$set(e.localState,a,t)},expression:"localState[i]"}}),e._v(" "),n("v-icon",{staticClass:"ml-2",attrs:{color:"error lighten-2",size:"13"},on:{click:function(t){return e.localState.splice(a,1)}}},[e._v("\n      mdi-close\n    ")])],1)})),e._v(" "),n("v-btn",{staticClass:"d-100 caption mt-2",attrs:{"x-small":"",color:"primary",outlined:""},on:{click:function(t){return e.localState.push("")}}},[n("v-icon",{staticClass:"mr-2",attrs:{"x-small":"",outlined:"",color:"primary"}},[e._v("\n      mdi-plus\n    ")]),e._v("\n    Add option\n  ")],1)],2)}),[],!1,null,"07ac66a9",null);t.default=m.exports;l()(m,{VBtn:s.a,VContainer:c.a,VIcon:u.a,VTextField:d.a})},124:function(e,t,n){"use strict";n.r(t);n(53),n(54),n(55),n(56);var a=n(36),i=n(229);n(52),n(201),n(207),n(230);function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function r(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){Object(a.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var l={name:"RelationOptions",props:["nodes","column","isSQLite","isMSSQL","alias"],data:function(){return{refTables:[],refColumns:[],relation:{},isRefTablesLoading:!1,isRefColumnsLoading:!1}},computed:{onUpdateDeleteOptions:function(){return this.isMSSQL?["NO ACTION"]:["NO ACTION","CASCADE","RESTRICT","SET NULL","SET DEFAULT"]}},watch:{"column.column_name":function(e){this.$set(this.relation,"childColumn",e)},isSQLite:function(e){this.$set(this.relation,"type",e?"virtual":"real")}},created:function(){var e=this;return Object(i.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.loadTablesList();case 2:e.relation={childColumn:e.column.column_name,childTable:e.nodes.table_name,parentTable:e.column.rtn||"",parentColumn:e.column.rcn||"",onDelete:"NO ACTION",onUpdate:"NO ACTION",updateRelation:!!e.column.rtn,type:e.isSQLite?"virtual":"real"};case 3:case"end":return t.stop()}}),t)})))()},mounted:function(){this.$set(this.relation,"type",this.isSqlite?"virtual":"real")},methods:{loadColumnList:function(){var e=this;return Object(i.a)(regeneratorRuntime.mark((function t(){var n,a,i;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.relation.parentTable){t.next=2;break}return t.abrupt("return");case 2:return e.isRefColumnsLoading=!0,t.next=5,e.$store.dispatch("sqlMgr/ActSqlOp",[{env:e.nodes.env,dbAlias:e.nodes.dbAlias},"columnList",{table_name:e.relation.parentTable}]);case 5:n=t.sent,a=n.data.list,e.refColumns=JSON.parse(JSON.stringify(a)),e.relation.updateRelation&&!e.relationColumnChanged?(e.relation.parentColumn=e.column.rcn,e.relationColumnChanged=!0):(i=e.refColumns.filter((function(e){return e.pk})),e.relation.parentColumn=(i[0]||{}).column_name||""),e.onColumnSelect(),e.isRefColumnsLoading=!1;case 11:case"end":return t.stop()}}),t)})))()},loadTablesList:function(){var e=this;return Object(i.a)(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.isRefTablesLoading=!0,t.next=3,e.$store.dispatch("sqlMgr/ActSqlOp",[{env:e.nodes.env,dbAlias:e.nodes.dbAlias},"tableList"]);case 3:n=t.sent,e.refTables=n.data.list.map((function(e){return{table_name:e.table_name,title:e.title}})),e.isRefTablesLoading=!1;case 6:case"end":return t.stop()}}),t)})))()},saveRelation:function(){var e=this;return Object(i.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$store.dispatch("sqlMgr/ActSqlOpPlus",[{env:e.nodes.env,dbAlias:e.nodes.dbAlias},"real"!==e.relation.type||e.isSQLite?"xcVirtualRelationCreate":"relationCreate",r({alias:e.alias},e.relation)]);case 2:case"end":return t.stop()}}),t)})))()},onColumnSelect:function(){var e=this,t=this.refColumns.find((function(t){return e.relation.parentColumn===t.column_name}));this.$emit("onColumnSelect",t)}}},s=(n(907),n(191)),c=n(210),u=n.n(c),d=n(605),m=n(941),p=n(688),f=n(617),v=n(904),h=Object(s.a)(l,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-container",{staticClass:"wrapper",attrs:{fluid:""}},[n("v-row",[n("v-col",{attrs:{cols:"6"}},[n("v-autocomplete",{staticClass:"caption",attrs:{rules:[function(e){return!!e||"Reference Table required"}],outlined:"","hide-details":"",loading:e.isRefTablesLoading,label:"Reference Table","full-width":!1,items:e.refTables,"item-text":"title","item-value":"table_name",required:"",dense:""},on:{change:e.loadColumnList},model:{value:e.relation.parentTable,callback:function(t){e.$set(e.relation,"parentTable",t)},expression:"relation.parentTable"}})],1),e._v(" "),n("v-col",{attrs:{cols:"6"}},[n("v-autocomplete",{ref:"parentColumnRef",staticClass:"caption",attrs:{rules:[function(e){return!!e||"Reference Column required"}],outlined:"","hide-details":"",loading:e.isRefColumnsLoading,label:"Reference Column","full-width":!1,items:e.refColumns,"item-text":"title","item-value":"column_name",required:"",dense:""},on:{change:e.onColumnSelect},model:{value:e.relation.parentColumn,callback:function(t){e.$set(e.relation,"parentColumn",t)},expression:"relation.parentColumn"}})],1)],1),e._v(" "),n("v-row",[n("v-col",{attrs:{cols:"6"}},[n("v-autocomplete",{staticClass:"caption",attrs:{outlined:"","hide-details":"",label:"On Update","full-width":!1,items:e.onUpdateDeleteOptions,required:"",dense:"",disabled:"real"!==e.relation.type},model:{value:e.relation.onUpdate,callback:function(t){e.$set(e.relation,"onUpdate",t)},expression:"relation.onUpdate"}})],1),e._v(" "),n("v-col",{attrs:{cols:"6"}},[n("v-autocomplete",{staticClass:"caption",attrs:{outlined:"","hide-details":"",label:"On Delete","full-width":!1,items:e.onUpdateDeleteOptions,required:"",dense:"",disabled:"real"!==e.relation.type},model:{value:e.relation.onDelete,callback:function(t){e.$set(e.relation,"onDelete",t)},expression:"relation.onDelete"}})],1)],1),e._v(" "),n("v-row",[n("v-col",[n("v-checkbox",{staticClass:"mt-0",attrs:{disabled:e.isSQLite,"false-value":"real","true-value":"virtual",label:"Virtual Relation","full-width":!1,required:"",dense:""},model:{value:e.relation.type,callback:function(t){e.$set(e.relation,"type",t)},expression:"relation.type"}})],1)],1)],1)}),[],!1,null,"2cc38b2c",null);t.default=h.exports;u()(h,{VAutocomplete:d.a,VCheckbox:m.a,VCol:p.a,VContainer:f.a,VRow:v.a})},125:function(e,t,n){"use strict";n.r(t);n(53),n(54),n(55),n(56);var a=n(36),i=n(229),o=(n(52),n(207),n(230),n(242));function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){Object(a.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var s={name:"LinkedToAnotherOptions",props:["nodes","column","meta","isSQLite","alias"],data:function(){return{type:"hm",refTables:[],refColumns:[],relation:{},isRefTablesLoading:!1,isRefColumnsLoading:!1,advanceOptions:!1}},computed:{onUpdateDeleteOptions:function(){return this.isMSSQL?["NO ACTION"]:["NO ACTION","CASCADE","RESTRICT","SET NULL","SET DEFAULT"]},tableRules:function(){return[]}},created:function(){var e=this;return Object(i.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.loadTablesList();case 2:e.relation={parentId:null,childID:null,childColumn:"".concat(e.meta.table_name,"_id"),childTable:e.nodes.table_name,parentTable:e.column.rtn||"",parentColumn:e.column.rcn||"",onDelete:"NO ACTION",onUpdate:"NO ACTION",updateRelation:!!e.column.rtn,virtual:e.isSQLite};case 3:case"end":return t.stop()}}),t)})))()},methods:{loadTablesList:function(){var e=this;return Object(i.a)(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.isRefTablesLoading=!0,t.next=3,e.$api.dbTable.list(e.$store.state.project.projectId,e.$store.state.project.project.bases[0].id);case 3:n=t.sent.list.filter((function(e){return e.type===o.b.TABLE})),e.refTables=n,e.isRefTablesLoading=!1;case 6:case"end":return t.stop()}}),t)})))()},saveRelation:function(){var e=this;return Object(i.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$api.dbTableColumn.create(e.meta.id,l(l({},e.relation),{},{parentId:e.meta.id,uidt:o.f.LinkToAnotherRecord,title:e.alias,type:e.type}));case 2:return t.next=4,e.$store.dispatch("meta/ActLoadMeta",{id:e.relation.childId,force:!0});case 4:case"end":return t.stop()}}),t)})))()},onColumnSelect:function(){var e=this,t=this.refColumns.find((function(t){return e.relation.parentColumn===t.column_name}));this.$emit("onColumnSelect",t)}}},c=(n(909),n(191)),u=n(210),d=n.n(u),m=n(605),p=n(941),f=n(688),v=n(617),h=n(510),b=n(1106),g=n(1107),y=n(904),x=Object(c.a)(s,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("v-container",{staticClass:"wrapper mb-3",attrs:{fluid:""}},[n("v-row",[n("v-col",[n("v-radio-group",{staticClass:"pt-0 mt-0",attrs:{row:"","hide-details":"",dense:""},on:{change:function(t){return e.$refs.input.validate()}},model:{value:e.type,callback:function(t){e.type=t},expression:"type"}},[n("v-radio",{attrs:{value:"hm",label:"Has Many"}}),e._v(" "),n("v-radio",{attrs:{value:"mm",label:"Many To Many"}})],1)],1),e._v(" "),n("v-col",{attrs:{cols:"12"}},[n("v-autocomplete",{ref:"input",staticClass:"caption",attrs:{outlined:"","hide-details":"auto",loading:e.isRefTablesLoading,label:e.$t("labels.childTable"),"full-width":!1,items:e.refTables,"item-text":"title","item-value":"id",required:"",dense:"",rules:e.tableRules},model:{value:e.relation.childId,callback:function(t){e.$set(e.relation,"childId",t)},expression:"relation.childId"}})],1)],1)],1),e._v(" "),n("v-container",{staticClass:" mb-3",attrs:{fluid:""}},[n("v-row",[n("v-col",{staticClass:"pt-0",class:{"pb-0":e.advanceOptions},attrs:{cols:"12"}},[n("div",{staticClass:"pointer grey--text text-right caption nc-more-options",on:{click:function(t){e.advanceOptions=!e.advanceOptions}}},[e._v("\n          "+e._s(e.advanceOptions?e.$t("general.hideAll"):e.$t("general.showMore"))+"\n          "),n("v-icon",{attrs:{"x-small":"",color:"grey"}},[e._v("\n            mdi-"+e._s(e.advanceOptions?"minus":"plus")+"-circle-outline\n          ")])],1)])],1)],1),e._v(" "),n("v-container",{directives:[{name:"show",rawName:"v-show",value:e.advanceOptions,expression:"advanceOptions"}],staticClass:"wrapper",attrs:{fluid:""}},[n("v-row"),e._v(" "),e.isSQLite?e._e():[n("v-row",[n("v-col",{attrs:{cols:"6"}},[n("v-autocomplete",{staticClass:"caption",attrs:{outlined:"","hide-details":"",label:e.$t("labels.onUpdate"),"full-width":!1,items:e.onUpdateDeleteOptions,required:"",dense:"",disabled:e.relation.virtual},model:{value:e.relation.onUpdate,callback:function(t){e.$set(e.relation,"onUpdate",t)},expression:"relation.onUpdate"}})],1),e._v(" "),n("v-col",{attrs:{cols:"6"}},[n("v-autocomplete",{staticClass:"caption",attrs:{outlined:"","hide-details":"",label:e.$t("labels.onDelete"),"full-width":!1,items:e.onUpdateDeleteOptions,required:"",dense:"",disabled:e.relation.virtual},model:{value:e.relation.onDelete,callback:function(t){e.$set(e.relation,"onDelete",t)},expression:"relation.onDelete"}})],1)],1)],e._v(" "),n("v-row",[n("v-col",[n("v-checkbox",{staticClass:"mt-0",attrs:{label:"Virtual Relation","full-width":!1,required:"",dense:""},model:{value:e.relation.virtual,callback:function(t){e.$set(e.relation,"virtual",t)},expression:"relation.virtual"}})],1)],1)],2)],1)}),[],!1,null,"1f5a80dc",null);t.default=x.exports;d()(x,{VAutocomplete:m.a,VCheckbox:p.a,VCol:f.a,VContainer:v.a,VIcon:h.a,VRadio:b.a,VRadioGroup:g.a,VRow:y.a})},126:function(e,t,n){"use strict";n.r(t);n(53),n(54),n(52),n(55),n(56);var a=n(36);function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){Object(a.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var r={name:"RatingOptions",components:{ColorPicker:n(103).default},props:["column","meta","value"],data:function(){return{colMeta:{icon:{full:"mdi-star",empty:"mdi-star-outline"},color:"#fcb401",max:5},icons:[{full:"mdi-star",empty:"mdi-star-outline"},{full:"mdi-heart",empty:"mdi-heart-outline"},{full:"mdi-moon-full",empty:"mdi-moon-new"},{full:"mdi-thumb-up",empty:"mdi-thumb-up-outline"},{full:"mdi-flag",empty:"mdi-flag-outline"}]}},watch:{value:function(){this.colMeta=this.value||{}},colMeta:function(e){this.$emit("input",e)}},created:function(){this.colMeta=this.value?o({},this.value):o({},this.colMeta)}},l=(n(911),n(191)),s=n(210),c=n.n(s),u=n(510),d=n(419),m=Object(l.a)(r,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("div",{staticClass:"nc-rating-wrapper ui-type"},[n("v-select",{staticClass:"caption",attrs:{label:"Icon","menu-props":{bottom:!0,offsetY:!0},items:e.icons,dense:"",outlined:"","item-value":function(e){return e},"value-comparator":function(e,t){return e&&t&&e.full===t.full&&e.empty===t.empty}},scopedSlots:e._u([{key:"item",fn:function(t){var a=t.item;return[n("v-icon",{attrs:{small:"",color:e.colMeta.color}},[e._v("\n          "+e._s(a.full)+"\n        ")]),e._v(" "),n("v-icon",{staticClass:"ml-2",attrs:{small:"",color:e.colMeta.color}},[e._v("\n          "+e._s(a.empty)+"\n        ")])]}},{key:"selection",fn:function(t){var a=t.item;return[n("v-icon",{attrs:{small:"",color:e.colMeta.color}},[e._v("\n          "+e._s(a.full)+"\n        ")]),e._v(" "),n("v-icon",{staticClass:"ml-2",attrs:{small:"",color:e.colMeta.color}},[e._v("\n          "+e._s(a.empty)+"\n        ")])]}}]),model:{value:e.colMeta.icon,callback:function(t){e.$set(e.colMeta,"icon",t)},expression:"colMeta.icon"}}),e._v(" "),n("v-select",{staticClass:"caption",attrs:{label:"Max","menu-props":{bottom:!0,offsetY:!0},items:[1,2,3,4,5,6,7,8,9,10],dense:"",outlined:""},model:{value:e.colMeta.max,callback:function(t){e.$set(e.colMeta,"max",t)},expression:"colMeta.max"}})],1),e._v(" "),n("color-picker",{attrs:{"row-size":"8",colors:["#fcb401","#faa307","#f48c06","#e85d04","#dc2f02","#d00000","#9d0208","#777"]},model:{value:e.colMeta.color,callback:function(t){e.$set(e.colMeta,"color",t)},expression:"colMeta.color"}})],1)}),[],!1,null,"15dc077c",null);t.default=m.exports;c()(m,{VIcon:u.a,VSelect:d.a})},127:function(e,t,n){"use strict";n.r(t);n(53),n(54),n(52),n(55),n(56);var a=n(36);function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){Object(a.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var r={name:"CheckboxOptions",components:{ColorPicker:n(103).default},props:["column","meta","value"],data:function(){return{colMeta:{icon:{checked:"mdi-check-bold",unchecked:"mdi-crop-square"},color:"#777"},icons:[{checked:"mdi-check-bold",unchecked:"mdi-crop-square"},{checked:"mdi-check-circle-outline",unchecked:"mdi-checkbox-blank-circle-outline"},{checked:"mdi-star",unchecked:"mdi-star-outline"},{checked:"mdi-heart",unchecked:"mdi-heart-outline"},{checked:"mdi-moon-full",unchecked:"mdi-moon-new"},{checked:"mdi-thumb-up",unchecked:"mdi-thumb-up-outline"},{checked:"mdi-flag",unchecked:"mdi-flag-outline"}]}},watch:{value:function(){this.colMeta=this.value||{}},colMeta:function(e){this.$emit("input",e)}},created:function(){this.colMeta=this.value?o({},this.value):o({},this.colMeta)}},l=(n(913),n(191)),s=n(210),c=n.n(s),u=n(510),d=n(419),m=Object(l.a)(r,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("div",{staticClass:"nc-rating-wrapper ui-type"},[n("v-select",{staticClass:"caption",attrs:{label:"Icon","menu-props":{bottom:!0,offsetY:!0},items:e.icons,dense:"",outlined:"","item-value":function(e){return e},"value-comparator":function(e,t){return e&&t&&e.checked===t.checked&&e.unchecked===t.unchecked}},scopedSlots:e._u([{key:"item",fn:function(t){var a=t.item;return[n("v-icon",{attrs:{small:"",color:e.colMeta.color}},[e._v("\n          "+e._s(a.checked)+"\n        ")]),e._v(" "),n("v-icon",{staticClass:"ml-2",attrs:{small:"",color:e.colMeta.color}},[e._v("\n          "+e._s(a.unchecked)+"\n        ")])]}},{key:"selection",fn:function(t){var a=t.item;return[n("v-icon",{attrs:{small:"",color:e.colMeta.color}},[e._v("\n          "+e._s(a.checked)+"\n        ")]),e._v(" "),n("v-icon",{staticClass:"ml-2",attrs:{small:"",color:e.colMeta.color}},[e._v("\n          "+e._s(a.unchecked)+"\n        ")])]}}]),model:{value:e.colMeta.icon,callback:function(t){e.$set(e.colMeta,"icon",t)},expression:"colMeta.icon"}})],1),e._v(" "),n("color-picker",{attrs:{"row-size":"8",colors:["#fcb401","#faa307","#f48c06","#e85d04","#dc2f02","#d00000","#9d0208","#777"]},model:{value:e.colMeta.color,callback:function(t){e.$set(e.colMeta,"color",t)},expression:"colMeta.color"}})],1)}),[],!1,null,"0a637a87",null);t.default=m.exports;c()(m,{VIcon:u.a,VSelect:d.a})},128:function(e,t,n){"use strict";n.r(t);n(53),n(54),n(52),n(55),n(56);var a=n(36),i=(n(201),n(508));function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function r(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){Object(a.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var l={name:"DuractionOptions",props:["column","meta","value"],data:function(){return{durationOptionList:i.c.map((function(e){return r(r({},e),{},{title:"".concat(e.title," ").concat(e.example)})})),colMeta:{duration:0}}},watch:{value:function(){this.colMeta=this.value||{}},colMeta:function(e){this.$emit("input",e)}},created:function(){this.colMeta=this.value?r({},this.value):r({},this.colMeta)}},s=(n(917),n(191)),c=n(210),u=n.n(c),d=n(605),m=n(904),p=Object(s.a)(l,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-row",{staticClass:"duration-wrapper"},[n("div",{staticClass:"caption"},[e._v("\n    A duration of time in minutes or seconds (e.g. 1:23).\n  ")]),e._v(" "),n("v-autocomplete",{staticClass:"caption ui-type nc-ui-dt-dropdown",attrs:{"hide-details":"",label:"Duration Format",dense:"",outlined:"","item-value":"id","item-text":"title",items:e.durationOptionList},scopedSlots:e._u([{key:"selection",fn:function(t){var a=t.item;return[n("div",[n("span",{staticClass:"caption grey--text text--darken-4"},[e._v("\n          "+e._s(a.title)+"\n        ")])])]}},{key:"item",fn:function(t){var a=t.item;return[n("div",{staticClass:"caption"},[e._v("\n        "+e._s(a.title)+"\n      ")])]}}]),model:{value:e.colMeta.duration,callback:function(t){e.$set(e.colMeta,"duration",t)},expression:"colMeta.duration"}})],1)}),[],!1,null,"699cf064",null);t.default=p.exports;u()(p,{VAutocomplete:d.a,VRow:m.a})},129:function(e,t,n){"use strict";n.r(t);var a={name:"RollupCell",components:{},props:{meta:[Object],column:[Object],nodes:[Object],row:[Object]}},i=(n(919),n(191)),o=Object(i.a)(a,(function(){var e=this.$createElement;return(this._self._c||e)("span",[this._v("\n  "+this._s(this.row[this.column.title])+"\n")])}),[],!1,null,"99334390",null);t.default=o.exports},130:function(e,t,n){"use strict";n.r(t);n(199),n(244),n(245),n(257);var a=n(295),i=n.n(a),o={name:"FormulaCell",props:{column:Object,row:Object,client:String},data:function(){return{showEditFormulaWarning:!1}},computed:{result:function(){return"pg"===this.client?this.handleTZ(this.row[this.column.title]):this.row[this.column.title]},urls:function(){if(this.row[this.column.title]){var e=this.result.toString(),t=!1,n=e.replace(/URI::\((.*?)\)/g,(function(e,n){t=!0;var a=document.createElement("a");return a.textContent=n,a.setAttribute("href",n),a.setAttribute("target","_blank"),a.outerHTML}));return t&&n}}},methods:{handleTZ:function(e){if(e)return"string"!=typeof e?e:e.replace(/((?:-?(?:[1-9][0-9]*)?[0-9]{4})-(?:1[0-2]|0[1-9])-(?:3[01]|0[1-9]|[12][0-9])T(?:2[0-3]|[01][0-9]):(?:[0-5][0-9]):(?:[0-5][0-9])(?:\.[0-9]+)?(?:Z|[+-](?:2[0-3]|[01][0-9]):[0-5][0-9]))/g,(function(e,t){return i()(t).format("YYYY-MM-DD HH:mm")}))},showEditFormulaWarningMessage:function(){var e=this;this.showEditFormulaWarning=!0,setTimeout((function(){e.showEditFormulaWarning=!1}),3e3)}}},r=(n(921),n(191)),l=n(210),s=n.n(l),c=n(717),u=Object(r.a)(o,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[e.column&&e.column.colOptions&&e.column.colOptions.error?n("v-tooltip",{attrs:{bottom:"",color:"error"},scopedSlots:e._u([{key:"activator",fn:function(t){var a=t.on;return[n("span",e._g({staticClass:"caption"},a),[e._v("ERR"),n("span",{staticClass:"error--text"},[e._v("!")])])]}}],null,!1,514984296)},[e._v(" "),n("span",{staticClass:" font-weight-bold"},[e._v(e._s(e.column.colOptions.error))])]):e._e(),e._v(" "),n("div",{staticClass:"formula-cell-wrapper",on:{dblclick:e.showEditFormulaWarningMessage}},[e.urls?n("div",{domProps:{innerHTML:e._s(e.urls)}}):n("div",[e._v("\n      "+e._s(e.result)+"\n    ")]),e._v(" "),1==e.showEditFormulaWarning?n("div",{staticClass:"edit-warning"},[e._v("\n      Warning: Formula fields should be configured in the field menu dropdown.\n    ")]):e._e()])],1)}),[],!1,null,"1c91d9a8",null);t.default=u.exports;s()(u,{VTooltip:c.a})},131:function(e,t,n){"use strict";n.r(t);var a=n(229),i=n(212),o=n(36),r=(n(230),n(207),n(201),n(52),n(505),n(242)),l=n(598),s=n(100),c=n(102),u=n(99),d=n(109),m=n(301),p=n(101),f={name:"HasManyCell",components:{ListChildItems:u.default,ItemChip:p.default,ListItems:c.default,Pagination:s.default,DlgLabelSubmitCancel:l.a,listChildItemsModal:d.default},props:{isLocked:Boolean,breadcrumbs:{type:Array,default:function(){return[]}},value:[Object,Array],meta:[Object],nodes:[Object],row:[Object],active:Boolean,isNew:Boolean,isForm:Boolean,required:Boolean,isPublic:Boolean,metas:Object,password:String,column:Object},data:function(){return{newRecordModal:!1,childListModal:!1,dialogShow:!1,confirmAction:null,confirmMessage:"",selectedChild:null,expandFormModal:!1,isNewChild:!1,localState:[]}},computed:{childMeta:function(){return this.metas?this.metas[this.column.colOptions.fk_related_model_id]:this.$store.state.meta.metas[this.column.colOptions.fk_related_model_id]},childApi:function(){},childPrimaryCol:function(){return this.childMeta&&(this.childMeta.columns.find((function(e){return e.pv}))||{}).title},primaryCol:function(){return this.meta&&(this.meta.columns.find((function(e){return e.pv}))||{}).title},childPrimaryKey:function(){return this.childMeta&&(this.childMeta.columns.find((function(e){return e.pk}))||{}).title},childForeignKey:function(){var e=this;return this.childMeta&&(this.childMeta.columns.find((function(t){return t.id===e.column.colOptions.fk_child_column_id}))||{}).title},childForeignKeyVal:function(){var e=this;return this.meta&&this.meta.columns?this.meta.columns.filter((function(t){return t.title===e.childForeignKey})).map((function(t){return e.row[t.title]||""})).join("___"):""},isVirtualRelation:function(){return this.column&&this.column.colOptions.virtual},isByPass:function(){var e=this;return!this.isVirtualRelation&&(!(!this.meta||!this.meta.columns.find((function(t){return!t.pk&&t.id===e.column.fk_parent_column_id})))&&""===this.childForeignKeyVal)},disabledChildColumns:function(){return Object(o.a)({},this.childForeignKey,!0)},form:function(){return this.selectedChild&&!this.isPublic?function(){return Promise.all([n.e(4),n.e(5),n.e(6),n.e(7),n.e(23)]).then(n.bind(null,156))}:"span"},childAvailableColumns:function(){if(!this.childMeta)return[];var e=[];return this.childMeta.columns&&e.push.apply(e,Object(i.a)(this.childMeta.columns.filter((function(e){return!Object(r.i)(e)})))),e},childQueryParams:function(){return this.childMeta?{hm:this.childMeta&&this.childMeta.v&&this.childMeta.v.filter((function(e){return e.hm})).map((function(e){return e.hm.table_name})).join()||"",bt:this.childMeta&&this.childMeta.v&&this.childMeta.v.filter((function(e){return e.bt})).map((function(e){return e.bt.rtn})).join()||"",mm:this.childMeta&&this.childMeta.v&&this.childMeta.v.filter((function(e){return e.mm})).map((function(e){return e.mm.rtn})).join()||""}:{}},parentId:function(){var e=this;return this.meta&&this.meta.columns&&(this.meta.columns.filter((function(t){return t.title===e.childForeignKey})).map((function(t){return e.row[t.title]||""})).join("___")||this.meta.columns.filter((function(e){return e.pk})).map((function(t){return e.row[t.title]})).join("___"))||""}},watch:{isNew:function(e,t){!e&&t&&this.saveLocalState()}},mounted:function(){var e=this;return Object(a.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.loadChildMeta();case 2:e.isNew&&e.value&&(e.localState=Object(i.a)(e.value));case 3:case"end":return t.stop()}}),t)})))()},created:function(){this.loadChildMeta()},methods:{onChildSave:function(){this.isNew?this.addChildToParent(this.selectedChild):this.$emit("loadTableData")},showChildListModal:function(){var e=this;return Object(a.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.loadChildMeta();case 2:e.childListModal=!0;case 3:case"end":return t.stop()}}),t)})))()},deleteChild:function(e){var t=this;return Object(a.a)(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:t.dialogShow=!0,t.confirmMessage="Do you want to delete the record?",t.confirmAction=function(){var n=Object(a.a)(regeneratorRuntime.mark((function n(a){var i;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if("hideDialog"!==a){n.next=4;break}t.dialogShow=!1,n.next=20;break;case 4:return i=t.childMeta.columns.filter((function(e){return e.pk})).map((function(t){return e[t.title]})).join("___"),n.prev=5,n.next=8,t.$api.data.delete(t.childMeta.id,i);case 8:t.dialogShow=!1,t.$emit("loadTableData"),(t.childListModal||t.isForm)&&t.$refs.childList&&t.$refs.childList.loadData(),n.next=20;break;case 13:return n.prev=13,n.t0=n.catch(5),n.t1=t.$toast,n.next=18,t._extractSdkResponseErrorMsg(n.t0);case 18:n.t2=n.sent,n.t1.error.call(n.t1,n.t2).goAway(3e3);case 20:case"end":return n.stop()}}),n,null,[[5,13]])})));return function(e){return n.apply(this,arguments)}}();case 3:case"end":return n.stop()}}),n)})))()},unlinkChild:function(e){var t=this;return Object(a.a)(regeneratorRuntime.mark((function n(){var a;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!t.isNew){n.next=4;break}return t.localState.splice(t.localState.indexOf(e),1),t.$emit("update:localState",Object(i.a)(t.localState)),n.abrupt("return");case 4:return n.next=6,t.loadChildMeta();case 6:if(!t.childMeta.columns.find((function(e){return e.id===t.column.colOptions.fk_child_column_id})).rqd){n.next=10;break}return t.$toast.info("Unlink is not possible, instead add to another record.").goAway(3e3),n.abrupt("return");case 10:return a=t.childMeta.columns.filter((function(e){return e.pk})).map((function(t){return e[t.title]})).join("___"),n.next=13,t.$api.dbTableRow.nestedRemove("noco",t.projectName,t.meta.title,t.parentId,r.d.HAS_MANY,t.column.title,a);case 13:t.$emit("loadTableData"),(t.childListModal||t.isForm)&&t.$refs.childList&&t.$refs.childList.loadData();case 15:case"end":return n.stop()}}),n)})))()},loadChildMeta:function(){var e=this;return Object(a.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.childMeta){t.next=3;break}return t.next=3,e.$store.dispatch("meta/ActLoadMeta",{env:e.nodes.env,dbAlias:e.nodes.dbAlias,id:e.column.colOptions.fk_related_model_id});case 3:case"end":return t.stop()}}),t)})))()},showNewRecordModal:function(){var e=this;return Object(a.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.loadChildMeta();case 2:e.newRecordModal=!0;case 3:case"end":return t.stop()}}),t)})))()},addChildToParent:function(e){var t=this;return Object(a.a)(regeneratorRuntime.mark((function n(){var a;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!t.isNew||!t.localState.every((function(n){return n[t.childForeignKey]!==e[t.childPrimaryKey]}))){n.next=6;break}return t.localState.push(e),t.$emit("update:localState",Object(i.a)(t.localState)),t.$emit("saveRow"),t.newRecordModal=!1,n.abrupt("return");case 6:return a=t.childMeta.columns.filter((function(e){return e.pk})).map((function(t){return e[t.title]})).join("___"),t.newRecordModal=!1,n.next=10,t.$api.dbTableRow.nestedAdd("noco",t.projectName,t.meta.title,t.parentId,"hm",t.column.title,a);case 10:if(t.$emit("loadTableData"),!t.childListModal&&!t.isForm||!t.$refs.childList){n.next=14;break}return n.next=14,t.$refs.childList.loadData();case 14:case"end":return n.stop()}}),n)})))()},editChild:function(e){var t=this;return Object(a.a)(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.loadChildMeta();case 2:t.isNewChild=!1,t.expandFormModal=!0,t.selectedChild=e,setTimeout((function(){t.$refs.expandedForm&&t.$refs.expandedForm.reload()}),500);case 6:case"end":return n.stop()}}),n)})))()},insertAndAddNewChildRecord:function(){var e=this;return Object(a.a)(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.newRecordModal=!1,t.next=3,e.loadChildMeta();case 3:e.isNewChild=!0,e.selectedChild=(n={},Object(o.a)(n,e.childForeignKey,Object(m.f)(e.parentId)),Object(o.a)(n,(e.childMeta.columns.find((function(t){return t.uidt===r.f.LinkToAnotherRecord&&t.colOptions&&e.column.colOptions&&t.colOptions.fk_child_column_id===e.column.colOptions.fk_child_column_id&&t.colOptions.fk_parent_column_id===e.column.colOptions.fk_parent_column_id&&t.colOptions.type===r.d.BELONGS_TO}))||{}).title,e.row),n),e.expandFormModal=!0,e.isNew||setTimeout((function(){e.$refs.expandedForm&&e.$refs.expandedForm.$set(e.$refs.expandedForm.changedColumns,e.childForeignKey,!0)}),500);case 7:case"end":return t.stop()}}),t)})))()},getCellValue:function(e){if(e)return this.childMeta&&this.childPrimaryCol?e[this.childPrimaryCol]:Object.values(e)[1]},saveLocalState:function(e){var t=this;return Object(a.a)(regeneratorRuntime.mark((function n(){var a,i,o;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!(a=t.localState.pop())){n.next=12;break}if(!e){n.next=8;break}return i=t.meta.columns.filter((function(e){return e.pk})).map((function(t){return e[t.title]})).join("___"),o=t.childMeta.columns.filter((function(e){return e.pk})).map((function(e){return a[e.title]})).join("___"),n.next=6,t.$api.dbTableRow.nestedAdd("noco",t.projectName,t.meta.title,i,"hm",t.column.title,o);case 6:n.next=10;break;case 8:return n.next=10,t.addChildToParent(a);case 10:n.next=0;break;case 12:t.$emit("newRecordsSaved");case 13:case"end":return n.stop()}}),n)})))()}}},v=(n(973),n(191)),h=n(210),b=n.n(h),g=n(674),y=Object(v.a)(f,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"d-flex d-100 chips-wrapper",class:{active:e.active}},[e.isForm?e._e():[n("div",{staticClass:"chips d-flex align-center img-container flex-grow-1 hm-items"},[e.value||e.localState?[e._l(e.value||e.localState,(function(t,a){return n("item-chip",{key:a,attrs:{active:e.active,item:t,value:e.getCellValue(t),readonly:e.isLocked||e.isPublic},on:{edit:e.editChild,unlink:e.unlinkChild}})})),e._v(" "),!e.isLocked&&e.value&&10===e.value.length?n("span",{staticClass:"caption pointer ml-1 grey--text",on:{click:e.showChildListModal}},[e._v("more...\n        ")]):e._e()]:e._e()],2),e._v(" "),e.isLocked?e._e():n("div",{staticClass:"actions align-center justify-center px-1 flex-shrink-1",class:{"d-none":!e.active,"d-flex":e.active}},[!e._isUIAllowed("xcDatatableEditable")||!e.isForm&&e.isPublic?e._e():n("x-icon",{attrs:{small:"",color:["primary","grey"]},on:{click:e.showNewRecordModal}},[e._v("\n        mdi-plus\n      ")]),e._v(" "),n("x-icon",{staticClass:"ml-2",attrs:{"x-small":"",color:["primary","grey"]},on:{click:e.showChildListModal}},[e._v("\n        mdi-arrow-expand\n      ")])],1)],e._v(" "),e.newRecordModal?n("list-items",{attrs:{size:10,meta:e.childMeta,"primary-col":e.childPrimaryCol,"primary-key":e.childPrimaryKey,api:e.childApi,"parent-meta":e.meta,column:e.column,"query-params":Object.assign({},e.childQueryParams,{isByPass:e.isByPass,where:e.isNew?null:"~not("+e.childForeignKey+",eq,"+e.parentId+")~or("+e.childForeignKey+",is,null)"}),"is-public":e.isPublic,password:e.password,"row-id":e.parentId},on:{"add-new-record":e.insertAndAddNewChildRecord,add:e.addChildToParent},model:{value:e.newRecordModal,callback:function(t){e.newRecordModal=t},expression:"newRecordModal"}}):e._e(),e._v(" "),e.childMeta&&(e.childListModal||e.isForm)?n(e.isForm?"list-child-items":"list-child-items-modal",{ref:"childList",tag:"list-child-items",attrs:{"is-form":e.isForm,"local-state":e.localState,"is-new":e.isNew,size:10,meta:e.childMeta,"parent-meta":e.meta,password:e.password,"primary-col":e.childPrimaryCol,"primary-key":e.childPrimaryKey,api:e.childApi,column:e.column,"query-params":Object.assign({},e.childQueryParams,{where:"("+e.childForeignKey+",eq,"+e.parentId+")"}),"is-public":e.isPublic,"row-id":e.parentId,type:"hm"},on:{"update:localState":function(t){e.localState=t},"update:local-state":function(t){e.localState=t},"new-record":e.showNewRecordModal,edit:e.editChild,unlink:e.unlinkChild,delete:e.deleteChild},model:{value:e.childListModal,callback:function(t){e.childListModal=t},expression:"childListModal"}}):e._e(),e._v(" "),e.dialogShow?n("dlg-label-submit-cancel",{attrs:{type:"primary","actions-mtd":e.confirmAction,"dialog-show":e.dialogShow,heading:e.confirmMessage}}):e._e(),e._v(" "),n("v-dialog",{staticClass:" mx-auto",attrs:{"overlay-opacity":.8,width:"1000px","max-width":"100%"},model:{value:e.expandFormModal,callback:function(t){e.expandFormModal=t},expression:"expandFormModal"}},[e.selectedChild?n(e.form,{ref:"expandedForm",tag:"component",attrs:{"db-alias":e.nodes.dbAlias,"has-many":e.childMeta.hasMany,"belongs-to":e.childMeta.belongsTo,table:e.childMeta.table_name,"old-row":Object.assign({},e.selectedChild),meta:e.childMeta,"primary-value-column":e.childPrimaryCol,api:e.childApi,"available-columns":e.childAvailableColumns,"icon-color":"warning",nodes:e.nodes,"query-params":e.childQueryParams,"is-new":e.isNewChild,"disabled-columns":e.disabledChildColumns,breadcrumbs:e.breadcrumbs},on:{"update:isNew":function(t){e.isNewChild=t},"update:is-new":function(t){e.isNewChild=t},cancel:function(t){e.selectedChild=null,e.expandFormModal=!1},input:e.onChildSave},model:{value:e.selectedChild,callback:function(t){e.selectedChild=t},expression:"selectedChild"}}):e._e()],1)],2)}),[],!1,null,"e8d4bfd6",null);t.default=y.exports;b()(y,{VDialog:g.a})},132:function(e,t,n){"use strict";n.r(t);var a=n(229),i=(n(230),n(182),n(207),n(242)),o=n(120),r=n(101),l={name:"LookupCell",components:{TableCell:o.default,ItemChip:r.default},props:{meta:[Object],metas:[Object],column:[Object],nodes:[Object],row:[Object],api:[Object,Function],sqlUi:[Object,Function],active:Boolean,isNew:Boolean,isForm:Boolean,value:[Object,Array,String,Number]},data:function(){return{UITypes:i.f,lookupListModal:!1,lookupTableMeta:null,lookupColumnMeta:null,isVirtualCol:i.j,RelationTypes:i.d}},computed:{virtualCell:function(){return this.lookupColumnMeta&&Object(i.j)(this.lookupColumnMeta)?function(){return Promise.all([n.e(9),n.e(55)]).then(n.bind(null,151))}:"div"},lookupApi:function(){},lookUpMeta:function(){},assocMeta:function(){},lookUpColumnAlias:function(){var e=this;if(this.lookUpMeta&&this.column.lk.lcn)return(this.lookUpMeta.columns.find((function(t){return t.column_name===e.column.lk.lcn}))||{}).title},lookUpColumn:function(){var e=this;if(this.lookUpMeta&&this.column.lk.lcn)return this.lookUpMeta.columns.find((function(t){return t.column_name===e.column.lk.lcn}))||{}},localValueObj:function(){},localValue:function(){return this.value&&(Array.isArray(this.value)?this.value:[this.value])},queryParams:function(){}},created:function(){this.loadLookupMeta(),this.loadLookupColumnMeta()},methods:{loadLookupColumnMeta:function(){var e=this;return Object(a.a)(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.meta.columns.find((function(t){return t.id===e.column.colOptions.fk_relation_column_id})),t.next=3,e.$store.dispatch("meta/ActLoadMeta",{id:n.colOptions.fk_related_model_id});case 3:e.lookupTableMeta=t.sent,e.lookupColumnMeta=e.lookupTableMeta.columns.find((function(t){return t.id===e.column.colOptions.fk_lookup_column_id}));case 5:case"end":return t.stop()}}),t)})))()},loadLookupMeta:function(){return Object(a.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})))()},showLookupListModal:function(){this.lookupListModal=!0}}},s=(n(975),n(191)),c=Object(s.a)(l,(function(){var e,t=this,n=t.$createElement,a=t._self._c||n;return a("div",{staticClass:"d-flex flex-wrap wrapper"},[t.lookupColumnMeta?[t.isVirtualCol(t.lookupColumnMeta)?[t.lookupColumnMeta.uidt===t.UITypes.LinkToAnotherRecord&&t.lookupColumnMeta.colOptions.type===t.RelationTypes.BELONGS_TO&&Array.isArray(t.value)?t._l(t.value,(function(e,n){var i;return a(t.virtualCell,{key:n,tag:"div",attrs:{"is-public":!0,metas:t.metas,"is-locked":!0,column:t.lookupColumnMeta,row:(i={},i[t.lookupColumnMeta.title]=e,i),nodes:t.nodes,meta:t.lookupTableMeta,"sql-ui":t.sqlUi}})})):a(t.virtualCell,{tag:"div",attrs:{"is-public":!0,metas:t.metas,"is-locked":!0,column:t.lookupColumnMeta,row:(e={},e[t.lookupColumnMeta.title]=t.value,e),nodes:t.nodes,meta:t.lookupTableMeta,"sql-ui":t.sqlUi}})]:[t.localValue?t._l(t.localValue,(function(e,n){return a("item-chip",{key:n,staticStyle:{margin:"1.5px"},attrs:{active:t.active,value:e,readonly:!0}},[a("table-cell",{attrs:{"is-locked":!0,column:t.lookupColumnMeta,meta:t.lookupTableMeta,"db-alias":t.nodes.dbAlias,value:e,"sql-ui":t.sqlUi}})],1)})):t._e()]]:t._e()],2)}),[],!1,null,"168550df",null);t.default=c.exports},133:function(e,t,n){"use strict";n.r(t);var a=n(36),i=n(229),o=n(212),r=(n(230),n(505),n(207),n(201),n(52),n(220),n(199),n(219),n(242)),l=n(598),s=n(102),c=n(99),u=n(109),d=(n(301),n(101)),m={name:"ManyToManyCell",components:{ListChildItems:c.default,ItemChip:d.default,ListItems:s.default,DlgLabelSubmitCancel:l.a,listChildItemsModal:u.default},props:{isLocked:Boolean,breadcrumbs:{type:Array,default:function(){return[]}},value:[Object,Array],meta:[Object],mm:Object,nodes:[Object],row:[Object],api:[Object,Function],sqlUi:[Object,Function],active:Boolean,isNew:Boolean,isForm:Boolean,required:Boolean,isPublic:Boolean,metas:Object,password:String,column:Object},data:function(){return{isNewChild:!1,newRecordModal:!1,childListModal:!1,childList:null,dialogShow:!1,confirmAction:null,confirmMessage:"",selectedChild:null,expandFormModal:!1,localState:[]}},computed:{getCellValue:function(){var e=this;return function(t){if(t)return e.childPrimaryCol?t[e.childPrimaryCol]:Object.values(t)[1]}},childMeta:function(){return this.metas?this.metas[this.column.colOptions.fk_related_model_id]:this.$store.state.meta.metas[this.column.colOptions.fk_related_model_id]},assocMeta:function(){return this.metas?this.metas[this.column.colOptions.fk_mm_model_id]:this.$store.state.meta.metas[this.column.colOptions.fk_mm_model_id]},childApi:function(){},assocApi:function(){},childPrimaryCol:function(){return this.childMeta&&(this.childMeta.columns.find((function(e){return e.pv}))||{}).title},childPrimaryKey:function(){return this.childMeta&&(this.childMeta.columns.find((function(e){return e.pk}))||{}).title},parentPrimaryKey:function(){return this.meta&&(this.meta.columns.find((function(e){return e.pk}))||{}).title},childQueryParams:function(){return this.childMeta?{hm:this.childMeta&&this.childMeta.v&&this.childMeta.v.filter((function(e){return e.hm})).map((function(e){return e.hm.table_name})).join()||"",bt:this.childMeta&&this.childMeta.v&&this.childMeta.v.filter((function(e){return e.bt})).map((function(e){return e.bt.rtn})).join()||"",mm:this.childMeta&&this.childMeta.v&&this.childMeta.v.filter((function(e){return e.mm})).map((function(e){return e.mm.rtn})).join()||""}:{}},conditionGraph:function(){},childAvailableColumns:function(){if(!this.childMeta)return[];var e=[];return this.childMeta.columns&&e.push.apply(e,Object(o.a)(this.childMeta.columns.filter((function(e){return!Object(r.i)(e)})))),e},form:function(){return this.selectedChild&&!this.isPublic?function(){return Promise.all([n.e(4),n.e(5),n.e(6),n.e(7),n.e(22)]).then(n.bind(null,156))}:"span"}},watch:{isNew:function(e,t){var n=this;return Object(i.a)(regeneratorRuntime.mark((function a(){return regeneratorRuntime.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(e||!t){a.next=3;break}return a.next=3,n.saveLocalState();case 3:case"end":return a.stop()}}),a)})))()}},mounted:function(){var e=this;return Object(i.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!e.isForm){t.next=3;break}return t.next=3,Promise.all([e.loadChildMeta(),e.loadAssociateTableMeta()]);case 3:e.isNew&&e.value&&(e.localState=Object(o.a)(e.value));case 4:case"end":return t.stop()}}),t)})))()},created:function(){this.loadChildMeta(),this.loadAssociateTableMeta()},methods:{onChildSave:function(e){var t=this;return Object(i.a)(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!t.isNewChild){n.next=6;break}return t.isNewChild=!1,n.next=4,t.addChildToParent(e);case 4:n.next=7;break;case 6:t.$emit("loadTableData");case 7:case"end":return n.stop()}}),n)})))()},showChildListModal:function(){var e=this;return Object(i.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Promise.all([e.loadChildMeta(),e.loadAssociateTableMeta()]);case 2:e.childListModal=!0;case 3:case"end":return t.stop()}}),t)})))()},unlinkChild:function(e){var t=this;return Object(i.a)(regeneratorRuntime.mark((function n(){var a,i;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!t.isNew){n.next=4;break}return t.localState.splice(t.localState.indexOf(e),1),t.$emit("update:localState",Object(o.a)(t.localState)),n.abrupt("return");case 4:return n.next=6,Promise.all([t.loadChildMeta(),t.loadAssociateTableMeta()]);case 6:return a=t.childMeta.columns.filter((function(e){return e.pk})).map((function(t){return e[t.title]})).join("___"),i=t.meta.columns.filter((function(e){return e.pk})).map((function(e){return t.row[e.title]})).join("___"),n.next=10,t.$api.dbTableRow.nestedRemove("noco",t.projectName,t.meta.title,i,"mm",t.column.title,a);case 10:t.$emit("loadTableData"),(t.childListModal||t.isForm)&&t.$refs.childList&&t.$refs.childList.loadData();case 12:case"end":return n.stop()}}),n)})))()},removeChild:function(e){var t=this;return Object(i.a)(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:t.dialogShow=!0,t.confirmMessage="Do you want to delete the record?",t.confirmAction=function(){var n=Object(i.a)(regeneratorRuntime.mark((function n(a){var i;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if("hideDialog"!==a){n.next=4;break}t.dialogShow=!1,n.next=10;break;case 4:return i=t.childMeta.columns.filter((function(e){return e.pk})).map((function(t){return e[t.title]})).join("___"),n.next=7,t.childApi.delete(i);case 7:t.dialogShow=!1,t.$emit("loadTableData"),(t.childListModal||t.isForm)&&t.$refs.childList&&t.$refs.childList.loadData();case 10:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}();case 3:case"end":return n.stop()}}),n)})))()},loadChildMeta:function(){var e=this;return Object(i.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.childMeta){t.next=3;break}return t.next=3,e.$store.dispatch("meta/ActLoadMeta",{env:e.nodes.env,dbAlias:e.nodes.dbAlias,id:e.column.colOptions.fk_related_model_id});case 3:case"end":return t.stop()}}),t)})))()},loadAssociateTableMeta:function(){var e=this;return Object(i.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.assocMeta){t.next=3;break}return t.next=3,e.$store.dispatch("meta/ActLoadMeta",{env:e.nodes.env,dbAlias:e.nodes.dbAlias,id:e.column.colOptions.fk_mm_model_id});case 3:case"end":return t.stop()}}),t)})))()},showNewRecordModal:function(){var e=this;return Object(i.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Promise.all([e.loadChildMeta(),e.loadAssociateTableMeta()]);case 2:e.newRecordModal=!0;case 3:case"end":return t.stop()}}),t)})))()},addChildToParent:function(e){var t=this;return Object(i.a)(regeneratorRuntime.mark((function n(){var a,i;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!t.isNew||!t.localState.every((function(n){return n[t.childForeignKey]!==e[t.childPrimaryKey]}))){n.next=6;break}return t.localState.push(e),t.$emit("update:localState",Object(o.a)(t.localState)),t.$emit("saveRow"),t.newRecordModal=!1,n.abrupt("return");case 6:return a=t.childMeta.columns.filter((function(e){return e.pk})).map((function(t){return e[t.title]})).join("___"),i=t.meta.columns.filter((function(e){return e.pk})).map((function(e){return t.row[e.title]})).join("___"),n.next=10,t.$api.dbTableRow.nestedAdd("noco",t.projectName,t.meta.title,i,"mm",t.column.title,a);case 10:try{t.$emit("loadTableData")}catch(e){console.log(e)}t.newRecordModal=!1,(t.childListModal||t.isForm)&&t.$refs.childList&&t.$refs.childList.loadData();case 13:case"end":return n.stop()}}),n)})))()},insertAndAddNewChildRecord:function(){var e=this;return Object(i.a)(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.newRecordModal=!1,t.next=3,e.loadChildMeta();case 3:e.isNewChild=!0,e.selectedChild=(n={},Object(a.a)(n,e.childForeignKey,e.parentId),Object(a.a)(n,(e.childMeta.columns.find((function(t){return t.uidt===r.f.LinkToAnotherRecord&&t.colOptions&&e.column.colOptions&&t.colOptions.fk_child_column_id===e.column.colOptions.fk_parent_column_id&&t.colOptions.fk_parent_column_id===e.column.colOptions.fk_child_column_id&&t.colOptions.fk_mm_model_id===e.column.colOptions.fk_mm_model_id&&t.colOptions.type===r.d.MANY_TO_MANY}))||{}).title,[e.row]),n),e.expandFormModal=!0,setTimeout((function(){e.$refs.expandedForm&&e.$refs.expandedForm.$set(e.$refs.expandedForm.changedColumns,e.childForeignKey,!0)}),500);case 7:case"end":return t.stop()}}),t)})))()},editChild:function(e){var t=this;return Object(i.a)(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.loadChildMeta();case 2:t.isNewChild=!1,t.selectedChild=e,t.expandFormModal=!0,setTimeout((function(){t.$refs.expandedForm&&t.$refs.expandedForm.reload()}),500);case 6:case"end":return n.stop()}}),n)})))()},saveLocalState:function(e){var t=this;return Object(i.a)(regeneratorRuntime.mark((function n(){var a,i,o;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!(a=t.localState.pop())){n.next=12;break}if(!e){n.next=8;break}return i=t.childMeta.columns.filter((function(e){return e.pk})).map((function(e){return a[e.title]})).join("___"),o=t.meta.columns.filter((function(e){return e.pk})).map((function(t){return e[t.title]})).join("___"),n.next=6,t.$api.dbTableRow.nestedAdd("noco",t.projectName,t.meta.title,o,"mm",t.column.title,i);case 6:n.next=10;break;case 8:return n.next=10,t.addChildToParent(a);case 10:n.next=0;break;case 12:t.$emit("newRecordsSaved");case 13:case"end":return n.stop()}}),n)})))()}}},p=(n(977),n(191)),f=n(210),v=n.n(f),h=n(674),b=Object(p.a)(m,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"d-flex d-100 chips-wrapper",class:{active:e.active}},[e.isForm?e._e():[n("div",{staticClass:"chips d-flex align-center img-container flex-grow-1 hm-items"},[e.value||e.localState?e._l(e.value||e.localState,(function(t,a){return n("item-chip",{key:a,attrs:{active:e.active,item:t,value:e.getCellValue(t),readonly:e.isLocked||e.isPublic},on:{edit:e.editChild,unlink:e.unlinkChild}})})):e._e(),e._v(" "),!e.isLocked&&e.value&&10===e.value.length?n("span",{staticClass:"caption pointer ml-1 grey--text",on:{click:e.showChildListModal}},[e._v("more...")]):e._e()],2),e._v(" "),e.isLocked?e._e():n("div",{staticClass:"actions align-center justify-center px-1 flex-shrink-1",class:{"d-none":!e.active,"d-flex":e.active}},[!e._isUIAllowed("xcDatatableEditable")||!e.isForm&&e.isPublic?e._e():n("x-icon",{attrs:{small:"",color:["primary","grey"]},on:{click:e.showNewRecordModal}},[e._v("\n        mdi-plus\n      ")]),e._v(" "),n("x-icon",{staticClass:"ml-2",attrs:{"x-small":"",color:["primary","grey"]},on:{click:e.showChildListModal}},[e._v("\n        mdi-arrow-expand\n      ")])],1)],e._v(" "),e.newRecordModal?n("list-items",{attrs:{hm:!0,size:10,column:e.column,meta:e.childMeta,"primary-col":e.childPrimaryCol,"primary-key":e.childPrimaryKey,"parent-meta":e.meta,api:e.api,mm:e.mm,tn:e.mm&&e.mm.rtn,"parent-id":e.row&&e.row[e.parentPrimaryKey],"is-public":e.isPublic,"query-params":e.childQueryParams,password:e.password,"row-id":e.row&&e.row[e.parentPrimaryKey]},on:{"add-new-record":e.insertAndAddNewChildRecord,add:e.addChildToParent},model:{value:e.newRecordModal,callback:function(t){e.newRecordModal=t},expression:"newRecordModal"}}):e._e(),e._v(" "),e.childMeta&&e.assocMeta&&(e.isForm||e.childListModal)?n(e.isForm?"list-child-items":"list-child-items-modal",{ref:"childList",tag:"list-child-items",attrs:{"is-form":e.isForm,"is-new":e.isNew,size:10,meta:e.childMeta,"parent-meta":e.meta,"primary-col":e.childPrimaryCol,"primary-key":e.childPrimaryKey,api:e.childApi,mm:e.mm,"parent-id":e.row&&e.row[e.parentPrimaryKey],"query-params":Object.assign({},e.childQueryParams,{conditionGraph:e.conditionGraph}),"local-state":e.localState,"is-public":e.isPublic,"row-id":e.row&&e.row[e.parentPrimaryKey],column:e.column,type:"mm",password:e.password},on:{"new-record":e.showNewRecordModal,edit:e.editChild,unlink:e.unlinkChild},model:{value:e.childListModal,callback:function(t){e.childListModal=t},expression:"childListModal"}}):e._e(),e._v(" "),e.dialogShow?n("dlg-label-submit-cancel",{attrs:{type:"primary","actions-mtd":e.confirmAction,"dialog-show":e.dialogShow,heading:e.confirmMessage}}):e._e(),e._v(" "),e.selectedChild&&!e.isPublic?n("v-dialog",{staticClass:" mx-auto",attrs:{"overlay-opacity":.8,width:"1000px","max-width":"100%"},model:{value:e.expandFormModal,callback:function(t){e.expandFormModal=t},expression:"expandFormModal"}},[e.selectedChild?n(e.form,{ref:"expandedForm",tag:"component",attrs:{"db-alias":e.nodes.dbAlias,"has-many":e.childMeta.hasMany,"belongs-to":e.childMeta.belongsTo,table:e.childMeta.table_name,"old-row":Object.assign({},e.selectedChild),meta:e.childMeta,"primary-value-column":e.childPrimaryCol,"available-columns":e.childAvailableColumns,"icon-color":"warning",nodes:e.nodes,"query-params":e.childQueryParams,"is-new":e.isNewChild,breadcrumbs:e.breadcrumbs},on:{"update:isNew":function(t){e.isNewChild=t},"update:is-new":function(t){e.isNewChild=t},cancel:function(t){e.selectedChild=null,e.expandFormModal=!1},input:e.onChildSave},model:{value:e.selectedChild,callback:function(t){e.selectedChild=t},expression:"selectedChild"}}):e._e()],1):e._e()],2)}),[],!1,null,"aab171e2",null);t.default=b.exports;v()(b,{VDialog:h.a})},136:function(e,t,n){"use strict";n.r(t);var a=n(36),i=n(229),o=n(212),r=(n(230),n(182),n(208),n(190),n(52),n(207),n(53),n(54),n(55),n(56),n(242)),l=n(374),s=n(121),c=n(104),u=n(122),d=n(123),m=n(124),p=n(598),f=n(125),v=n(301),h=n(126),b=n(127),g=n(119),y=n(128);function x(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function w(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?x(Object(n),!0).forEach((function(t){Object(a.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):x(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var _=[l.a.Email,l.a.URL,l.a.PhoneNumber],C={name:"EditColumn",components:{CheckboxOptions:b.default,RatingOptions:h.default,RollupOptions:s.default,FormulaOptions:c.default,LookupOptions:u.default,LinkedToAnotherOptions:f.default,DlgLabelSubmitCancel:p.a,RelationOptions:m.default,CustomSelectOptions:d.default,CurrencyOptions:g.default,DurationOptions:y.default},props:{nodes:Object,sqlUi:[Object,Function],meta:Object,editColumn:Boolean,column:Object,columnIndex:Number,value:Boolean},data:function(){return{columnToValidate:_,valid:!1,relationDeleteDlg:!1,newColumn:{},advanceOptions:!1,idType:null,idTypes:[{value:"AI",text:"Auto increment number"},{value:"AG",text:"Auto generated string"}]}},computed:{isIDCol:function(){return this.column&&this.column.uidt===l.a.ID},accordion:function(){return![l.a.LinkToAnotherRecord,l.a.Lookup,l.a.Rollup,l.a.SpecificDBType,l.a.Formula,l.a.Duration].includes(this.newColumn&&this.newColumn.uidt)},uiTypes:function(){var e=this;return[].concat(Object(o.a)(l.c.filter((function(t){return!e.editColumn||!t.virtual}))),Object(o.a)(!this.editColumn&&this.meta.columns.every((function(e){return!e.pk}))?[{name:"ID",icon:"mdi-identifier"}]:[]))},isEditDisabled:function(){return this.editColumn&&this.sqlUi===r.e&&this.column.uidt!==l.a.Duration},isSQLite:function(){return this.sqlUi===r.e},isMSSQL:function(){return this.sqlUi===r.c},dataTypes:function(){return this.sqlUi.getDataTypeListForUiType(this.newColumn,this.idType)},isSelect:function(){return this.newColumn&&("MultiSelect"===this.newColumn.uidt||"SingleSelect"===this.newColumn.uidt)},isRelation:function(){return this.newColumn&&"ForeignKey"===this.newColumn.uidt},isLinkToAnotherRecord:function(){return this.newColumn&&"LinkToAnotherRecord"===this.newColumn.uidt},isLookup:function(){return this.newColumn&&"Lookup"===this.newColumn.uidt},isRating:function(){return this.newColumn&&this.newColumn.uidt===l.a.Rating},isCheckbox:function(){return this.newColumn&&this.newColumn.uidt===l.a.Checkbox},isRollup:function(){return this.newColumn&&"Rollup"===this.newColumn.uidt},relation:function(){var e=this;return this.meta&&this.column&&this.meta.belongsTo&&this.meta.belongsTo.find((function(t){return t.column_name===e.column.column_name}))},isVirtual:function(){return this.isLinkToAnotherRecord||this.isLookup||this.isRollup},isCurrency:function(){return this.newColumn&&this.newColumn.uidt===l.a.Currency}},watch:{column:function(){this.genColumnData()}},created:function(){var e=this;return Object(i.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.genColumnData();case 1:case"end":return t.stop()}}),t)})))()},mounted:function(){this.focusInput()},methods:{validateColumnName:function(e){return Object(v.g)(e,this.$store.getters["project/GtrProjectIsGraphql"])},onRelColumnSelect:function(e){Object.assign(this.newColumn,{dt:e.dt,dtxp:e.dtxp,dtxs:e.dtxs,un:e.un})},genColumnData:function(){this.newColumn=this.column?w({},this.column):this.sqlUi.getNewColumn([].concat(Object(o.a)(this.meta.columns),Object(o.a)(this.meta.v||[])).length+1),this.newColumn.cno=this.newColumn.column_name},close:function(){this.$emit("close"),this.newColumn={}},save:function(){var e=this;return Object(i.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.$refs.form.validate()){t.next=2;break}return t.abrupt("return");case 2:if(t.prev=2,"Formula"!==e.newColumn.uidt){t.next=7;break}return t.next=6,e.$refs.formula.save();case 6:return t.abrupt("return",e.$emit("saved"));case 7:if(!e.isLinkToAnotherRecord||!e.$refs.relation){t.next=11;break}return t.next=10,e.$refs.relation.saveRelation();case 10:return t.abrupt("return",e.$emit("saved"));case 11:if(!e.isLookup||!e.$refs.lookup){t.next=15;break}return t.next=14,e.$refs.lookup.save();case 14:return t.abrupt("return",t.sent);case 15:if(!e.isRollup||!e.$refs.rollup){t.next=19;break}return t.next=18,e.$refs.rollup.save();case 18:return t.abrupt("return",t.sent);case 19:if("Formula"!==e.newColumn.uidt||!e.$refs.formula){t.next=23;break}return t.next=22,e.$refs.formula.save();case 22:return t.abrupt("return",t.sent);case 23:if(e.newColumn.table_name=e.nodes.table_name,e.newColumn.title=e.newColumn.column_name,!e.editColumn){t.next=30;break}return t.next=28,e.$api.dbTableColumn.update(e.column.id,e.newColumn);case 28:t.next=33;break;case 30:return e.newColumn.uidt===l.a.ID&&e.isAutoGenId&&(e.newColumn.meta={ag:"nc"}),t.next=33,e.$api.dbTableColumn.create(e.meta.id,e.newColumn);case 33:e.$emit("saved",e.newColumn.title,e.editColumn?e.meta.columns[e.columnIndex].title:null),t.next=41;break;case 36:throw t.prev=36,t.t0=t.catch(2),console.log(t.t0),e.$toast.error("Failed to save column: "+t.t0).goAway(3e3),t.t0;case 41:e.$emit("close"),e.$e("a:column:add",{datatype:e.newColumn.uidt});case 43:case"end":return t.stop()}}),t,null,[[2,36]])})))()},onDataTypeChange:function(){this.newColumn.rqd=!1,this.newColumn.uidt!==l.a.ID&&(this.newColumn.primaryKey=!1),this.newColumn.ai=!1,this.newColumn.cdf=null,this.newColumn.un=!1,this.newColumn.dtxp=this.sqlUi.getDefaultLengthForDatatype(this.newColumn.dt),this.newColumn.dtxs=this.sqlUi.getDefaultScaleForDatatype(this.newColumn.dt),this.newColumn.dtx="specificType";var e,t=[l.a.MultiSelect,l.a.SingleSelect];(this.column&&t.includes(this.newColumn.uidt)&&t.includes(this.column.uidt)&&(this.newColumn.dtxp=this.column.dtxp),this.isCurrency)&&((null===(e=this.column)||void 0===e?void 0:e.uidt)===l.a.Currency?(this.newColumn.dtxp=this.column.dtxp,this.newColumn.dtxs=this.column.dtxs):(this.newColumn.dtxp=19,this.newColumn.dtxs=2));this.newColumn.altered=this.newColumn.altered||2},onUiOrIdTypeChange:function(){var e=this.sqlUi.getDataTypeForUiType(this.newColumn,this.idType);this.newColumn=w(w({},this.newColumn),{},{meta:null,rqd:!1,pk:!1,ai:!1,cdf:null,un:!1,dtx:"specificType"},e),this.newColumn.dtxp=this.sqlUi.getDefaultLengthForDatatype(this.newColumn.dt),this.newColumn.dtxs=this.sqlUi.getDefaultScaleForDatatype(this.newColumn.dt);var t,n=[l.a.MultiSelect,l.a.SingleSelect];(this.column&&n.includes(this.newColumn.uidt)&&n.includes(this.column.uidt)&&(this.newColumn.dtxp=this.column.dtxp),_.includes(this.newColumn.uidt)&&(this.newColumn.meta={validate:this.newColumn.meta&&this.newColumn.meta.validate}),this.isCurrency)&&((null===(t=this.column)||void 0===t?void 0:t.uidt)===l.a.Currency?(this.newColumn.dtxp=this.column.dtxp,this.newColumn.dtxs=this.column.dtxs):(this.newColumn.dtxp=19,this.newColumn.dtxs=2));this.newColumn.altered=this.newColumn.altered||2},focusInput:function(){var e=this;setTimeout((function(){if(e.$refs.column&&e.$refs.column.$el){var t=e.$refs.column.$el.querySelector("input");t.focus(),t.select()}}),100)},deleteRelation:function(){var e=arguments,t=this;return Object(i.a)(regeneratorRuntime.mark((function n(){var a;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(a=e.length>0&&void 0!==e[0]?e[0]:"",e.length>1?e[1]:void 0,n.prev=2,"showDialog"!==a){n.next=7;break}t.relationDeleteDlg=!0,n.next=18;break;case 7:if("hideDialog"!==a){n.next=11;break}t.relationDeleteDlg=!1,n.next=18;break;case 11:return n.next=13,t.$store.dispatch("sqlMgr/ActSqlOpPlus",[{env:t.nodes.env,dbAlias:t.nodes.dbAlias},"virtual"===t.relation.type?"xcVirtualRelationDelete":"relationDelete",{childColumn:t.relation.column_name,childTable:t.nodes.table_name,parentTable:t.relation.rtn,parentColumn:t.relation.rcn}]);case 13:n.sent,t.relationDeleteDlg=!1,t.relation=null,t.$toast.success("Foreign Key deleted successfully").goAway(3e3),t.$emit("onRelationDelete");case 18:n.next=25;break;case 20:throw n.prev=20,n.t0=n.catch(2),console.log(n.t0),t.$toast.error("Foreign key relation delete failed"+n.t0).goAway(3e3),n.t0;case 25:case"end":return n.stop()}}),n,null,[[2,20]])})))()}}},k=(n(943),n(191)),O=n(210),S=n.n(O),M=n(1264),j=n(605),D=n(354),$=n(372),L=n(941),T=n(688),R=n(617),A=n(1012),P=n(510),E=n(904),N=n(596),V=n(305),I=n(1094),F=n(717),U=Object(k.a)(C,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-card",{staticClass:"card nc-col-create-or-edit-card",staticStyle:{overflow:"auto"},attrs:{"min-width":"300px","max-width":"400px","max-height":"95vh"}},[n("v-form",{ref:"form",model:{value:e.valid,callback:function(t){e.valid=t},expression:"valid"}},[n("v-container",{attrs:{fluid:""},on:{click:function(e){e.stopPropagation(),e.preventDefault()}}},[n("v-row",[n("v-col",{staticClass:"mt-2",attrs:{cols:"12"}},[n("v-text-field",{ref:"column",staticClass:"caption nc-column-name-input",attrs:{"hide-details":"auto",color:"primary",rules:[function(e){return!!e||"Required"},function(t){return!e.meta||!e.meta.columns||e.meta.columns.every((function(n){return e.column&&(n.column_name||"").toLowerCase()===(e.column.column_name||"").toLowerCase()||(t||"").toLowerCase()!==(n.column_name||"").toLowerCase()&&(t||"").toLowerCase()!==(n.title||"").toLowerCase()}))||"Duplicate column name"},e.validateColumnName],label:e.$t("labels.columnName"),dense:"",outlined:""},on:{input:function(t){e.newColumn.altered=e.newColumn.altered||8},keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.save.apply(null,arguments)}},model:{value:e.newColumn.column_name,callback:function(t){e.$set(e.newColumn,"column_name",t)},expression:"newColumn.column_name"}})],1),e._v(" "),n("v-container",{class:{editDisabled:e.isEditDisabled},attrs:{fluid:""}},[n("v-row",[e.relation?n("v-col",{attrs:{cols:"12"}},[n("div",{staticClass:"caption"},[n("p",{staticClass:"mb-1"},[e._v("\n                    Foreign Key\n                  ")]),e._v(" "),n("v-icon",{staticClass:"mt-n1",attrs:{small:""}},[e._v("\n                    mdi-table\n                  ")]),e._v(" "),n("span",{staticClass:"text-capitalize font-weight-bold body-1"},[e._v("\n                    "+e._s(e.relation._rtn))]),e._v(" "),n("v-icon",{directives:[{name:"ge",rawName:"v-ge",value:["columns","fk-delete"],expression:"['columns', 'fk-delete']"}],staticClass:"ml-3 mt-n1",attrs:{small:"",color:"error"},on:{click:function(t){return e.deleteRelation("showDialog",e.column)}}},[e._v("\n                    mdi-delete-forever\n                  ")]),e._v(" "),"virtual"===e.relation.type?n("span",{staticClass:"caption"},[e._v("(v)")]):e._e()],1)]):[n("v-col",{attrs:{cols:"12"}},[n("v-autocomplete",{staticClass:"caption ui-type nc-ui-dt-dropdown",class:{"primary lighten-5":e.newColumn.uidt},attrs:{"hide-details":"","item-value":"name","item-text":"name",label:e.$t("labels.columnType"),dense:"",outlined:"",items:e.uiTypes},on:{change:e.onUiOrIdTypeChange},scopedSlots:e._u([{key:"selection",fn:function(t){var a=t.item;return[n("div",[n("v-icon",{staticClass:"mr-1",attrs:{color:"grey darken-4",small:""}},[e._v("\n                          "+e._s(a.icon)+"\n                        ")]),e._v(" "),n("span",{staticClass:"caption grey--text text--darken-4"},[e._v("\n                          "+e._s(a.name))])],1)]}},{key:"item",fn:function(t){var a=t.item;return[n("div",{staticClass:"caption"},[n("v-icon",{staticClass:"mr-1",attrs:{small:""}},[e._v("\n                          "+e._s(a.icon)+"\n                        ")]),e._v("\n                        "+e._s(a.name)+"\n                      ")],1)]}}]),model:{value:e.newColumn.uidt,callback:function(t){e.$set(e.newColumn,"uidt",t)},expression:"newColumn.uidt"}}),e._v(" "),e.column&&"SingleSelect"===e.newColumn.uidt&&"MultiSelect"===e.column.uidt?n("v-alert",{staticClass:"caption warning--text mt-2 mb-n4 pa-1",attrs:{dense:"",type:"warning",outlined:""},scopedSlots:e._u([{key:"prepend",fn:function(){return[n("v-icon",{staticClass:"mx-2",attrs:{small:"",color:"warning"}},[e._v("\n                        mdi-alert-outline\n                      ")])]},proxy:!0}],null,!1,3382623636)},[e._v("\n                    Changing MultiSelect to SingleSelect can lead to errors when\n                    there are multiple values associated with a cell\n                  ")]):e._e()],1),e._v(" "),e.isSelect?n("v-col",{attrs:{cols:"12"}},[n("custom-select-options",{on:{input:function(t){e.newColumn.altered=e.newColumn.altered||2}},model:{value:e.newColumn.dtxp,callback:function(t){e.$set(e.newColumn,"dtxp",t)},expression:"newColumn.dtxp"}})],1):e.isRating?n("v-col",{attrs:{cols:"12"}},[n("rating-options",{attrs:{column:e.newColumn,meta:e.meta},model:{value:e.newColumn.meta,callback:function(t){e.$set(e.newColumn,"meta",t)},expression:"newColumn.meta"}})],1):e.isCheckbox?n("v-col",{attrs:{cols:"12"}},[n("checkbox-options",{attrs:{column:e.newColumn,meta:e.meta},model:{value:e.newColumn.meta,callback:function(t){e.$set(e.newColumn,"meta",t)},expression:"newColumn.meta"}})],1):e.isCurrency?n("currency-options",{attrs:{column:e.newColumn,meta:e.meta},model:{value:e.newColumn.meta,callback:function(t){e.$set(e.newColumn,"meta",t)},expression:"newColumn.meta"}}):e._e(),e._v(" "),e.accordion?n("v-col",{staticClass:"pt-0",class:{"pb-0":e.advanceOptions},attrs:{cols:"12"}},[n("div",{staticClass:"pointer grey--text text-right caption nc-more-options",on:{click:function(t){e.advanceOptions=!e.advanceOptions}}},[e._v("\n                    "+e._s(e.advanceOptions?e.$t("general.hideAll"):e.$t("general.showMore"))+"\n                    "),n("v-icon",{attrs:{"x-small":"",color:"grey"}},[e._v("\n                      mdi-"+e._s(e.advanceOptions?"minus":"plus")+"-circle-outline\n                    ")])],1)]):e._e(),e._v(" "),n("v-col",{directives:[{name:"show",rawName:"v-show",value:e.advanceOptions||!e.accordion,expression:"advanceOptions || !accordion"}],attrs:{cols:"12"}},[n("v-row",[e.newColumn.meta&&e.columnToValidate.includes(e.newColumn.uidt)?n("v-col",{staticClass:"pt-0 pb-0",attrs:{cols:"12"}},[n("v-checkbox",{staticClass:"mt-0",attrs:{dense:"","hide-details":"",label:"Accept only valid "+e.newColumn.uidt},model:{value:e.newColumn.meta.validate,callback:function(t){e.$set(e.newColumn.meta,"validate",t)},expression:"newColumn.meta.validate"}})],1):e._e(),e._v(" "),"Formula"===e.newColumn.uidt?[n("v-col",{attrs:{cols:"12"}},[n("formula-options",e._g({ref:"formula",attrs:{column:e.newColumn,nodes:e.nodes,meta:e.meta,"is-s-q-lite":e.isSQLite,alias:e.newColumn.column_name,"is-m-s-s-q-l":e.isMSSQL,"sql-ui":e.sqlUi}},e.$listeners))],1)]:"Duration"===e.newColumn.uidt?[n("v-col",{attrs:{cols:"12"}},[n("duration-options",{attrs:{column:e.newColumn,meta:e.meta},model:{value:e.newColumn.meta,callback:function(t){e.$set(e.newColumn,"meta",t)},expression:"newColumn.meta"}})],1)]:[e.isLookup?n("v-col",{attrs:{cols:"12"}},[n("lookup-options",e._g({ref:"lookup",attrs:{column:e.newColumn,nodes:e.nodes,meta:e.meta,"is-s-q-lite":e.isSQLite,alias:e.newColumn.column_name,"is-m-s-s-q-l":e.isMSSQL}},e.$listeners))],1):e._e(),e._v(" "),e.isRollup?n("v-col",{attrs:{cols:"12"}},[n("rollup-options",e._g({ref:"rollup",attrs:{column:e.newColumn,nodes:e.nodes,meta:e.meta,"is-s-q-lite":e.isSQLite,alias:e.newColumn.column_name,"is-m-s-s-q-l":e.isMSSQL}},e.$listeners))],1):e._e(),e._v(" "),e.isLinkToAnotherRecord?n("v-col",{attrs:{cols:"12"}},[n("linked-to-another-options",{ref:"relation",attrs:{column:e.newColumn,nodes:e.nodes,meta:e.meta,"is-s-q-lite":e.isSQLite,alias:e.newColumn.column_name,"is-m-s-s-q-l":e.isMSSQL},on:{onColumnSelect:e.onRelColumnSelect}})],1):e._e(),e._v(" "),e.isRelation?n("v-col",{attrs:{cols:"12"}},[n("relation-options",{ref:"relation",attrs:{alias:e.alias,column:e.newColumn,nodes:e.nodes,"is-m-s-s-q-l":e.isMSSQL,"is-s-q-lite":e.isSQLite},on:{onColumnSelect:e.onRelColumnSelect}})],1):e._e(),e._v(" "),e.newColumn.column_name&&e.newColumn.uidt&&!e.isVirtual?[n("v-col",{attrs:{cols:"12"}},[n("v-container",{staticClass:"wrapper",attrs:{fluid:""}},[n("v-row",[n("v-col",{attrs:{cols:"12"}},[n("div",{staticClass:"d-flex justify-space-between caption"},[n("v-tooltip",{attrs:{bottom:"","z-index":"99999"},scopedSlots:e._u([{key:"activator",fn:function(t){var a=t.on;return[n("div",e._g({},a),[n("v-checkbox",{staticClass:"mr-2 mt-0",attrs:{disabled:e.newColumn.pk||!e.sqlUi.columnEditable(e.newColumn),dense:"","hide-details":"",label:"NN"},on:{change:function(t){e.newColumn.altered=e.newColumn.altered||2}},scopedSlots:e._u([{key:"label",fn:function(){return[n("span",{staticClass:"caption font-weight-bold"},[e._v("NN")])]},proxy:!0}],null,!0),model:{value:e.newColumn.rqd,callback:function(t){e.$set(e.newColumn,"rqd",t)},expression:"newColumn.rqd"}})],1)]}}],null,!1,1754239506)},[e._v(" "),n("span",[e._v("Not Null")])]),e._v(" "),n("v-tooltip",{attrs:{bottom:"","z-index":"99999"},scopedSlots:e._u([{key:"activator",fn:function(t){var a=t.on;return[n("div",e._g({},a),[n("v-checkbox",{staticClass:"mr-2 mt-0",attrs:{disabled:!e.sqlUi.columnEditable(e.newColumn),dense:"","hide-details":"",label:"PK"},on:{change:function(t){e.newColumn.altered=e.newColumn.altered||2}},scopedSlots:e._u([{key:"label",fn:function(){return[n("span",{staticClass:"caption font-weight-bold"},[e._v("PK")])]},proxy:!0}],null,!0),model:{value:e.newColumn.pk,callback:function(t){e.$set(e.newColumn,"pk",t)},expression:"newColumn.pk"}})],1)]}}],null,!1,1089689723)},[e._v(" "),n("span",[e._v("Primary Key")])]),e._v(" "),n("v-tooltip",{attrs:{bottom:"","z-index":"99999"},scopedSlots:e._u([{key:"activator",fn:function(t){var a=t.on;return[n("div",e._g({},a),[n("v-checkbox",{staticClass:"mr-2 mt-0",attrs:{disabled:e.sqlUi.colPropUNDisabled(e.newColumn)||!e.sqlUi.columnEditable(e.newColumn),dense:"","hide-details":"",label:"AI"},on:{change:function(t){e.newColumn.altered=e.newColumn.altered||2}},scopedSlots:e._u([{key:"label",fn:function(){return[n("span",{staticClass:"caption font-weight-bold"},[e._v("AI")])]},proxy:!0}],null,!0),model:{value:e.newColumn.ai,callback:function(t){e.$set(e.newColumn,"ai",t)},expression:"newColumn.ai"}})],1)]}}],null,!1,1356251075)},[e._v(" "),n("span",[e._v("Auto Increment")])]),e._v(" "),n("v-tooltip",{attrs:{bottom:"","z-index":"99999"},scopedSlots:e._u([{key:"activator",fn:function(t){var a=t.on;return[n("div",e._g({},a),[n("v-checkbox",{staticClass:"mr-2 mt-0",attrs:{dense:"","hide-details":"",label:"UN",disabled:e.sqlUi.colPropUNDisabled(e.newColumn)||!e.sqlUi.columnEditable(e.newColumn)},on:{change:function(t){e.newColumn.altered=e.newColumn.altered||2}},scopedSlots:e._u([{key:"label",fn:function(){return[n("span",{staticClass:"caption font-weight-bold"},[e._v("UN")])]},proxy:!0}],null,!0),model:{value:e.newColumn.un,callback:function(t){e.$set(e.newColumn,"un",t)},expression:"newColumn.un"}})],1)]}}],null,!1,3514413264)},[e._v(" "),n("span",[e._v("Unsigned")])]),e._v(" "),n("v-tooltip",{attrs:{bottom:"","z-index":"99999"},scopedSlots:e._u([{key:"activator",fn:function(t){var a=t.on;return[n("div",e._g({},a),[n("v-checkbox",{staticClass:"mr-2 mt-0",attrs:{dense:"","hide-details":"",label:"UN",disabled:e.sqlUi.colPropAuDisabled(e.newColumn)||!e.sqlUi.columnEditable(e.newColumn)},on:{change:function(t){e.newColumn.altered=e.newColumn.altered||2}},scopedSlots:e._u([{key:"label",fn:function(){return[n("span",{staticClass:"caption font-weight-bold"},[e._v("AU")])]},proxy:!0}],null,!0),model:{value:e.newColumn.au,callback:function(t){e.$set(e.newColumn,"au",t)},expression:"newColumn.au"}})],1)]}}],null,!1,1694540543)},[e._v(" "),n("span",[e._v("Auto Update Timestamp")])])],1)]),e._v(" "),n("v-col",{attrs:{cols:"12"}},[n("v-autocomplete",{staticClass:"caption data-type",attrs:{"hide-details":"",label:e.$t("labels.databaseType"),dense:"",outlined:"",items:e.dataTypes},on:{change:e.onDataTypeChange},model:{value:e.newColumn.dt,callback:function(t){e.$set(e.newColumn,"dt",t)},expression:"newColumn.dt"}})],1),e._v(" "),n("v-col",{attrs:{cols:e.sqlUi.showScale(e.newColumn)&&!e.isSelect?6:12}},[e.isSelect?e._e():n("v-text-field",{staticClass:"caption",attrs:{dense:"",disabled:e.sqlUi.getDefaultLengthIsDisabled(e.newColumn.dt)||!e.sqlUi.columnEditable(e.newColumn),label:e.$t("labels.lengthValue"),outlined:"","hide-details":""},on:{input:function(t){e.newColumn.altered=e.newColumn.altered||2}},model:{value:e.newColumn.dtxp,callback:function(t){e.$set(e.newColumn,"dtxp",t)},expression:"newColumn.dtxp"}})],1),e._v(" "),e.sqlUi.showScale(e.newColumn)?n("v-col",{attrs:{cols:e.isSelect?12:6}},[n("v-text-field",{staticClass:"caption",attrs:{dense:"",disabled:!e.sqlUi.columnEditable(e.newColumn),label:"Scale",outlined:"","hide-details":""},on:{input:function(t){e.newColumn.altered=e.newColumn.altered||2}},model:{value:e.newColumn.dtxs,callback:function(t){e.$set(e.newColumn,"dtxs",t)},expression:"newColumn.dtxs"}})],1):e._e(),e._v(" "),n("v-col",{attrs:{cols:"12"}},[n("v-textarea",{staticClass:"caption",attrs:{label:e.$t("placeholder.defaultValue"),hint:e.sqlUi.getDefaultValueForDatatype(e.newColumn.dt),"persistent-hint":"",rows:"3",outlined:"",dense:""},on:{input:function(t){e.newColumn.altered=e.newColumn.altered||2,e.newColumn.cdf=e.newColumn.cdf||null}},model:{value:e.newColumn.cdf,callback:function(t){e.$set(e.newColumn,"cdf",t)},expression:"newColumn.cdf"}})],1)],1)],1)],1)]:e._e()]],2)],1)],e._v(" "),n("div",{staticClass:"disabled-info",class:{"d-none":!e.isEditDisabled}},[n("v-alert",{staticClass:"caption mx-2",attrs:{dense:"",type:"warning",icon:"info",outlined:""}},[e._v("\n                  This spreadsheet is connected to an SQLite DB."),n("br"),e._v("\n                  For production please see\n                  "),n("a",{attrs:{href:"https://github.com/nocodb/nocodb#production-setup",target:"_blank"}},[e._v("here")]),e._v(".\n                ")])],1)],2)],1),e._v(" "),n("v-col",{staticClass:"d-flex pt-0",attrs:{cols:"12"}},[n("v-spacer"),e._v(" "),n("v-btn",{attrs:{small:"",outlined:""},on:{click:e.close}},[e._v("\n              "+e._s(e.$t("general.cancel"))+"\n            ")]),e._v(" "),n("v-btn",{attrs:{small:"",color:"primary",disabled:!e.valid},on:{click:e.save}},[e._v("\n              "+e._s(e.$t("general.save"))+"\n            ")])],1)],1)],1)],1),e._v(" "),e.relationDeleteDlg?n("dlg-label-submit-cancel",{attrs:{type:"primary","dialog-show":e.relationDeleteDlg,"actions-mtd":e.deleteRelation,heading:"Click Submit to Delete the Relation"}}):e._e()],1)}),[],!1,null,"036d6618",null);t.default=U.exports;S()(U,{VAlert:M.a,VAutocomplete:j.a,VBtn:D.a,VCard:$.a,VCheckbox:L.a,VCol:T.a,VContainer:R.a,VForm:A.a,VIcon:P.a,VRow:E.a,VSpacer:N.a,VTextField:V.a,VTextarea:I.a,VTooltip:F.a})},137:function(e,t,n){"use strict";n.r(t);var a=n(229),i=n(316),o=(n(230),n(242)),r=n(104),l=n(301),s=["colOptions"],c=["colOptions"],u={name:"EditVirtualColumn",components:{FormulaOptions:r.default},props:{nodes:Object,meta:Object,value:Boolean,column:Object,sqlUi:[Function,Object]},data:function(){return{valid:!1,newColumn:{},UITypes:o.f}},watch:{column:function(e){var t=e.colOptions,n=Object(i.a)(e,s);this.newColumn=n,n.uidt===o.f.Formula&&(this.newColumn.formula_raw=Object(o.l)(t.formula,this.meta.columns,t.formula_raw))}},created:function(){return Object(a.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})))()},mounted:function(){var e=this.column,t=e.colOptions,n=Object(i.a)(e,c);this.newColumn=n,n.uidt===o.f.Formula&&(this.newColumn.formula_raw=Object(o.l)(t.formula,this.meta.columns,t.formula_raw))},methods:{close:function(){this.$emit("input",!1),this.newColumn={}},save:function(){var e=this;return Object(a.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.$api.dbTableColumn.update(e.column.id,e.newColumn);case 3:t.next=9;break;case 5:t.prev=5,t.t0=t.catch(0),console.log(e._extractSdkResponseErrorMsg(t.t0)),e.$toast.error("Failed to update column alias").goAway(3e3);case 9:e.$emit("saved",e.newColumn.title,e.column.title),e.$emit("input",!1);case 11:case"end":return t.stop()}}),t,null,[[0,5]])})))()},focusInput:function(){var e=this;setTimeout((function(){e.$refs.column&&e.$refs.column.$el&&e.$refs.column.$el.querySelector("input").focus()}),100)},validateColumnName:function(e){return!!(this.column.hm||this.column.mm||this.column.bt||this.column.lk)||Object(l.g)(e,this.$store.getters["project/GtrProjectIsGraphql"])}}},d=(n(947),n(191)),m=n(210),p=n.n(m),f=n(354),v=n(372),h=n(688),b=n(617),g=n(1012),y=n(904),x=n(596),w=n(305),_=Object(d.a)(u,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-card",{staticClass:" card nc-col-create-or-edit-card",staticStyle:{overflow:"auto"},attrs:{"min-width":"300px","max-width":"400px","max-height":"95vh"}},[n("v-form",{on:{submit:function(t){return t.preventDefault(),e.save.apply(null,arguments)}},model:{value:e.valid,callback:function(t){e.valid=t},expression:"valid"}},[n("v-container",{attrs:{fluid:""},on:{click:function(e){e.stopPropagation()}}},[n("v-row",[n("v-col",{attrs:{cols:"12"}},[n("v-text-field",{ref:"column",staticClass:"caption nc-column-name-input",attrs:{"hide-details":"auto",color:"primary",label:e.$t("labels.columnName"),rules:[function(e){return!!e||"Required"},function(t){return!e.meta||!e.meta.columns||!e.column||e.meta.columns.every((function(n){return e.column===n||t!==n.title}))||"Duplicate column name"},e.validateColumnName],dense:"",outlined:""},model:{value:e.newColumn.title,callback:function(t){e.$set(e.newColumn,"title",t)},expression:"newColumn.title"}})],1),e._v(" "),e.newColumn&&e.newColumn.uidt===e.UITypes.Formula?n("v-col",{attrs:{cols:"12"}},[n("formula-options",{ref:"formula",attrs:{column:e.column,"new-column":e.newColumn,nodes:e.nodes,meta:e.meta,alias:e.newColumn.title,"sql-ui":e.sqlUi},model:{value:e.newColumn.formula_raw,callback:function(t){e.$set(e.newColumn,"formula_raw",t)},expression:"newColumn.formula_raw"}})],1):e._e(),e._v(" "),n("v-col",{staticClass:"d-flex pt-0",attrs:{cols:"12"}},[n("v-spacer"),e._v(" "),n("v-btn",{attrs:{"x-small":"",outlined:""},on:{click:e.close}},[e._v("\n            "+e._s(e.$t("general.cancel"))+"\n          ")]),e._v(" "),n("v-btn",{directives:[{name:"t",rawName:"v-t",value:["c:column:edit"],expression:"['c:column:edit']"}],attrs:{"x-small":"",color:"primary",disabled:!e.valid},on:{click:e.save}},[e._v("\n            "+e._s(e.$t("general.save"))+"\n          ")])],1)],1)],1)],1)],1)}),[],!1,null,"1224883c",null);t.default=_.exports;p()(_,{VBtn:f.a,VCard:v.a,VCol:h.a,VContainer:b.a,VForm:g.a,VRow:y.a,VSpacer:x.a,VTextField:w.a})},138:function(e,t,n){"use strict";n.r(t);var a=n(295),i=n.n(a),o={name:"DatePickerCell",props:{value:[String,Date]},computed:{localState:{get:function(){if(this.value&&i()(this.value).isValid())return(/^\d+$/.test(this.value)?i()(+this.value):i()(this.value)).format("YYYY-MM-DD")},set:function(e){i()(e).isValid()&&this.$emit("input",e&&i()(e).format("YYYY-MM-DD"))}},date:function(){return!this.value||this.localState?this.localState:"Invalid Date"},parentListeners:function(){var e={};return this.$listeners.blur&&(e.blur=this.$listeners.blur),this.$listeners.focus&&(e.focus=this.$listeners.focus),e}},mounted:function(){this.$el&&this.$el.$el&&this.$el.$el.focus()}},r=(n(949),n(191)),l=n(210),s=n.n(l),c=n(1289),u=n(335),d=Object(r.a)(o,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-menu",{scopedSlots:e._u([{key:"activator",fn:function(t){var a=t.on;return[n("input",e._g({staticClass:"value",domProps:{value:e.date}},a))]}}])},[e._v(" "),n("v-date-picker",e._g({attrs:{flat:""},nativeOn:{click:function(e){e.stopPropagation()}},model:{value:e.localState,callback:function(t){e.localState=t},expression:"localState"}},e.parentListeners))],1)}),[],!1,null,"1d852fbe",null);t.default=d.exports;s()(d,{VDatePicker:c.a,VMenu:u.a})},139:function(e,t,n){"use strict";n.r(t);var a=n(301),i={name:"EditableUrlCell",props:{value:String,column:Object},computed:{localState:{get:function(){return this.value},set:function(e){this.column&&this.column.meta&&this.column.meta.validate&&!Object(a.e)(e)||this.$emit("input",e)}},parentListeners:function(){var e={};return this.$listeners.blur&&(e.blur=this.$listeners.blur),this.$listeners.focus&&(e.focus=this.$listeners.focus),this.$listeners.cancel&&(e.cancel=this.$listeners.cancel),e}},mounted:function(){this.$el.focus()}},o=(n(951),n(191)),r=Object(o.a)(i,(function(){var e=this,t=e.$createElement;return(e._self._c||t)("input",e._g({directives:[{name:"model",rawName:"v-model",value:e.localState,expression:"localState"}],domProps:{value:e.localState},on:{input:function(t){t.target.composing||(e.localState=t.target.value)}}},e.parentListeners))}),[],!1,null,"25494a1e",null);t.default=r.exports},140:function(e,t,n){"use strict";n.r(t);var a={name:"JsonEditableCell",components:{MonacoJsonObjectEditor:n(691).a},props:{value:[String,Object],isForm:Boolean},data:function(){return{localState:"",expand:!1,isValid:!0,error:void 0}},computed:{parentListeners:function(){var e={};return this.$listeners.blur&&(e.blur=this.$listeners.blur),this.$listeners.focus&&(e.focus=this.$listeners.focus),e}},watch:{value:function(e){try{this.localState="string"==typeof e?JSON.parse(e):e}catch(e){}},localState:function(e){this.isForm&&this.$emit("input",JSON.stringify(e))}},created:function(){try{this.localState="string"==typeof this.value?JSON.parse(this.value):this.value}catch(e){}},mounted:function(){},methods:{save:function(){this.expand=!1,this.$emit("input",JSON.stringify(this.localState))},validate:function(e,t){this.isValid=e,this.error=t}}},i=(n(953),n(191)),o=n(210),r=n.n(o),l=n(354),s=n(674),c=n(510),u=n(596),d=Object(i.a)(a,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n(e.expand?"v-dialog":"div",{tag:"v-dialog",staticClass:"cell-container",attrs:{"max-width":"800px"},on:{keydown:function(t){if(!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter"))return null;t.stopPropagation()}},model:{value:e.expand,callback:function(t){e.expand=t},expression:"expand"}},[n("div",{staticClass:"d-flex pa-1 ",class:{backgroundColor:e.expand}},[n("v-spacer"),e._v(" "),n("v-icon",{staticClass:"mr-2",attrs:{small:""},on:{click:function(t){e.expand=!e.expand}}},[e._v("\n      "+e._s(e.expand?"mdi-arrow-collapse":"mdi-arrow-expand")+"\n    ")]),e._v(" "),e.isForm?e.expand?n("v-btn",{attrs:{"x-small":""},on:{click:function(t){e.expand=!1}}},[e._v("\n      "+e._s(e.$t("general.close"))+"\n    ")]):e._e():[n("v-btn",{staticClass:"mr-1",attrs:{outlined:"","x-small":""},on:{click:function(t){return e.$emit("cancel")}}},[e._v("\n        "+e._s(e.$t("general.cancel"))+"\n      ")]),e._v(" "),n("v-btn",{attrs:{"x-small":"",color:"primary",disabled:!e.isValid},on:{click:e.save}},[e._v("\n        "+e._s(e.$t("general.save"))+"\n      ")])]],2),e._v(" "),e.expand?n("monaco-json-object-editor",{staticClass:"text-left caption",staticStyle:{width:"300px","min-height":"min(600px,80vh)","min-width":"100%"},on:{validate:e.validate},model:{value:e.localState,callback:function(t){e.localState=t},expression:"localState"}}):n("monaco-json-object-editor",{staticClass:"text-left caption",staticStyle:{width:"300px","min-height":"200px","min-width":"100%"},on:{validate:e.validate},model:{value:e.localState,callback:function(t){e.localState=t},expression:"localState"}}),e._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:e.error,expression:"error"}],staticClass:"px-2 py-1 text-left caption error--text"},[e._v("\n    "+e._s(e.error)+"\n  ")])],1)}),[],!1,null,"2848aa86",null);t.default=d.exports;r()(d,{VBtn:l.a,VDialog:s.a,VIcon:c.a,VSpacer:u.a})},141:function(e,t,n){"use strict";n.r(t);n(182);var a={name:"TextCell",props:{value:[String,Object,Number,Boolean,Array]},computed:{localState:{get:function(){return this.value},set:function(e){this.$emit("input",e)}},parentListeners:function(){var e={};return this.$listeners.blur&&(e.blur=this.$listeners.blur),this.$listeners.focus&&(e.focus=this.$listeners.focus),this.$listeners.cancel&&(e.cancel=this.$listeners.cancel),e}},mounted:function(){this.$el.focus()}},i=(n(955),n(191)),o=Object(i.a)(a,(function(){var e=this,t=e.$createElement;return(e._self._c||t)("input",e._g({directives:[{name:"model",rawName:"v-model",value:e.localState,expression:"localState"}],domProps:{value:e.localState},on:{input:function(t){t.target.composing||(e.localState=t.target.value)}}},e.parentListeners))}),[],!1,null,"0f21b1c8",null);t.default=o.exports},142:function(e,t,n){"use strict";n.r(t);n(182);var a=n(295),i=n.n(a),o=n(415),r=n.n(o);i.a.extend(r.a);var l={name:"DateTimePickerCell",props:{value:[String,Date,Number],ignoreFocus:Boolean},data:function(){return{showMessage:!1}},computed:{isMysql:function(){return["mysql","mysql2"].indexOf(this.$store.getters["project/GtrClientType"])},localState:{get:function(){if(!this.value)return this.value;var e=/^\d+$/.test(this.value)?i()(+this.value):i()(this.value);if(e.isValid())return this.showMessage=!1,e.format("YYYY-MM-DD HH:mm");this.showMessage=!0},set:function(e){this.isMysql?this.$emit("input",e&&i()(e).format("YYYY-MM-DD HH:mm:ss")):this.$emit("input",e&&i()(e).format("YYYY-MM-DD HH:mm:ssZ"))}},parentListeners:function(){var e={};return this.$listeners.blur,this.$listeners.focus&&(e.focus=this.$listeners.focus),e}},mounted:function(){var e=this;this.$refs.picker&&this.$refs.picker.$children&&this.$refs.picker.$children[0]&&this.$refs.picker.$children[0].$on("click:outside",(function(){e.$refs.picker.okHandler()})),this.ignoreFocus||(this.$refs.picker.display=!0)}},s=(n(957),n(191)),c=Object(s.a)(l,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("div",{directives:[{name:"show",rawName:"v-show",value:!e.showMessage,expression:"!showMessage"}]},[n("v-datetime-picker",e._g({ref:"picker",staticClass:"caption xc-date-time-picker",attrs:{"text-field-props":{class:"caption mt-0 pt-0",flat:!0,solo:!0,dense:!0,hideDetails:!0},"time-picker-props":{format:"24hr"}},model:{value:e.localState,callback:function(t){e.localState=t},expression:"localState"}},e.parentListeners))],1),e._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:e.showMessage,expression:"showMessage"}],staticClass:"edit-warning",on:{dblclick:function(t){e.$refs.picker.display=!0}}},[e._v("\n    ERR: Couldn't parse "+e._s(this.value)+"\n  ")])])}),[],!1,null,"3be739d6",null);t.default=c.exports},143:function(e,t,n){"use strict";n.r(t);var a={name:"TextAreaCell",props:{value:String},computed:{localState:{get:function(){return this.value},set:function(e){this.$emit("input",e)}},parentListeners:function(){var e={};return this.$listeners.blur&&(e.blur=this.$listeners.blur),this.$listeners.focus&&(e.focus=this.$listeners.focus),e}},created:function(){this.localState=this.value},mounted:function(){this.$refs.textarea&&this.$refs.textarea.focus()}},i=(n(959),n(191)),o=Object(i.a)(a,(function(){var e=this,t=e.$createElement;return(e._self._c||t)("textarea",e._g({directives:[{name:"model",rawName:"v-model",value:e.localState,expression:"localState"}],ref:"textarea",attrs:{rows:"4"},domProps:{value:e.localState},on:{keydown:[function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:t.altKey?void t.stopPropagation():null},function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:t.shiftKey?void t.stopPropagation():null}],input:function(t){t.target.composing||(e.localState=t.target.value)}}},e.parentListeners))}),[],!1,null,"c02fe110",null);t.default=o.exports},144:function(e,t,n){"use strict";n.r(t);n(257),n(201),n(228);var a={name:"EnumListEditableCell",mixins:[n(463).a],props:{value:String,column:Object,isForm:Boolean},computed:{localState:{get:function(){return this.value&&this.value.replace(/\\'/g,"'").replace(/^'|'$/g,"")},set:function(e){this.$emit("input",e)}},enumValues:function(){return this.column&&this.column.dtxp?this.column.dtxp.split(",").map((function(e){return e.replace(/\\'/g,"'").replace(/^'|'$/g,"")})):[]},parentListeners:function(){var e={};return this.$listeners.blur&&(e.blur=this.$listeners.blur),this.$listeners.focus&&(e.focus=this.$listeners.focus),e}},mounted:function(){}},i=(n(961),n(191)),o=n(210),r=n.n(o),l=n(308),s=n(510),c=n(419),u=Object(i.a)(a,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-select",e._g({staticClass:"mt-0",attrs:{solo:"",dense:"",flat:"",items:e.enumValues,"hide-details":"",clearable:!e.column.rqd},scopedSlots:e._u([{key:"selection",fn:function(t){var a=t.item;return[n("div",{staticClass:"d-100",class:{"text-center":!e.isForm}},[n("v-chip",{staticClass:"ma-1",attrs:{small:"",color:e.colors[e.enumValues.indexOf(a)%e.colors.length]}},[e._v("\n        "+e._s(a)+"\n      ")])],1)]}},{key:"item",fn:function(t){var a=t.item;return[n("v-chip",{attrs:{small:"",color:e.colors[e.enumValues.indexOf(a)%e.colors.length]}},[e._v("\n      "+e._s(a)+"\n    ")])]}},{key:"append",fn:function(){return[n("v-icon",{staticClass:"mt-1",attrs:{small:""}},[e._v("\n      mdi-menu-down\n    ")])]},proxy:!0}]),model:{value:e.localState,callback:function(t){e.localState=t},expression:"localState"}},e.parentListeners))}),[],!1,null,"b1bfaf16",null);t.default=u.exports;r()(u,{VChip:l.a,VIcon:s.a,VSelect:c.a})},145:function(e,t,n){"use strict";n.r(t);n(182);var a={name:"IntegerCell",props:{value:[String,Number]},computed:{localState:{get:function(){return this.value},set:function(e){this.$emit("input",parseInt(e,10))}},parentListeners:function(){var e={};return this.$listeners.blur&&(e.blur=this.$listeners.blur),this.$listeners.focus&&(e.focus=this.$listeners.focus),e}},mounted:function(){this.$el.focus()}},i=(n(963),n(191)),o=Object(i.a)(a,(function(){var e=this,t=e.$createElement;return(e._self._c||t)("input",e._g({directives:[{name:"model",rawName:"v-model",value:e.localState,expression:"localState"}],attrs:{type:"number"},domProps:{value:e.localState},on:{input:function(t){t.target.composing||(e.localState=t.target.value)}}},e.parentListeners))}),[],!1,null,"6599487a",null);t.default=o.exports},146:function(e,t,n){"use strict";n.r(t);n(182);var a={name:"FloatCell",props:{value:[String,Number]},computed:{localState:{get:function(){return this.value},set:function(e){this.$emit("input",+e)}},parentListeners:function(){var e={};return this.$listeners.blur&&(e.blur=this.$listeners.blur),this.$listeners.focus&&(e.focus=this.$listeners.focus),e}},mounted:function(){this.$el.focus()}},i=(n(965),n(191)),o=Object(i.a)(a,(function(){var e=this,t=e.$createElement;return(e._self._c||t)("input",e._g({directives:[{name:"model",rawName:"v-model",value:e.localState,expression:"localState"}],attrs:{type:"number"},domProps:{value:e.localState},on:{input:function(t){t.target.composing||(e.localState=t.target.value)}}},e.parentListeners))}),[],!1,null,"142c7366",null);t.default=o.exports},147:function(e,t,n){"use strict";n.r(t);var a=n(295),i=n.n(a),o={name:"TimePickerCell",props:{value:[String,Date]},computed:{isMysql:function(){return["mysql","mysql2"].indexOf(this.$store.getters["project/GtrClientType"])},localState:{get:function(){if(!this.value)return this.value;var e=i()(this.value);return e.isValid()||(e=i()(this.value,"HH:mm:ss")),e.isValid()||(e=i()("1999-01-01 ".concat(this.value))),e.isValid()?e.format("HH:mm:ss"):this.value},set:function(e){var t=i()("1999-01-01 ".concat(e,":00"));t.isValid()&&(this.isMysql?this.$emit("input",t.format("YYYY-MM-DD HH:mm:ss")):this.$emit("input",t.format("YYYY-MM-DD HH:mm:ssZ")))}},parentListeners:function(){var e={};return this.$listeners.blur&&(e.blur=this.$listeners.blur),this.$listeners.focus&&(e.focus=this.$listeners.focus),this.$listeners.cancel&&(e.cancel=this.$listeners.cancel),e}},mounted:function(){this.$el&&this.$el.$el&&this.$el.$el.focus()}},r=(n(967),n(191)),l=n(210),s=n.n(l),c=n(354),u=n(335),d=n(1292),m=Object(r.a)(o,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-menu",{scopedSlots:e._u([{key:"activator",fn:function(t){var a=t.on;return[n("input",e._g({directives:[{name:"model",rawName:"v-model",value:e.localState,expression:"localState"}],staticClass:"value",domProps:{value:e.localState},on:{input:function(t){t.target.composing||(e.localState=t.target.value)}}},a))]}}])},[e._v(" "),n("div",{staticClass:"d-flex flex-column justify-center",on:{click:function(e){e.stopPropagation()}}},[n("v-time-picker",e._g({model:{value:e.localState,callback:function(t){e.localState=t},expression:"localState"}},e.parentListeners)),e._v(" "),n("v-btn",{attrs:{small:"",color:"primary"},on:{click:function(t){return e.$emit("save")}}},[e._v("\n      "+e._s(e.$t("general.save"))+"\n    ")])],1)])}),[],!1,null,"7bfa3712",null);t.default=m.exports;s()(m,{VBtn:c.a,VMenu:u.a,VTimePicker:d.a})},148:function(e,t,n){"use strict";n.r(t);n(53),n(54),n(52),n(55),n(56);var a=n(36);n(182);function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}var o={name:"BooleanCell",props:{column:Object,value:[String,Number,Boolean],isForm:Boolean,readOnly:Boolean},computed:{checkedIcon:function(){return this.checkboxMeta&&this.checkboxMeta.icon&&this.checkboxMeta.icon.checked||"mdi-check-bold"},uncheckedIcon:function(){return this.checkboxMeta&&this.checkboxMeta.icon&&this.checkboxMeta.icon.unchecked||"mdi-crop-square"},localState:{get:function(){return this.value},set:function(e){this.$emit("input",e)}},parentListeners:function(){return{}},checkboxMeta:function(){return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){Object(a.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({icon:{checked:"mdi-check-circle-outline",unchecked:"mdi-checkbox-blank-circle-outline"},color:"primary"},this.column&&this.column.meta?this.column.meta:{})}},methods:{toggle:function(){this.localState=!this.localState}}},r=n(191),l=n(210),s=n.n(l),c=n(510),u=Object(r.a)(o,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"d-flex align-center ",class:{"justify-center":!e.isForm,"nc-cell-hover-show":!e.localState}},[n("v-icon",{attrs:{small:"",color:e.checkboxMeta.color},on:{click:e.toggle}},[e._v("\n    "+e._s(e.localState?e.checkedIcon:e.uncheckedIcon)+"\n  ")])],1)}),[],!1,null,"3d95db18",null);t.default=u.exports;s()(u,{VIcon:c.a})},149:function(e,t,n){"use strict";n.r(t);n(201),n(294),n(257),n(52),n(208),n(190);var a={name:"SetListEditableCell",mixins:[n(463).a],props:{value:String,column:Object},computed:{localState:{get:function(){return this.value&&this.value.match(/(?:[^',]|\\')+(?='?(?:,|$))/g).map((function(e){return e.replace(/\\'/g,"'")}))},set:function(e){var t=this;this.$emit("input",e.filter((function(e){return t.setValues.includes(e)})).join(","))}},setValues:function(){return this.column&&this.column.dtxp?this.column.dtxp.match(/(?:[^']|\\')+(?='?(?:,|$))/g).map((function(e){return e.replace(/\\'/g,"'").replace(/^'|'$/g,"")})):[]},parentListeners:function(){var e={};return this.$listeners.blur&&(e.blur=this.$listeners.blur),this.$listeners.focus&&(e.focus=this.$listeners.focus),e}},mounted:function(){}},i=(n(969),n(191)),o=n(210),r=n.n(o),l=n(308),s=n(1095),c=n(510),u=Object(i.a)(a,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("v-combobox",{staticClass:"text-center mt-0 ",attrs:{items:e.setValues,multiple:"",chips:"",flat:"",dense:"",solo:"","hide-details":"","deletable-chips":""},scopedSlots:e._u([{key:"selection",fn:function(t){return[n("v-chip",{key:t.item,staticClass:"ma-1 ",attrs:{small:"",color:e.colors[e.setValues.indexOf(t.item)%e.colors.length]},on:{"click:close":function(e){return t.parent.selectItem(t.item)}}},[e._v("\n        "+e._s(t.item)+"\n      ")])]}},{key:"item",fn:function(t){var a=t.item;return[n("v-chip",{attrs:{small:"",color:e.colors[e.setValues.indexOf(a)%e.colors.length]}},[e._v("\n        "+e._s(a)+"\n      ")])]}},{key:"append",fn:function(){return[n("v-icon",{staticClass:"mt-2",attrs:{small:""}},[e._v("\n        mdi-menu-down\n      ")])]},proxy:!0}]),model:{value:e.localState,callback:function(t){e.localState=t},expression:"localState"}})],1)}),[],!1,null,"230906c0",null);t.default=u.exports;r()(u,{VChip:l.a,VCombobox:s.a,VIcon:c.a})},150:function(e,t,n){"use strict";n.r(t);n(182);var a=n(508),i={name:"DurationCell",props:{column:Object,value:[Number,String],readOnly:Boolean},data:function(){return{showWarningMessage:!1,durationInMS:null,isEdited:!1}},computed:{localState:{get:function(){return Object(a.b)(this.value,this.durationType)},set:function(e){this.isEdited=!0;var t=Object(a.a)(e,this.durationType);t._isValid&&(this.durationInMS=t._sec)}},durationPlaceholder:function(){return a.c[this.durationType].title},durationType:function(){var e,t;return(null===(e=this.column)||void 0===e||null===(t=e.meta)||void 0===t?void 0:t.duration)||0},parentListeners:function(){var e={};return this.$listeners.blur&&(e.blur=this.$listeners.blur),this.$listeners.focus&&(e.focus=this.$listeners.focus),e}},mounted:function(){var e=this;window.addEventListener("keypress",(function(t){e.$refs.durationInput&&e.$refs.durationInput.focus()}))},methods:{checkDurationFormat:function(e){var t=(e=e||window.event).which?e.which:e.keyCode;if(!(t>31&&(t<48||t>57)&&58!==t&&46!==t))return this.showWarningMessage=!1,!0;this.showWarningMessage=!0,e.preventDefault()},onBlur:function(){this.isEdited&&this.$emit("input",this.durationInMS),this.isEdited=!1}}},o=(n(971),n(191)),r=Object(o.a)(i,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"duration-cell-wrapper"},[n("input",e._g({directives:[{name:"model",rawName:"v-model",value:e.localState,expression:"localState"}],ref:"durationInput",attrs:{placeholder:e.durationPlaceholder},domProps:{value:e.localState},on:{blur:e.onBlur,keypress:function(t){return e.checkDurationFormat(t)},keydown:function(t){if(!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter"))return null;e.isEdited&&e.$emit("input",e.durationInMS)},input:function(t){t.target.composing||(e.localState=t.target.value)}}},e.parentListeners)),e._v(" "),1==e.showWarningMessage?n("div",{staticClass:"duration-warning"},[e._v("\n    Please enter a number\n  ")]):e._e()])}),[],!1,null,"6071b89c",null);t.default=r.exports},151:function(e,t,n){"use strict";n.r(t);var a=n(229),i=(n(230),n(242)),o=n(129),r=n(130),l=n(131),s=n(132),c=n(133),u=n(134),d={name:"VirtualCell",components:{RollupCell:o.default,FormulaCell:r.default,LookupCell:s.default,belongsToCell:u.default,manyToManyCell:c.default,hasManyCell:l.default},props:{breadcrumbs:{type:Array,default:function(){return[]}},column:[Object],row:[Object],nodes:[Object],meta:[Object],api:[Object,Function],active:Boolean,sqlUi:[Object,Function],isNew:{type:Boolean,default:!1},isForm:{type:Boolean,default:!1},disabledColumns:Object,hint:String,isLocked:Boolean,required:Boolean,isPublic:Boolean,metas:Object,password:String},computed:{hm:function(){return this.column&&this.column.uidt===i.f.LinkToAnotherRecord&&"hm"===this.column.colOptions.type},bt:function(){return this.column&&(this.column.uidt===i.f.ForeignKey||this.column.uidt===i.f.LinkToAnotherRecord)&&"bt"===this.column.colOptions.type},mm:function(){return this.column&&this.column.uidt===i.f.LinkToAnotherRecord&&"mm"===this.column.colOptions.type},lookup:function(){return this.column&&this.column.uidt===i.f.Lookup},formula:function(){return this.column&&this.column.uidt===i.f.Formula},rollup:function(){return this.column&&this.column.uidt===i.f.Rollup}},methods:{save:function(e){var t=this;return Object(a.a)(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!(e&&t.$refs.cell&&t.$refs.cell.saveLocalState)){n.next=8;break}return n.prev=1,n.next=4,t.$refs.cell.saveLocalState(e);case 4:n.next=8;break;case 6:n.prev=6,n.t0=n.catch(1);case 8:case"end":return n.stop()}}),n,null,[[1,6]])})))()}}},m=(n(981),n(191)),p=n(210),f=n.n(p),v=n(1108),h=Object(m.a)(d,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"nc-virtual-cell"},[n("v-lazy",[e.hm?n("has-many-cell",e._g({ref:"cell",attrs:{row:e.row,value:e.row[e.column.title],meta:e.meta,hm:e.hm,nodes:e.nodes,active:e.active,"sql-ui":e.sqlUi,"is-new":e.isNew,"is-form":e.isForm,breadcrumbs:e.breadcrumbs,"is-locked":e.isLocked,required:e.required,"is-public":e.isPublic,metas:e.metas,column:e.column,password:e.password}},e.$listeners)):e.mm?n("many-to-many-cell",e._g({ref:"cell",attrs:{"is-public":e.isPublic,row:e.row,value:e.row[e.column.title],meta:e.meta,nodes:e.nodes,"sql-ui":e.sqlUi,active:e.active,"is-new":e.isNew,api:e.api,"is-form":e.isForm,breadcrumbs:e.breadcrumbs,"is-locked":e.isLocked,required:e.required,column:e.column,metas:e.metas,password:e.password}},e.$listeners)):e.bt?n("belongs-to-cell",e._g({ref:"cell",attrs:{"is-public":e.isPublic,"disabled-columns":e.disabledColumns,active:e.active,row:e.row,value:e.row[e.column.title],meta:e.meta,nodes:e.nodes,api:e.api,"sql-ui":e.sqlUi,"is-new":e.isNew,"is-form":e.isForm,breadcrumbs:e.breadcrumbs,"is-locked":e.isLocked,metas:e.metas,column:e.column,password:e.password}},e.$listeners)):e.lookup?n("lookup-cell",e._g({attrs:{"disabled-columns":e.disabledColumns,active:e.active,row:e.row,value:e.row[e.column.title],meta:e.meta,metas:e.metas,nodes:e.nodes,api:e.api,"sql-ui":e.sqlUi,"is-new":e.isNew,"is-form":e.isForm,column:e.column,"is-locked":e.isLocked}},e.$listeners)):e.formula?n("formula-cell",{attrs:{row:e.row,column:e.column,client:e.nodes.dbConnection.client}}):e.rollup?n("rollup-cell",{attrs:{row:e.row,column:e.column}}):e._e()],1),e._v(" "),e.hint?n("span",{staticClass:"nc-hint"},[e._v(e._s(e.hint))]):e._e(),e._v(" "),e.isLocked?n("div",{staticClass:"nc-locked-overlay"}):e._e()],1)}),[],!1,null,"31036bb8",null);t.default=h.exports;f()(h,{VLazy:v.a})},152:function(e,t,n){"use strict";n.r(t);var a=n(229),i=(n(230),n(182),n(616)),o=n.n(i),r=n(138),l=n(139),s=n(140),c=n(141),u=n(142),d=n(143),m=n(144),p=n(145),f=n(146),v=n(147),h=n(148),b=n(518),g=n(107),y=n(106),x=n(149),w=n(105),_=n(108),C=n(150),k={name:"EditableCell",components:{RatingCell:_.default,JsonEditableCell:s.default,EditableUrlCell:l.default,SetListCell:w.default,SetListEditableCell:x.default,EnumCell:y.default,EditableAttachmentCell:g.default,BooleanCell:h.default,TimePickerCell:v.default,FloatCell:f.default,IntegerCell:p.default,EnumListCell:m.default,TextAreaCell:d.default,DateTimePickerCell:u.default,TextCell:c.default,DatePickerCell:r.default,DurationCell:C.default},mixins:[b.a],props:{dbAlias:String,value:[String,Number,Object,Boolean,Array,Object],meta:Object,ignoreFocus:Boolean,isForm:Boolean,active:Boolean,dummy:Boolean,hint:String,isLocked:Boolean,isPublic:Boolean,viewId:String},data:function(){return{changed:!1,destroyed:!1,syncDataDebounce:o()(function(){var e=Object(a.a)(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.syncData();case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),1e3)}},computed:{localState:{get:function(){return this.value},set:function(e){e!==this.value&&(this.changed=!0,this.$emit("input",e),this.isAutoSaved?this.syncDataDebounce(this):this.isManualSaved||this.saveData())}},parentListeners:function(){var e={};return this.$listeners.blur&&(e.blur=this.$listeners.blur),this.$listeners.focus&&(e.focus=this.$listeners.focus),this.$listeners.cancel&&(e.cancel=this.$listeners.cancel),e}},mounted:function(){},beforeDestroy:function(){this.changed&&this.isAutoSaved&&(this.changed=!1,this.$emit("change")),this.destroyed=!0},methods:{syncData:function(){this.changed&&!this.destroyed&&(this.changed=!1,this.$emit("update"))},saveData:function(){this.changed&&!this.destroyed&&(this.changed=!1,this.$emit("save"))}}},O=(n(1e3),n(191)),S=Object(O.a)(k,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"nc-cell",on:{keydown:[function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"left",37,t.key,["Left","ArrowLeft"])?null:(t.stopPropagation(),"button"in t&&0!==t.button?null:void 0)},function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"right",39,t.key,["Right","ArrowRight"])?null:(t.stopPropagation(),"button"in t&&2!==t.button?null:void 0)},function(t){if(!t.type.indexOf("key")&&e._k(t.keyCode,"up",38,t.key,["Up","ArrowUp"]))return null;t.stopPropagation()},function(t){if(!t.type.indexOf("key")&&e._k(t.keyCode,"down",40,t.key,["Down","ArrowDown"]))return null;t.stopPropagation()},function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:(t.stopPropagation(),t.ctrlKey||t.shiftKey||t.altKey||t.metaKey?null:(e.$emit("save"),void e.$emit("navigateToNext")))},function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:(t.stopPropagation(),t.shiftKey?t.ctrlKey||t.altKey||t.metaKey?null:(e.$emit("save"),void e.$emit("navigateToPrev")):null)}]}},[e.isAttachment?n("editable-attachment-cell",e._g({attrs:{active:e.active,"db-alias":e.dbAlias,meta:e.meta,"is-form":e.isForm,column:e.column,"is-public-grid":e.isPublic&&!e.isForm,"is-public-form":e.isPublic&&e.isForm,"view-id":e.viewId,"is-locked":e.isLocked},model:{value:e.localState,callback:function(t){e.localState=t},expression:"localState"}},e.$listeners)):e.isRating?n("rating-cell",e._g({attrs:{active:e.active,"is-form":e.isForm,column:e.column,"is-public-grid":e.isPublic&&!e.isForm,"is-public-form":e.isPublic&&e.isForm,"is-locked":e.isLocked},model:{value:e.localState,callback:function(t){e.localState=t},expression:"localState"}},e.$listeners)):e.isDuration?n("duration-cell",e._g({attrs:{active:e.active,"is-form":e.isForm,column:e.column,"is-locked":e.isLocked},model:{value:e.localState,callback:function(t){e.localState=t},expression:"localState"}},e.parentListeners)):e.isBoolean?n("boolean-cell",e._g({attrs:{column:e.column,"is-form":e.isForm},model:{value:e.localState,callback:function(t){e.localState=t},expression:"localState"}},e.parentListeners)):e.isInt?n("integer-cell",e._g({model:{value:e.localState,callback:function(t){e.localState=t},expression:"localState"}},e.parentListeners)):e.isFloat?n("float-cell",e._g({model:{value:e.localState,callback:function(t){e.localState=t},expression:"localState"}},e.parentListeners)):e.isDate?n("date-picker-cell",e._g({model:{value:e.localState,callback:function(t){e.localState=t},expression:"localState"}},e.parentListeners)):e.isTime?n("time-picker-cell",e._g({on:{save:function(t){return e.$emit("save")}},model:{value:e.localState,callback:function(t){e.localState=t},expression:"localState"}},e.parentListeners)):e.isDateTime?n("date-time-picker-cell",e._g({attrs:{"ignore-focus":""},model:{value:e.localState,callback:function(t){e.localState=t},expression:"localState"}},e.parentListeners)):e.isEnum&&(!e.isForm&&!e.active||e.isLocked||e.isPublic&&!e.isForm)?n("enum-cell",e._g({attrs:{column:e.column},model:{value:e.localState,callback:function(t){e.localState=t},expression:"localState"}},e.parentListeners)):e.isEnum?n("enum-list-cell",e._g({attrs:{"is-form":e.isForm,column:e.column},model:{value:e.localState,callback:function(t){e.localState=t},expression:"localState"}},e.parentListeners)):e.isJSON?n("json-editable-cell",e._g({attrs:{"is-form":e.isForm},on:{input:function(t){return e.$emit("save")}},model:{value:e.localState,callback:function(t){e.localState=t},expression:"localState"}},e.parentListeners)):!e.isSet||!e.active&&!e.isForm||e.isLocked||e.isPublic&&!e.isForm?e.isSet?n("set-list-cell",e._g({attrs:{column:e.column},model:{value:e.localState,callback:function(t){e.localState=t},expression:"localState"}},e.parentListeners)):e.isURL?n("editable-url-cell",e._g({model:{value:e.localState,callback:function(t){e.localState=t},expression:"localState"}},e.parentListeners)):e.isString?n("text-cell",e._g({model:{value:e.localState,callback:function(t){e.localState=t},expression:"localState"}},e.parentListeners)):e.isTextArea?n("text-area-cell",e._g({attrs:{"is-form":e.isForm},model:{value:e.localState,callback:function(t){e.localState=t},expression:"localState"}},e.parentListeners)):n("text-cell",e._g({model:{value:e.localState,callback:function(t){e.localState=t},expression:"localState"}},e.$listeners)):n("set-list-editable-cell",e._g({attrs:{column:e.column},model:{value:e.localState,callback:function(t){e.localState=t},expression:"localState"}},e.parentListeners)),e._v(" "),e.hint?n("span",{staticClass:"nc-hint"},[e._v(e._s(e.hint))]):e._e(),e._v(" "),(e.isLocked||e.isPublic&&!e.isForm)&&!e.isAttachment?n("div",{staticClass:"nc-locked-overlay"}):e._e()],1)}),[],!1,null,"e45904f0",null);t.default=S.exports},153:function(e,t,n){"use strict";n.r(t);n(53),n(54),n(52),n(55),n(56);var a=n(36),i=n(229),o=(n(230),n(213),n(242)),r=n(518);function l(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function s(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?l(Object(n),!0).forEach((function(t){Object(a.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var c={name:"HeaderCell",components:{EditColumn:n(136).default},mixins:[r.a],props:["value","column","isForeignKey","meta","nodes","columnIndex","isForm","isPublicView","isVirtual","required","isLocked"],data:function(){return{editColumnMenu:!1,columnDeleteDialog:!1}},methods:{showColumnEdit:function(){if(this.column.uidt===o.f.ID)return this.$toast.info("Primary key column edit is not allowed.").goAway(3e3);this.editColumnMenu=!0},deleteColumn:function(){var e=this;return Object(i.a)(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,(n=s(s({},e.column),{},{cno:e.column.column_name})).altered=4,e.meta.columns.slice()[e.columnIndex]=n,t.next=7,e.$api.dbTableColumn.delete(n.id);case 7:e.$emit("colDelete"),e.$emit("saved"),e.columnDeleteDialog=!1,t.next=15;break;case 12:t.prev=12,t.t0=t.catch(0),console.log(t.t0);case 15:case"end":return t.stop()}}),t,null,[[0,12]])})))()},setAsPrimaryValue:function(){var e=this;return Object(i.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.$api.dbTableColumn.primaryColumnSet(e.column.id);case 3:e.$toast.success("Successfully updated as primary column").goAway(3e3),t.next=10;break;case 6:t.prev=6,t.t0=t.catch(0),console.log(t.t0),e.$toast.error("Failed to update primary column").goAway(3e3);case 10:e.$emit("saved"),e.columnDeleteDialog=!1;case 12:case"end":return t.stop()}}),t,null,[[0,6]])})))()}}},u=(n(1002),n(191)),d=n(210),m=n.n(d),p=n(354),f=n(372),v=n(217),h=n(674),b=n(312),g=n(510),y=n(297),x=n(258),w=n(335),_=n(596),C=n(717),k=Object(u.a)(c,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"d-flex align-center d-100"},[e.column.pk?n("v-icon",{staticClass:"mr-1",attrs:{color:"warning","x-small":""}},[e._v("\n    mdi-key-variant\n  ")]):e.uiDatatypeIcon?n("v-icon",{staticClass:"mr-1",attrs:{small:""}},[e._v("\n    "+e._s(e.uiDatatypeIcon)+"\n  ")]):e.isForeignKey?n("v-icon",{staticClass:"mr-1",attrs:{color:"purple",small:""}},[e._v("\n    mdi-link-variant\n  ")]):e.isJSON?n("v-icon",{staticClass:"mr-1",attrs:{color:"purple",small:""}},[e._v("\n    mdi-code-json\n  ")]):e.isInt?n("span",{staticClass:"font-weight-bold mr-1",staticStyle:{"font-size":"15px"}},[e._v("#")]):e.isFloat?n("v-icon",{staticClass:"mr-1 mt-n1",attrs:{color:"grey"}},[e._v("\n    mdi-decimal\n  ")]):e.isDate?n("v-icon",{staticClass:"mr-1",attrs:{color:"grey",small:""}},[e._v("\n    mdi-calendar\n  ")]):e.isDateTime?n("v-icon",{staticClass:"mr-1",attrs:{color:"grey",small:""}},[e._v("\n    mdi-calendar-clock\n  ")]):e.isSet?n("v-icon",{staticClass:"mr-1",attrs:{color:"grey",small:""}},[e._v("\n    mdi-checkbox-multiple-marked\n  ")]):e.isEnum?n("v-icon",{staticClass:"mr-1",attrs:{color:"grey",small:""}},[e._v("\n    mdi-radiobox-marked\n  ")]):e.isBoolean?n("v-icon",{staticClass:"mr-1",attrs:{color:"grey",small:""}},[e._v("\n    mdi-check-box-outline\n  ")]):e.isString?n("v-icon",{attrs:{color:"grey"}},[e._v("\n    mdi-alpha-a\n  ")]):e.isTextArea?n("v-icon",{staticClass:"mr-1",attrs:{color:"grey",small:""}},[e._v("\n    mdi-card-text-outline\n  ")]):e._e(),e._v(" "),n("span",{staticClass:"name",staticStyle:{"white-space":"nowrap"},attrs:{title:e.value}},[e._v(e._s(e.value))]),e._v(" "),e.column.rqd&&!e.column.cdf||e.required?n("span",{staticClass:"error--text text--lighten-1"},[e._v("Â *")]):e._e(),e._v(" "),n("v-spacer"),e._v(" "),e.isLocked||e.isPublicView||!e._isUIAllowed("edit-column")||e.isForm?e._e():n("v-menu",{attrs:{"open-on-hover":"",left:"","z-index":"999",transition:"slide-y-transition"},scopedSlots:e._u([{key:"activator",fn:function(t){var a=t.on;return[e.isLocked||e.isVirtual?e._e():n("v-icon",e._g({attrs:{small:""}},a),[e._v("\n        mdi-menu-down\n      ")])]}}],null,!1,3840597666)},[e._v(" "),n("v-list",{attrs:{dense:""}},[n("v-list-item",{staticClass:"nc-column-edit",attrs:{dense:""},on:{click:e.showColumnEdit}},[n("x-icon",{staticClass:"mr-1",attrs:{small:"",color:"primary"}},[e._v("\n          mdi-pencil\n        ")]),e._v(" "),n("span",{staticClass:"caption"},[e._v("\n          "+e._s(e.$t("general.edit"))+"\n        ")])],1),e._v(" "),n("v-list-item",{directives:[{name:"t",rawName:"v-t",value:["a:column:set-primary"],expression:"['a:column:set-primary']"}],attrs:{dense:""},on:{click:e.setAsPrimaryValue}},[n("x-icon",{staticClass:"mr-1",attrs:{small:"",color:"primary"}},[e._v("\n          mdi-key-star\n        ")]),e._v(" "),n("v-tooltip",{attrs:{bottom:""},scopedSlots:e._u([{key:"activator",fn:function(t){var a=t.on;return[n("span",e._g({staticClass:"caption"},a),[e._v("\n              "+e._s(e.$t("activity.setPrimary"))+"\n            ")])]}}],null,!1,1465074177)},[e._v(" "),n("span",{staticClass:"caption font-weight-bold"},[e._v("Primary value will be shown in place of primary key")])])],1),e._v(" "),n("v-list-item",{staticClass:"nc-column-delete",on:{click:function(t){e.columnDeleteDialog=!0}}},[n("x-icon",{staticClass:"mr-1",attrs:{small:"",color:"error"}},[e._v("\n          mdi-delete-outline\n        ")]),e._v(" "),n("span",{staticClass:"caption"},[e._v("\n          "+e._s(e.$t("general.delete"))+"\n        ")])],1)],1)],1),e._v(" "),n("v-menu",{attrs:{"z-index":"999","offset-y":"","content-class":"",left:"",transition:"slide-y-transition"},scopedSlots:e._u([{key:"activator",fn:function(t){var a=t.on;return[n("span",e._g({},a))]}}]),model:{value:e.editColumnMenu,callback:function(t){e.editColumnMenu=t},expression:"editColumnMenu"}},[e._v(" "),e.editColumnMenu?n("edit-column",{attrs:{meta:e.meta,"sql-ui":e.sqlUi,nodes:e.nodes,"edit-column":!0,column:e.column,"column-index":e.columnIndex},on:{onRelationDelete:function(t){return e.$emit("onRelationDelete")},saved:function(t,n){return e.$emit("saved",t,n)},close:function(t){e.editColumnMenu=!1}}}):e._e()],1),e._v(" "),n("v-dialog",{attrs:{"max-width":"500",persistent:""},on:{keydown:[function(t){if(!t.type.indexOf("key")&&e._k(t.keyCode,"esc",27,t.key,["Esc","Escape"]))return null;e.columnDeleteDialog=!1},function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.deleteColumn.apply(null,arguments)}]},model:{value:e.columnDeleteDialog,callback:function(t){e.columnDeleteDialog=t},expression:"columnDeleteDialog"}},[n("v-card",{staticClass:"nc-delete-dialog-card"},[n("v-card-title",{staticClass:"grey darken-2 subheading white--text"},[e._v("\n        Confirm\n      ")]),e._v(" "),n("v-divider"),e._v(" "),n("v-card-text",{staticClass:"mt-4 title"},[e._v("\n        Do you want to delete "),n("span",{staticClass:"font-weight-bold"},[e._v("'"+e._s(e.column.title)+"'")]),e._v(" column ?\n      ")]),e._v(" "),n("v-divider"),e._v(" "),n("v-card-actions",{staticClass:"d-flex pa-4"},[n("v-spacer"),e._v(" "),n("v-btn",{attrs:{small:""},on:{click:function(t){e.columnDeleteDialog=!1}}},[e._v("\n          "+e._s(e.$t("general.cancel"))+"\n        ")]),e._v(" "),n("v-btn",{directives:[{name:"t",rawName:"v-t",value:["a:column:delete"],expression:"['a:column:delete']"}],attrs:{small:"",color:"error"},on:{click:e.deleteColumn}},[e._v("\n          Confirm\n        ")])],1)],1)],1)],1)}),[],!1,null,"cd6d554c",null);t.default=k.exports;m()(k,{VBtn:p.a,VCard:f.a,VCardActions:v.a,VCardText:v.b,VCardTitle:v.c,VDialog:h.a,VDivider:b.a,VIcon:g.a,VList:y.a,VListItem:x.a,VMenu:w.a,VSpacer:_.a,VTooltip:C.a})},154:function(e,t,n){"use strict";n.r(t);var a=n(229),i=(n(230),n(208),n(190),n(207),n(242)),o=n(374),r={name:"VirtualHeaderCell",components:{EditVirtualColumn:n(137).default},props:["column","nodes","meta","isForm","isPublicView","sqlUi","required","isLocked","isVirtual"],data:function(){return{columnDeleteDialog:!1,editColumnMenu:!1,rollupIcon:Object(o.b)("Rollup"),rels:["bt","hm","mm"]}},computed:{alias:function(){return this.column.title},type:function(){var e,t,n,a;return null!==(e=this.column)&&void 0!==e&&null!==(t=e.colOptions)&&void 0!==t&&t.type?this.column.colOptions.type:null!==(n=this.column)&&void 0!==n&&null!==(a=n.colOptions)&&void 0!==a&&a.formula?"formula":this.column.uidt===i.f.Lookup?"lk":this.column.uidt===i.f.Rollup?"rl":""},relation:function(){var e,t=this;return this.rels.includes(this.type)?this.column:null!==(e=this.column.colOptions)&&void 0!==e&&e.fk_relation_column_id?this.meta.columns.find((function(e){var n;return e.id===(null===(n=t.column.colOptions)||void 0===n?void 0:n.fk_relation_column_id)})):void 0},relationType:function(){var e,t;return null===(e=this.relation)||void 0===e||null===(t=e.colOptions)||void 0===t?void 0:t.type},relationMeta:function(){return this.rels.includes(this.type)?this.getMeta(this.column.colOptions.fk_related_model_id):this.relation?this.getMeta(this.relation.colOptions.fk_related_model_id):void 0},childColumn:function(){var e,t=this;if(null!==(e=this.relationMeta)&&void 0!==e&&e.columns){if("rl"===this.type)return this.relationMeta.columns.find((function(e){return e.id===t.column.colOptions.fk_rollup_column_id}));if("lk"===this.type)return this.relationMeta.columns.find((function(e){return e.id===t.column.colOptions.fk_lookup_column_id}))}return""},childTable:function(){var e;return null!==(e=this.relationMeta)&&void 0!==e&&e.title?this.relationMeta.title:""},parentTable:function(){return this.rels.includes(this.type)?this.meta.title:""},parentColumn:function(){return this.rels.includes(this.type)?this.column.title:""},tooltipMsg:function(){return this.column?"hm"===this.type?"'".concat(this.parentTable,"' has many '").concat(this.childTable,"'"):"mm"===this.type?"'".concat(this.childTable,"' & '").concat(this.parentTable,"' have <br>many to many relation"):"bt"===this.type?"'".concat(this.column.title,"' belongs to '").concat(this.childTable,"'"):"lk"===this.type?"'".concat(this.childColumn.title,"' from '").concat(this.childTable,"' (").concat(this.childColumn.uidt,")"):"formula"===this.type?"Formula - ".concat(this.column.colOptions.formula):"rl"===this.type?"'".concat(this.childColumn.title,"' of '").concat(this.childTable,"' (").concat(this.childColumn.uidt,")"):"":""}},methods:{getMeta:function(e){return this.$store.state.meta.metas[e]||{}},deleteColumn:function(){var e=this;return Object(a.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.$api.dbTableColumn.delete(e.column.id);case 3:e.column.uidt===i.f.LinkToAnotherRecord&&e.column.colOptions&&e.$store.dispatch("meta/ActLoadMeta",{force:!0,id:e.column.colOptions.fk_related_model_id}).then((function(){})),e.$emit("saved"),e.columnDeleteDialog=!1,t.next=15;break;case 8:return t.prev=8,t.t0=t.catch(0),t.t1=e.$toast,t.next=13,e._extractSdkResponseErrorMsg(t.t0);case 13:t.t2=t.sent,t.t1.error.call(t.t1,t.t2).goAway(3e3);case 15:case"end":return t.stop()}}),t,null,[[0,8]])})))()}}},l=(n(1004),n(191)),s=n(210),c=n.n(s),u=n(354),d=n(372),m=n(217),p=n(674),f=n(312),v=n(510),h=n(297),b=n(258),g=n(335),y=n(596),x=n(717),w=Object(l.a)(r,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"d-flex align-center"},[n("v-tooltip",{attrs:{bottom:""},scopedSlots:e._u([{key:"activator",fn:function(t){var a=t.on;return["hm"===e.type?n("v-icon",e._g({staticClass:"mr-1",attrs:{color:"warning","x-small":""}},a),[e._v("\n        mdi-table-arrow-right\n      ")]):"bt"===e.type?n("v-icon",e._g({staticClass:"mr-1",attrs:{color:"info","x-small":""}},a),[e._v("\n        mdi-table-arrow-left\n      ")]):"mm"===e.type?n("v-icon",e._g({staticClass:"mr-1",attrs:{color:"pink","x-small":""}},a),[e._v("\n        mdi-table-network\n      ")]):"formula"===e.type?n("v-icon",e._g({staticClass:"mr-1",attrs:{"x-small":""}},a),[e._v("\n        mdi-math-integral\n      ")]):"lk"===e.type?["hm"===e.relationType?n("v-icon",e._g({staticClass:"mr-1",attrs:{color:"warning","x-small":""}},a),[e._v("\n          mdi-table-column-plus-before\n        ")]):"bt"===e.relationType?n("v-icon",e._g({staticClass:"mr-1",attrs:{color:"info","x-small":""}},a),[e._v("\n          mdi-table-column-plus-before\n        ")]):"mm"===e.relationType?n("v-icon",e._g({staticClass:"mr-1",attrs:{color:"pink","x-small":""}},a),[e._v("\n          mdi-table-column-plus-before\n        ")]):e._e()]:"rl"===e.type?["hm"===e.relationType?n("v-icon",e._g({staticClass:"mr-1",attrs:{color:"warning","x-small":""}},a),[e._v("\n          "+e._s(e.rollupIcon)+"\n        ")]):"bt"===e.relationType?n("v-icon",e._g({staticClass:"mr-1",attrs:{color:"info","x-small":""}},a),[e._v("\n          "+e._s(e.rollupIcon)+"\n        ")]):"mm"===e.relationType?n("v-icon",e._g({staticClass:"mr-1",attrs:{color:"pink","x-small":""}},a),[e._v("\n          "+e._s(e.rollupIcon)+"\n        ")]):e._e()]:e._e(),e._v(" "),n("span",e._g({staticClass:"name",staticStyle:{"white-space":"nowrap"},attrs:{title:e.column.title},domProps:{innerHTML:e._s(e.alias)}},a)),e._v(" "),e.column.rqd||e.required?n("span",e._g({staticClass:"error--text text--lighten-1"},a),[e._v("Â *")]):e._e()]}}])},[e._v(" "),n("span",{staticClass:"caption",domProps:{innerHTML:e._s(e.tooltipMsg)}})]),e._v(" "),n("v-spacer"),e._v(" "),e.isLocked||e.isVirtual||e.isPublicView||!e._isUIAllowed("edit-column")||e.isForm?e._e():n("v-menu",{attrs:{"offset-y":"","open-on-hover":"",left:"",transition:"slide-y-transition"},scopedSlots:e._u([{key:"activator",fn:function(t){var a=t.on;return[e.isLocked||e.isForm?e._e():n("v-icon",e._g({attrs:{small:""}},a),[e._v("\n        mdi-menu-down\n      ")])]}}],null,!1,3590335189)},[e._v(" "),n("v-list",{attrs:{dense:""}},[n("v-list-item",{attrs:{dense:""},on:{click:function(t){e.editColumnMenu=!0}}},[n("x-icon",{staticClass:"mr-1 nc-column-edit",attrs:{small:"",color:"primary"}},[e._v("\n          mdi-pencil\n        ")]),e._v(" "),n("span",{staticClass:"caption"},[e._v("\n          "+e._s(e.$t("general.edit"))+"\n        ")])],1),e._v(" "),n("v-list-item",{on:{click:function(t){e.columnDeleteDialog=!0}}},[n("x-icon",{staticClass:"mr-1 nc-column-delete",attrs:{small:"",color:"error"}},[e._v("\n          mdi-delete-outline\n        ")]),e._v(" "),n("span",{staticClass:"caption"},[e._v("\n          "+e._s(e.$t("general.delete"))+"\n        ")])],1)],1)],1),e._v(" "),n("v-dialog",{attrs:{"max-width":"500",persistent:""},model:{value:e.columnDeleteDialog,callback:function(t){e.columnDeleteDialog=t},expression:"columnDeleteDialog"}},[n("v-card",[n("v-card-title",{staticClass:"grey darken-2 subheading white--text"},[e._v("\n        Confirm\n      ")]),e._v(" "),n("v-divider"),e._v(" "),n("v-card-text",{staticClass:"mt-4 title"},[e._v("\n        Do you want to delete "),n("span",{staticClass:"font-weight-bold"},[e._v("'"+e._s(e.column.title)+"'")]),e._v(" column ?\n      ")]),e._v(" "),n("v-divider"),e._v(" "),n("v-card-actions",{staticClass:"d-flex pa-4"},[n("v-spacer"),e._v(" "),n("v-btn",{attrs:{small:""},on:{click:function(t){e.columnDeleteDialog=!1}}},[e._v("\n          "+e._s(e.$t("general.cancel"))+"\n        ")]),e._v(" "),n("v-btn",{directives:[{name:"t",rawName:"v-t",value:["a:column:delete"],expression:"['a:column:delete']"}],attrs:{small:"",color:"error"},on:{click:e.deleteColumn}},[e._v("\n          Confirm\n        ")])],1)],1)],1),e._v(" "),n("v-menu",{attrs:{"offset-y":"","content-class":"",left:"",transition:"slide-y-transition"},scopedSlots:e._u([{key:"activator",fn:function(t){var a=t.on;return[n("span",e._g({},a))]}}]),model:{value:e.editColumnMenu,callback:function(t){e.editColumnMenu=t},expression:"editColumnMenu"}},[e._v(" "),e.editColumnMenu?n("edit-virtual-column",e._g({attrs:{nodes:e.nodes,"edit-column":!0,column:e.column,meta:e.meta,"sql-ui":e.sqlUi},model:{value:e.editColumnMenu,callback:function(t){e.editColumnMenu=t},expression:"editColumnMenu"}},e.$listeners)):e._e()],1)],1)}),[],!1,null,"8c7178b6",null);t.default=w.exports;c()(w,{VBtn:u.a,VCard:d.a,VCardActions:m.a,VCardText:m.b,VCardTitle:m.c,VDialog:p.a,VDivider:f.a,VIcon:v.a,VList:h.a,VListItem:b.a,VMenu:g.a,VSpacer:y.a,VTooltip:x.a})},156:function(e,t,n){"use strict";n.r(t);n(54),n(55),n(56),n(213),n(199),n(214),n(224),n(220),n(219);var a=n(229),i=n(36),o=n(212),r=(n(230),n(201),n(52),n(53),n(208),n(190),n(505),n(207),n(295)),l=n.n(r),s=n(242),c={props:{disabledColumns:{type:Object,default:function(){return{}}},sqlUi:[Object,Function],nodes:[Object],api:[Object]},methods:{isValid:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(this.meta){var a=e;return a.uidt===s.f.LinkToAnotherRecord&&a.colOptions&&a.colOptions.type===s.d.BELONGS_TO&&(a=this.meta.columns.find((function(e){return e.id===a.colOptions.fk_child_column_id}))),(n||a.rqd)&&(void 0===t[a.title]||null===t[a.title])&&!a.cdf}},isRequired:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],a=e;return a.uidt===s.f.LinkToAnotherRecord&&a.colOptions&&a.colOptions.type===s.d.BELONGS_TO&&(a=this.meta.columns.find((function(e){return e.id===a.colOptions.fk_child_column_id}))),n||a&&a.rqd&&!a.cdf}}},u=n(153),d=n(152),m=n(463),p=n(151),f=n(154);function v(e){var t=document.createElement("div");return t.textContent=e||"",t.innerHTML}function h(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return b(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return b(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var a=0,i=function(){};return{s:i,n:function(){return a>=e.length?{done:!0}:{done:!1,value:e[a++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,r=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return r=e.done,e},e:function(e){l=!0,o=e},f:function(){try{r||null==n.return||n.return()}finally{if(l)throw o}}}}function b(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}function g(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function y(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?g(Object(n),!0).forEach((function(t){Object(i.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):g(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var x=n(462),w=n(415);l.a.extend(w),l.a.extend(x);var _={name:"ExpandedForm",components:{VirtualHeaderCell:f.default,VirtualCell:p.default,EditableCell:d.default,HeaderCell:u.default},mixins:[m.a,c],props:{showFields:Object,showNextPrev:{type:Boolean,default:!1},breadcrumbs:{type:Array,default:function(){return[]}},dbAlias:String,value:Object,table:String,primaryValueColumn:String,isNew:Boolean,oldRow:Object,iconColor:{type:String,default:"primary"},availableColumns:[Object,Array],queryParams:Object,meta:Object,presetValues:Object,isLocked:Boolean},data:function(){return{isVirtualCol:s.j,UITypes:s.f,showborder:!1,loadingLogs:!0,toggleDrawer:!1,logs:null,active:"",localState:{},changedColumns:{},comment:null,showSystemFields:!1,commentsOnly:!1}},computed:{primaryKey:function(){var e=this;return this.isNew?"":this.meta.columns.filter((function(e){return e.pk})).map((function(t){return e.localState[t.title]})).join("___")},edited:function(){return!!Object.keys(this.changedColumns).length},fields:function(){var e;return e=this.availableColumns?this.availableColumns:this.showSystemFields?this.meta.columns||[]:this.meta.columns.filter((function(e){return!Object(s.i)(e)}))||[],this.isNew?e.filter((function(e){return![s.f.Formula,s.f.Rollup,s.f.Lookup].includes(e.uidt)})):e},isChanged:function(){return Object.values(this.changedColumns).some(Boolean)},localBreadcrumbs:function(){return[].concat(Object(o.a)(this.breadcrumbs),["".concat(this.meta?this.meta.title:this.table," ").concat(this.primaryValue()?"(".concat(this.primaryValue(),")"):"")])}},watch:{value:function(e){this.localState=y({},e),!this.isNew&&this.toggleDrawer&&this.getAuditsAndComments()},isNew:function(e){!e&&this.toggleDrawer&&this.getAuditsAndComments()},meta:function(){!this.isNew&&this.toggleDrawer&&this.getAuditsAndComments()},toggleDrawer:function(e){e&&this.getAuditsAndComments()}},created:function(){this.localState=y({},this.value),!this.isNew&&this.toggleDrawer&&this.getAuditsAndComments()},methods:{updateCol:function(e,t,n){this.$set(this.localState,t,n),this.$set(this.changedColumns,t,!0)},isYou:function(e){return this.$store.state.users.user&&this.$store.state.users.user.email===e},getAuditsAndComments:function(){var e=this;return Object(a.a)(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.loadingLogs=!0,t.next=3,e.$api.utils.commentList({row_id:e.meta.columns.filter((function(e){return e.pk})).map((function(t){return e.localState[t.title]})).join("___"),fk_model_id:e.meta.id,comments_only:e.commentsOnly});case 3:n=t.sent,e.logs=n.reverse(),e.loadingLogs=!1,e.$nextTick((function(){e.$refs.commentsList&&e.$refs.commentsList.$el&&e.$refs.commentsList.$el.firstElementChild&&(e.$refs.commentsList.$el.scrollTop=e.$refs.commentsList.$el.firstElementChild.offsetHeight)}));case 7:case"end":return t.stop()}}),t)})))()},save:function(){var e=this;return Object(a.a)(regeneratorRuntime.mark((function t(){var n,a,i,o,r,l,s,c,u,d;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,n=e.meta.columns.filter((function(e){return e.pk})).map((function(t){return e.localState[t.title]})).join("___"),e.presetValues)for(a in e.presetValues)e.$set(e.changedColumns,a,!0);if(i=Object.keys(e.changedColumns).reduce((function(t,n){return t[n]=e.localState[n],t}),{}),!e.isNew){t.next=32;break}return t.next=7,e.$api.dbTableRow.create("noco",e.projectName,e.meta.title,i);case 7:if(o=t.sent,e.localState=y(y({},e.localState),o),!e.$refs.virtual||!Array.isArray(e.$refs.virtual)){t.next=28;break}r=h(e.$refs.virtual),t.prev=11,r.s();case 13:if((l=r.n()).done){t.next=20;break}if(!(s=l.value).save){t.next=18;break}return t.next=18,s.save(e.localState);case 18:t.next=13;break;case 20:t.next=25;break;case 22:t.prev=22,t.t0=t.catch(11),r.e(t.t0);case 25:return t.prev=25,r.f(),t.finish(25);case 28:return t.next=30,e.reload();case 30:t.next=41;break;case 32:if(!Object.keys(i).length){t.next=40;break}if(n){t.next=35;break}return t.abrupt("return",e.$toast.info("Update not allowed for table which doesn't have primary Key").goAway(3e3));case 35:return t.next=37,e.$api.dbTableRow.update("noco",e.projectName,e.meta.title,n,i);case 37:for(c=0,u=Object.keys(i);c<u.length;c++)d=u[c],e.$api.utils.auditRowUpdate(n,{fk_model_id:e.meta.id,column_name:d,row_id:n,value:v(i[d]),prev_value:v(e.oldRow[d])}).then((function(){}));t.next=41;break;case 40:return t.abrupt("return",e.$toast.info("No columns to update").goAway(3e3));case 41:e.$emit("update:oldRow",y({},e.localState)),e.changedColumns={},e.$emit("input",e.localState),e.$emit("update:isNew",!1),e.$toast.success("".concat(e.primaryValue()||"Row"," updated successfully."),{position:"bottom-right"}).goAway(3e3),t.next=51;break;case 48:t.prev=48,t.t1=t.catch(0),e.$toast.error("Failed to update row : ".concat(t.t1.message)).goAway(3e3);case 51:e.$e("a:row-expand:add");case 52:case"end":return t.stop()}}),t,null,[[0,48],[11,22,25,28]])})))()},reload:function(){var e=this;return Object(a.a)(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.meta.columns.filter((function(e){return e.pk})).map((function(t){return e.localState[t.title]})).join("___"),e.$set(e,"changedColumns",{}),t.next=4,e.$api.dbTableRow.read("noco",e.projectName,e.meta.title,n,{query:e.queryParams||{}});case 4:e.localState=t.sent;case 5:case"end":return t.stop()}}),t)})))()},calculateDiff:function(e){return l.a.utc(e).fromNow()},saveComment:function(){var e=this;return Object(a.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.$api.utils.commentRow({fk_model_id:e.meta.id,row_id:e.meta.columns.filter((function(e){return e.pk})).map((function(t){return e.localState[t.title]})).join("___"),description:e.comment});case 3:return e.comment="",e.$toast.success("Comment added successfully").goAway(3e3),e.$emit("commented"),t.next=8,e.getAuditsAndComments();case 8:t.next=13;break;case 10:t.prev=10,t.t0=t.catch(0),e.$toast.error(t.t0.message).goAway(3e3);case 13:e.$e("a:row-expand:comment");case 14:case"end":return t.stop()}}),t,null,[[0,10]])})))()},primaryValue:function(){var e=this;if(this.localState){var t=this.localState[this.primaryValueColumn],n=this.meta.columns.find((function(t){return t.title==e.primaryValueColumn}));if(!n)return;var a=n.uidt;if(a==s.f.Date)return(/^\d+$/.test(t)?l()(+t):l()(t)).format("YYYY-MM-DD");if(a==s.f.DateTime)return(/^\d+$/.test(t)?l()(+t):l()(t)).format("YYYY-MM-DD HH:mm");if(a==s.f.Time){var i=l()(t);return i.isValid()||(i=l()(t,"HH:mm:ss")),i.isValid()||(i=l()("1999-01-01 ".concat(t))),i.isValid()?i.format("HH:mm:ss"):t}return t}}}},C=(n(1047),n(191)),k=n(210),O=n.n(k),S=n(1353),M=n(354),j=n(372),D=n(217),$=n(688),L=n(617),T=n(312),R=n(510),A=n(297),P=n(258),E=n(260),N=n(904),V=n(1019),I=n(596),F=n(1299),U=n(305),q=n(1326),B=Object(C.a)(_,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-card",{attrs:{width:"1000","max-width":"100%"}},[n("v-toolbar",{staticClass:"elevation-1",attrs:{height:"55"}},[n("div",{staticClass:"d-100 d-flex"},[n("h5",{staticClass:"title text-center"},[n("v-icon",{attrs:{color:e.iconColor}},[e._v("\n          mdi-table-arrow-right\n        ")]),e._v(" "),e.meta?[e._v("\n          "+e._s(e.meta.title)+"\n        ")]:[e._v("\n          "+e._s(e.table)+"\n        ")],e._v("\n        : "+e._s(e.primaryValue())+"\n      ")],2),e._v(" "),n("v-spacer"),e._v(" "),n("v-btn",{attrs:{small:"",text:""},on:{click:e.reload}},[n("v-icon",{attrs:{small:""}},[e._v("\n          mdi-reload\n        ")])],1),e._v(" "),!e.isNew&&e._isUIAllowed("rowComments")?n("x-icon",{attrs:{"icon-class":"mr-2",tooltip:"Toggle comments",small:"",text:""},on:{click:function(t){e.toggleDrawer=!e.toggleDrawer}}},[e._v("\n        "+e._s(e.toggleDrawer?"mdi-door-open":"mdi-door-closed")+"\n      ")]):e._e(),e._v(" "),n("v-btn",{attrs:{small:""},on:{click:function(t){return e.$emit("cancel")}}},[e._v("\n        "+e._s(e.$t("general.cancel"))+"\n      ")]),e._v(" "),n("v-btn",{attrs:{disabled:!e._isUIAllowed("tableRowUpdate"),small:"",color:"primary"},on:{click:e.save}},[e._v("\n        "+e._s(e.$t("activity.saveRow"))+"\n      ")])],1)]),e._v(" "),n("div",{staticClass:"form-container"},[n("v-card-text",{staticClass:"py-0 px-0",class:{"px-10":e.isNew||!e.toggleDrawer}},[e.localBreadcrumbs&&e.localBreadcrumbs.length?n("v-breadcrumbs",{staticClass:"caption pt-0 pb-2 justify-center d-100",attrs:{items:e.localBreadcrumbs.map((function(e){return{text:e}}))}}):e._e(),e._v(" "),n("v-container",{staticClass:"py-0",staticStyle:{height:"70vh"},attrs:{fluid:""}},[n("v-row",{staticClass:"h-100"},[n("v-col",{staticClass:"h-100 px-10",staticStyle:{"overflow-y":"auto"},attrs:{cols:"8",offset:e.isNew||!e.toggleDrawer?2:0}},[e.showNextPrev?n("div",{staticClass:"d-flex my-4"},[n("x-icon",{attrs:{tooltip:"Previous record",small:"",outlined:""},on:{click:function(t){return e.$emit("prev",e.localState)}}},[e._v("\n                mdi-arrow-left-bold-outline\n              ")]),e._v(" "),n("span",{staticClass:"flex-grow-1"}),e._v(" "),n("x-icon",{attrs:{tooltip:"Next record",small:"",outlined:""},on:{click:function(t){return e.$emit("next",e.localState)}}},[e._v("\n                mdi-arrow-right-bold-outline\n              ")])],1):e._e(),e._v(" "),e._l(e.fields,(function(t,a){return[t.lk||e.showFields&&!e.showFields[t.title]?e._e():n("div",{key:a,staticClass:"row-col my-4",class:{"active-row":e.active===t.title,required:e.isValid(t,e.localState)}},[n("div",[n("label",{staticClass:"body-2 text-capitalize",attrs:{for:"data-table-form-"+t.title}},[t.colOptions?n("virtual-header-cell",{attrs:{column:t,nodes:e.nodes,"is-form":!0,meta:e.meta}}):n("header-cell",{attrs:{"is-form":!0,"is-foreign-key":t.type===e.UITypes.ForeignKey,value:t.title,column:t,"sql-ui":e.sqlUi}})],1),e._v(" "),e.isVirtualCol(t)?n("virtual-cell",{ref:"virtual",refInFor:!0,attrs:{"disabled-columns":e.disabledColumns,column:t,row:e.localState,nodes:e.nodes,meta:e.meta,api:e.api,active:!0,"is-new":e.isNew,"is-form":!0,breadcrumbs:e.localBreadcrumbs},on:{updateCol:e.updateCol,newRecordsSaved:function(t){e.$listeners.loadTableData||e.reload}}}):t.ai||t.pk&&!e.isNew||e.disabledColumns[t.title]?n("div",{staticClass:"caption xc-input",staticStyle:{height:"100%",width:"100%"},on:{click:function(n){t.ai&&e.$toast.info("Auto Increment field is not editable").goAway(3e3)}}},[n("input",{staticStyle:{height:"100%",width:"100%"},attrs:{readonly:"",disabled:""},domProps:{value:e.localState[t.title]}})]):n("editable-cell",{staticClass:"xc-input body-2",attrs:{id:"data-table-form-"+t.title,"db-alias":e.dbAlias,column:t,meta:e.meta,"sql-ui":e.sqlUi,"is-form":!0,"is-locked":e.isLocked},on:{focus:function(n){e.active=t.title},blur:function(t){e.active=""},input:function(n){return e.$set(e.changedColumns,t.title,!0)}},model:{value:e.localState[t.title],callback:function(n){e.$set(e.localState,t.title,n)},expression:"localState[col.title]"}})],1)])]}))],2),e._v(" "),!e.isNew&&e.toggleDrawer?n("v-col",{staticClass:"d-flex flex-column h-100 flex-grow-1 blue-grey",class:{"lighten-5":!e.$vuetify.theme.dark,"darken-4":e.$vuetify.theme.dark},attrs:{cols:"4"}},[e.loadingLogs&&!e.logs?n("v-skeleton-loader",{attrs:{type:"list-item-avatar-two-line@8"}}):n("v-list",{ref:"commentsList",staticClass:"blue-grey",class:{"lighten-5":!e.$vuetify.theme.dark,"darken-4":e.$vuetify.theme.dark},staticStyle:{"overflow-y":"auto","overflow-x":"auto"},attrs:{width:"100%"}},[n("div",e._l(e.logs,(function(t){return n("v-list-item",{key:t.id,staticClass:"d-flex"},[n("v-list-item-icon",{staticClass:"ma-0 mr-2"},[n("v-icon",{attrs:{color:e.isYou(t.user)?"pink lighten-2":"blue lighten-2"}},[e._v("\n                      mdi-account-circle\n                    ")])],1),e._v(" "),n("div",{staticClass:"flex-grow-1",staticStyle:{"min-width":"0"}},[n("p",{staticClass:"mb-1 caption edited-text"},[e._v("\n                      "+e._s(e.isYou(t.user)?"You":null==t.user?"Shared base":t.user)+"\n                      "+e._s("COMMENT"===t.op_type?"commented":"INSERT"===t.op_sub_type?"created":"edited")+"\n                    ")]),e._v(" "),"COMMENT"===t.op_type?n("p",{staticClass:"caption mb-0 nc-chip",style:{background:e.colors[2]}},[e._v("\n                      "+e._s(t.description)+"\n                    ")]):n("p",{directives:[{name:"dompurify-html",rawName:"v-dompurify-html",value:t.details,expression:"log.details"}],staticClass:"caption mb-0",staticStyle:{"word-break":"break-all"}}),e._v(" "),n("p",{staticClass:"time text-right mb-0"},[e._v("\n                      "+e._s(e.calculateDiff(t.created_at))+"\n                    ")])])],1)})),1)]),e._v(" "),n("v-spacer"),e._v(" "),n("v-divider"),e._v(" "),n("div",{staticClass:"d-flex align-center justify-center"},[n("v-switch",{directives:[{name:"t",rawName:"v-t",value:["c:row-expand:comment-only"],expression:"['c:row-expand:comment-only']"}],staticClass:"mt-1",attrs:{dense:"","hide-details":""},on:{change:e.getAuditsAndComments},scopedSlots:e._u([{key:"label",fn:function(){return[n("span",{staticClass:"caption grey--text"},[e._v("Comments only")])]},proxy:!0}],null,!1,3581466376),model:{value:e.commentsOnly,callback:function(t){e.commentsOnly=t},expression:"commentsOnly"}})],1),e._v(" "),n("div",{staticClass:"flex-shrink-1 mt-2 d-flex pl-4"},[n("v-icon",{staticClass:"mr-2",attrs:{color:"pink lighten-2"}},[e._v("\n                mdi-account-circle\n              ")]),e._v(" "),n("v-text-field",{staticClass:"caption comment-box",class:{focus:e.showborder},attrs:{dense:"",placeholder:"Comment",flat:"",solo:"","hide-details":""},on:{focusin:function(t){e.showborder=!0},focusout:function(t){e.showborder=!1},keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:(t.preventDefault(),e.saveComment.apply(null,arguments))}},scopedSlots:e._u([e.comment?{key:"append",fn:function(){return[n("x-icon",{attrs:{tooltip:"Save",small:""},on:{click:e.saveComment}},[e._v("\n                    mdi-keyboard-return\n                  ")])]},proxy:!0}:null],null,!0),model:{value:e.comment,callback:function(t){e.comment=t},expression:"comment"}})],1)],1):e._e()],1)],1)],1)],1),e._v(" "),e._isUIAllowed("rowComments")?n("v-btn",{directives:[{name:"show",rawName:"v-show",value:!e.toggleDrawer,expression:"!toggleDrawer"},{name:"t",rawName:"v-t",value:["c:row-expand:comment-toggle"],expression:"['c:row-expand:comment-toggle']"}],staticClass:"comment-icon",attrs:{color:"primary",fab:""},on:{click:function(t){e.toggleDrawer=!e.toggleDrawer}}},[n("v-icon",[e._v("mdi-comment-multiple-outline")])],1):e._e()],1)}),[],!1,null,"11db4f30",null);t.default=B.exports;O()(B,{VBreadcrumbs:S.a,VBtn:M.a,VCard:j.a,VCardText:D.b,VCol:$.a,VContainer:L.a,VDivider:T.a,VIcon:R.a,VList:A.a,VListItem:P.a,VListItemIcon:E.a,VRow:N.a,VSkeletonLoader:V.a,VSpacer:I.a,VSwitch:F.a,VTextField:U.a,VToolbar:q.a})},312:function(e,t,n){"use strict";n(53),n(54),n(52),n(55),n(56);var a=n(36),i=(n(368),n(185));function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function r(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){Object(a.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}t.a=i.a.extend({name:"v-divider",props:{inset:Boolean,vertical:Boolean},render:function(e){var t;return this.$attrs.role&&"separator"!==this.$attrs.role||(t=this.vertical?"vertical":"horizontal"),e("hr",{class:r({"v-divider":!0,"v-divider--inset":this.inset,"v-divider--vertical":this.vertical},this.themeClasses),attrs:r({role:"separator","aria-orientation":t},this.$attrs),on:this.$listeners})}})},365:function(e,t,n){"use strict";n.d(t,"b",(function(){return a})),t.a={light:["#ffdce5","#fee2d5","#ffeab6","#d1f7c4","#ede2fe","#eee","#cfdffe","#d0f1fd","#c2f5e8","#ffdaf6"],dark:["#f82b6099","#ff6f2c99","#fcb40099","#20c93399","#8b46ff99","#666","#2d7ff999","#18bfff99","#20d9d299","#ff08c299"]};var a={light:["#cfdffe","#d0f1fd","#c2f5e8","#ffdaf6","#ffdce5","#fee2d5","#ffeab6","#d1f7c4","#ede2fe","#eeeeee"],dark:["#2d7ff999","#18bfff99","#20d9d299","#ff08c299","#f82b6099","#ff6f2c99","#fcb40099","#20c93399","#8b46ff99","#666"]};
/**
 * @copyright Copyright (c) 2021, Xgene Cloud Ltd
 *
 * @author Naveen MR <oof1lab@gmail.com>
 * @author Pranav C Balan <pranavxc@gmail.com>
 *
 * @license GNU AGPL version 3 or any later version
 *
 * This program is free software: you can redistribute it and/or modify
 * it under the terms of the GNU Affero General Public License as
 * published by the Free Software Foundation, either version 3 of the
 * License, or (at your option) any later version.
 *
 * This program is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 * GNU Affero General Public License for more details.
 *
 * You should have received a copy of the GNU Affero General Public License
 * along with this program. If not, see <http://www.gnu.org/licenses/>.
 *
 */},368:function(e,t,n){var a=n(369);a.__esModule&&(a=a.default),"string"==typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);(0,n(178).default)("7132a15d",a,!0,{sourceMap:!1})},369:function(e,t,n){var a=n(177)(!1);a.push([e.i,".theme--light.v-divider{border-color:rgba(0,0,0,.12)}.theme--dark.v-divider{border-color:hsla(0,0%,100%,.12)}.v-divider{display:block;flex:1 1 0px;max-width:100%;height:0;max-height:0;border:solid;border-width:thin 0 0;transition:inherit}.v-divider--inset:not(.v-divider--vertical){max-width:calc(100% - 72px)}.v-application--is-ltr .v-divider--inset:not(.v-divider--vertical){margin-left:72px}.v-application--is-rtl .v-divider--inset:not(.v-divider--vertical){margin-right:72px}.v-divider--vertical{align-self:stretch;border:solid;border-width:0 thin 0 0;display:inline-flex;height:inherit;min-height:100%;max-height:100%;max-width:0;width:0;vertical-align:text-bottom;margin:0 -1px}.v-divider--vertical.v-divider--inset{margin-top:8px;min-height:0;max-height:calc(100% - 16px)}",""]),e.exports=a},374:function(e,t,n){"use strict";n.d(t,"c",(function(){return a})),n.d(t,"b",(function(){return i})),n.d(t,"a",(function(){return o}));n(207),n(214);var a=[{name:"LinkToAnotherRecord",icon:"mdi-link-variant",virtual:1},{name:"Lookup",icon:"mdi-table-column-plus-before",virtual:1},{name:"SingleLineText",icon:"mdi-format-color-text"},{name:"LongText",icon:"mdi-text-subject"},{name:"Attachment",icon:"mdi-attachment"},{name:"Checkbox",icon:"mdi-checkbox-marked-outline"},{name:"MultiSelect",icon:"mdi-format-list-bulleted-square"},{name:"SingleSelect",icon:"mdi-arrow-down-drop-circle"},{name:"Date",icon:"mdi-calendar-month"},{name:"Year",icon:"mdi-calendar"},{name:"Time",icon:"mdi-clock"},{name:"PhoneNumber",icon:"mdi-file-phone"},{name:"Email",icon:"mdi-email"},{name:"URL",icon:"mdi-web"},{name:"Number",icon:"mdi-numeric"},{name:"Decimal",icon:"mdi-decimal"},{name:"Currency",icon:"mdi-currency-usd-circle-outline"},{name:"Percent",icon:"mdi-percent-outline"},{name:"Duration",icon:"mdi-timer-outline"},{name:"Rating",icon:"mdi-star"},{name:"Formula",icon:"mdi-math-integral",virtual:1},{name:"Rollup",icon:"mdi-movie-roll",virtual:1},{name:"Count",icon:"mdi-counter"},{name:"DateTime",icon:"mdi-calendar-clock"},{name:"AutoNumber",icon:"mdi-numeric"},{name:"Geometry",icon:"mdi-ruler-square-compass"},{name:"JSON",icon:"mdi-code-json"},{name:"SpecificDBType",icon:"mdi-database-settings"}],i=function(e){return([].concat(a,[{name:"CreateTime",icon:"mdi-calendar-clock"},{name:"ID",icon:"mdi-identifier"},{name:"ForeignKey",icon:"mdi-link-variant"}]).find((function(t){return t.name===e}))||{}).icon},o={ID:"ID",ForeignKey:"ForeignKey",SingleLineText:"SingleLineText",LongText:"LongText",Attachment:"Attachment",Checkbox:"Checkbox",MultiSelect:"MultiSelect",SingleSelect:"SingleSelect",Collaborator:"Collaborator",Date:"Date",Year:"Year",Time:"Time",PhoneNumber:"PhoneNumber",Email:"Email",URL:"URL",Number:"Number",Decimal:"Decimal",Currency:"Currency",Percent:"Percent",Duration:"Duration",Rating:"Rating",Formula:"Formula",Rollup:"Rollup",Count:"Count",Lookup:"Lookup",DateTime:"DateTime",CreateTime:"CreateTime",LastModifiedTime:"LastModifiedTime",AutoNumber:"AutoNumber",Barcode:"Barcode",Button:"Button",SpecificDBType:"SpecificDBType",LinkToAnotherRecord:"LinkToAnotherRecord"}},463:function(e,t,n){"use strict";var a=n(365);t.a={computed:{colors:function(){return this.$store.state.settings.darkTheme?a.b.dark:a.b.light},textColors:function(){return this.$store.state.settings.darkTheme?a.b.light:a.b.dark}},methods:{getColor:function(e){return this.colors[e%this.colors.length]},getTextColor:function(e){return this.textColors[e%this.textColors.length]}}}},508:function(e,t,n){"use strict";n.d(t,"c",(function(){return a})),n.d(t,"b",(function(){return o})),n.d(t,"a",(function(){return r}));n(516),n(294),n(213);var a=[{id:0,title:"h:mm",example:"(e.g. 1:23)",regex:/(\d+)(?::(\d+))?/},{id:1,title:"h:mm:ss",example:"(e.g. 3:45, 1:23:40)",regex:/(\d+)?(?::(\d+))?(?::(\d+))?/},{id:2,title:"h:mm:ss.s",example:"(e.g. 3:34.6, 1:23:40.0)",regex:/(\d+)?(?::(\d+))?(?::(\d+))?(?:.(\d{0,4})?)?/},{id:3,title:"h:mm:ss.ss",example:"(e.g. 3.45.67, 1:23:40.00)",regex:/(\d+)?(?::(\d+))?(?::(\d+))?(?:.(\d{0,4})?)?/},{id:4,title:"h:mm:ss.sss",example:"(e.g. 3.45.678, 1:23:40.000)",regex:/(\d+)?(?::(\d+))?(?::(\d+))?(?:.(\d{0,4})?)?/}],i=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return(e+"").padStart(t?3:2,"0")},o=function(e,t){if(""===e||null==e)return e;var n=Math.round(e%1*1e3),a=Math.round(n/10),o=Math.round(a/10),r=Math.floor(parseInt(e,10)/3600),l=Math.floor((parseInt(e,10)-60*r*60)/60),s=parseInt(e,10)-60*r*60-60*l;return 0===t?"".concat(i(r),":").concat(i(l+(s>=30))):1===t?"".concat(i(r),":").concat(i(l),":").concat(i(s)):2===t?"".concat(i(r),":").concat(i(l),":").concat(i(s),".").concat(o):3===t?"".concat(i(r),":").concat(i(l),":").concat(i(s),".").concat(i(a)):4===t?"".concat(i(r),":").concat(i(l),":").concat(i(s),".").concat(i(n,!0)):e},r=function(e,t){var n={_ms:null,_isValid:!0},i=a[t].regex;if(i.test(e)){var o,r,l,s=e.match(i);if(!s[0]||!s[1]||s[2]||s[3]||s[4])0!==t&&s[1]&&s[2]&&!s[3]?(o=0,r=s[1],l=s[2]):(o=s[1]||0,r=s[2]||0,l=s[3]||0);else{var c=parseInt(s[1],10);":"===s.input.slice(-1)?(o=s[1],r=0,l=0):0===t?(o=Math.floor(c/60),r=Math.floor(c-3600*o/60),l=0):(o=Math.floor(s[1]/3600),r=Math.floor(s[1]/60)%60,l=c%60)}if(0===t)n._sec=3600*o+60*r;else if(1===t)n._sec=3600*o+60*r+1*l;else if(2===t){var u=s[4]||0,d=Math.log(u)*Math.LOG10E+1|0,m=100*(4===d?Math.round(u/1e3):3===d?Math.round(u/100):2===d?Math.round(u/10):u);n._sec=3600*o+60*r+1*l+m/1e3}else if(3===t){var p=s[4]||0,f=Math.log(p)*Math.LOG10E+1|0,v=10*(4===f?Math.round(p/100):3===f?Math.round(p/10):p);n._sec=3600*o+60*r+1*l+v/1e3}else if(4===t){var h=s[4]||0;h=1*(4===(Math.log(h)*Math.LOG10E+1|0)?Math.round(h/10):h),n._sec=3600*o+60*r+1*l+h/1e3}}else n._isValid=!1;return n}},518:function(e,t,n){"use strict";n(207),n(214),n(208),n(190);var a=n(242),i=n(374);t.a={props:{sqlUi:[Object,Function],column:Object},computed:{uiDatatype:function(){return this.column&&this.column.uidt},uiDatatypeIcon:function(){var e=this,t=this.uiDatatype&&i.c.find((function(t){return t.name===e.uiDatatype}));return t&&t.icon},abstractType:function(){return this.sqlUi&&this.column&&this.column.dt&&this.sqlUi.getAbstractType(this.column)},dataTypeLow:function(){return this.column&&this.column.dt&&this.column.dt.toLowerCase()},isBoolean:function(){return"boolean"===this.abstractType},isString:function(){return"string"===this.abstractType},isTextArea:function(){return this.uiDatatype===a.f.LongText},isInt:function(){return"integer"===this.abstractType},isFloat:function(){return"float"===this.abstractType},isDate:function(){return"date"===this.abstractType||"Date"===this.uiDatatype},isTime:function(){return"time"===this.abstractType||"Time"===this.uiDatatype},isDateTime:function(){return"datetime"===this.abstractType||"DateTime"===this.uiDatatype},isJSON:function(){return"JSON"===this.uiDatatype},isEnum:function(){return"SingleSelect"===this.uiDatatype},isSet:function(){return"MultiSelect"===this.uiDatatype},isURL:function(){return"URL"===this.uiDatatype},isEmail:function(){return this.uiDatatype===a.f.Email},isAttachment:function(){return"Attachment"===this.uiDatatype},isRating:function(){return this.uiDatatype===a.f.Rating},isCurrency:function(){return"Currency"===this.uiDatatype},isDuration:function(){return this.uiDatatype===a.f.Duration},isAutoSaved:function(){return[a.f.SingleLineText,a.f.LongText,a.f.PhoneNumber,a.f.Email,a.f.URL,a.f.Number,a.f.Decimal,a.f.Percent,a.f.Count,a.f.AutoNumber,a.f.SpecificDBType,a.f.Geometry].includes(this.uiDatatype)},isManualSaved:function(){return[a.f.Currency,a.f.Year,a.f.Time,a.f.Duration].includes(this.uiDatatype)}}}},590:function(e,t,n){var a=n(679);a.__esModule&&(a=a.default),"string"==typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);(0,n(178).default)("663b7b08",a,!0,{sourceMap:!1})},591:function(e,t,n){var a=n(684);a.__esModule&&(a=a.default),"string"==typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);(0,n(178).default)("59961999",a,!0,{sourceMap:!1})},592:function(e,t,n){var a=n(687);a.__esModule&&(a=a.default),"string"==typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);(0,n(178).default)("414f2b04",a,!0,{sourceMap:!1})},594:function(e,t,n){var a=n(690);a.__esModule&&(a=a.default),"string"==typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);(0,n(178).default)("06566b9a",a,!0,{sourceMap:!1})},595:function(e,t,n){var a=n(693);a.__esModule&&(a=a.default),"string"==typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);(0,n(178).default)("184fb006",a,!0,{sourceMap:!1})},598:function(e,t,n){"use strict";var a={name:"DlgLabelSubmitCancel",directives:{},components:{},validate:function(e){e.params;return!0},props:["heading","dialogShow","actionsMtd","title","type"],data:function(){return{}},head:function(){return{}},computed:{},watch:{},created:function(){},beforeDestroy:function(){},methods:{},beforeCreated:function(){},xcCronSavented:function(){},destroy:function(){}},i=n(191),o=n(210),r=n.n(o),l=n(354),s=n(372),c=n(217),u=n(674),d=n(312),m=n(596),p=Object(i.a)(a,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-dialog",{attrs:{value:e.dialogShow,persistent:"","max-width":"450"},on:{keydown:[function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"esc",27,t.key,["Esc","Escape"])?null:e.actionsMtd("hideDialog")},function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.actionsMtd.apply(null,arguments)}]},scopedSlots:e._u([{key:"activator",fn:function(t){var a=t.on;return[n("p",e._g({staticClass:"hidden"},a))]}}])},[e._v(" "),n("v-card",{staticClass:"elevation-1"},[n("v-card-title",{staticClass:"grey darken-2 subheading ",staticStyle:{height:"30px"}},[e._v("\n      "+e._s(e.title||"")+"\n    ")]),e._v(" "),n("v-card-text",{staticClass:"pt-4 pl-4"},[n("span",{staticClass:"headline "},[e._v(e._s(e.heading))])]),e._v(" "),n("v-divider"),e._v(" "),n("v-card-actions",{staticClass:"pa-4"},[n("v-spacer"),e._v(" "),n("v-btn",{attrs:{small:""},on:{click:function(t){return e.actionsMtd("hideDialog")}}},[e._v("\n        "+e._s(e.$t("general.cancel"))+"\n      ")]),e._v(" "),n("v-btn",{class:e.type,attrs:{small:""},on:{click:function(t){return e.actionsMtd()}}},[e._v("\n        "+e._s(e.$t("general.submit"))+"\n      ")])],1)],1)],1)}),[],!1,null,"5d82d5ed",null);t.a=p.exports;r()(p,{VBtn:l.a,VCard:s.a,VCardActions:c.a,VCardText:c.b,VCardTitle:c.c,VDialog:u.a,VDivider:d.a,VSpacer:m.a})},623:function(e,t,n){var a=n(744);a.__esModule&&(a=a.default),"string"==typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);(0,n(178).default)("3de48ee8",a,!0,{sourceMap:!1})},652:function(e,t,n){var a=n(906);a.__esModule&&(a=a.default),"string"==typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);(0,n(178).default)("716098c5",a,!0,{sourceMap:!1})},653:function(e,t,n){var a=n(908);a.__esModule&&(a=a.default),"string"==typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);(0,n(178).default)("18015200",a,!0,{sourceMap:!1})},654:function(e,t,n){var a=n(910);a.__esModule&&(a=a.default),"string"==typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);(0,n(178).default)("43ff7f1c",a,!0,{sourceMap:!1})},655:function(e,t,n){var a=n(912);a.__esModule&&(a=a.default),"string"==typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);(0,n(178).default)("6a2534d9",a,!0,{sourceMap:!1})},656:function(e,t,n){var a=n(914);a.__esModule&&(a=a.default),"string"==typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);(0,n(178).default)("ad8cdca8",a,!0,{sourceMap:!1})},657:function(e,t,n){var a=n(916);a.__esModule&&(a=a.default),"string"==typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);(0,n(178).default)("22177d42",a,!0,{sourceMap:!1})},658:function(e,t,n){var a=n(918);a.__esModule&&(a=a.default),"string"==typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);(0,n(178).default)("6f79614e",a,!0,{sourceMap:!1})},660:function(e,t,n){var a=n(920);a.__esModule&&(a=a.default),"string"==typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);(0,n(178).default)("f0ccb620",a,!0,{sourceMap:!1})},661:function(e,t,n){var a=n(922);a.__esModule&&(a=a.default),"string"==typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);(0,n(178).default)("52415595",a,!0,{sourceMap:!1})},663:function(e,t,n){var a=n(926);a.__esModule&&(a=a.default),"string"==typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);(0,n(178).default)("0fb30ea8",a,!0,{sourceMap:!1})},670:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));n(370),n(263);var a=["jpeg","gif","png","png","svg","bmp","ico","jpg","webp"],i=function(e,t){return a.some((function(t){return e&&e.toLowerCase().endsWith(".".concat(t))}))||(t||"").startsWith("image/")}},678:function(e,t,n){"use strict";n(590)},679:function(e,t,n){var a=n(177)(!1);a.push([e.i,"",""]),e.exports=a},683:function(e,t,n){"use strict";n(591)},684:function(e,t,n){var a=n(177)(!1);a.push([e.i,".set-item[data-v-38574e10]{display:inline-block;border-radius:25px;white-space:nowrap}",""]),e.exports=a},686:function(e,t,n){"use strict";n(592)},687:function(e,t,n){var a=n(177)(!1);a.push([e.i,".img-container[data-v-4e410d1d]{margin:0 -2px}.no-overflow[data-v-4e410d1d]{overflow:hidden}.add[data-v-4e410d1d]{transition:background-color .2s;height:33px;margin:5px 2px}.add[data-v-4e410d1d],.thumbnail[data-v-4e410d1d]{border-radius:4px}.thumbnail[data-v-4e410d1d]{height:99px;width:99px;margin:2px}.thumbnail img[data-v-4e410d1d]{max-width:99px}.main[data-v-4e410d1d]{min-height:20px;position:relative;height:auto}.expand-icon[data-v-4e410d1d]{margin-left:8px;border-radius:2px;transition:background-color .3s}.expand-icon[data-v-4e410d1d]:hover{background-color:var(--v-primary-lighten4)}.modal-thumbnail img[data-v-4e410d1d]{height:50px;max-width:100%;border-radius:4px}.modal-thumbnail[data-v-4e410d1d]{position:relative;margin:10px}.remove-icon[data-v-4e410d1d]{position:absolute;top:5px;right:5px}.modal-thumbnail-card .download-icon[data-v-4e410d1d]{position:absolute;bottom:5px;right:5px;opacity:0;transition:opacity .4s}.modal-thumbnail-card:hover .download-icon[data-v-4e410d1d]{opacity:1}.image-overlay-container[data-v-4e410d1d]{max-height:100vh;overflow-y:auto;position:relative}.image-overlay-container .close-icon[data-v-4e410d1d]{position:fixed;top:15px;right:15px}.overlay-thumbnail[data-v-4e410d1d]{transition:transform .4s,opacity .4s;opacity:.5}.overlay-thumbnail.active[data-v-4e410d1d]{transform:scale(1.4);opacity:1}.overlay-thumbnail[data-v-4e410d1d]:hover{opacity:1}.modal-title[data-v-4e410d1d]{text-overflow:ellipsis;white-space:nowrap;width:100%;overflow:hidden}.modal-thumbnail-card[data-v-4e410d1d]{transition:transform .4s}.modal-thumbnail-card[data-v-4e410d1d]:hover{transform:scale(1.05)}.drop-overlay[data-v-4e410d1d]{z-index:5;position:absolute;width:100%;height:100%;left:0;right:0;top:0;bottom:5px;background:hsla(0,0%,66.7%,.26667);display:flex;justify-content:center;align-items:center;pointer-events:none}.expand-icon[data-v-4e410d1d]{opacity:0;transition:opacity .4s}.main:hover .expand-icon[data-v-4e410d1d]{opacity:1}",""]),e.exports=a},689:function(e,t,n){"use strict";n(594)},690:function(e,t,n){var a=n(177)(!1);a.push([e.i,".color-picker[data-v-3c2de60e]{display:flex;align-items:center;justify-content:center;flex-direction:column;background:#fff;padding:10px}.color-picker-row[data-v-3c2de60e]{display:flex;flex-direction:row}.color-selector[data-v-3c2de60e]{position:relative;height:32px;width:32px;margin:10px 5px;border-radius:5px;-webkit-text-stroke-width:1px;-webkit-text-stroke-color:#fff}.color-selector.selected[data-v-3c2de60e],.color-selector[data-v-3c2de60e]:hover{filter:brightness(90%);-webkit-filter:brightness(90%)}[data-v-3c2de60e] .v-input__control{height:auto!important}",""]),e.exports=a},691:function(e,t,n){"use strict";var a=n(216);n(53);t.a={name:"MonacoJsonObjectEditor",props:{value:{type:Object},theme:{type:String,default:"vs-dark"},lang:String,options:Object,readOnly:Boolean,amdRequire:{type:Function},sqlType:String,actions:Array,tables:Array,columnNames:Object,columnNameCbk:Function,validate:{type:Boolean,default:!0}},emits:["validate"],model:{event:"change"},watch:{value:function(e){this.editor&&!this.deepcompare(e,JSON.parse(this.editor.getValue()))&&this.editor.setValue(JSON.stringify(e,0,2))}},mounted:function(){var e=this;this.$nextTick((function(){if(e.amdRequire)e.amdRequire(["vs/editor/editor.main"],(function(){e.initMonaco(window.monaco)}));else{var t=n(515);e.monaco=t,e.initMonaco(t),setTimeout((function(){return e.resizeLayout()}),1e3)}}))},unmounted:function(){},beforeDestroy:function(){this.editor&&this.editor.dispose()},methods:{resizeLayout:function(){this.editor.layout()},initMonaco:function(e){var t=this,n=JSON.stringify(this.value,0,2),a=e.editor.createModel(n,"json");e.languages.json.jsonDefaults.setDiagnosticsOptions({validate:this.validate}),this.editor=e.editor.create(this.$el,{model:a,theme:this.theme}),this.editor.onDidChangeModelContent((function(e){var n=t.editor.getValue();try{t.deepcompare(t.value,JSON.parse(n))||t.$emit("change",JSON.parse(n),e),t.$emit("validate",!0)}catch(e){t.$emit("validate",!1,e)}}))},getMonaco:function(){return this.editor},getMonacoModule:function(){return this.monaco},deepcompare:function(e,t){if(e===t)return!0;if(null==e||null===t)return!1;if(Object(a.a)(e)!==Object(a.a)(t))return!1;if("object"!==Object(a.a)(e))return e===t;if(Object.keys(e).length!=Object.keys(t).length)return!1;for(var n in e){if(!(n in t))return!1;if(!this.deepcompare(e[n],t[n]))return!1}return!0}},render:function(e){return e("div")},created:function(){},destroyed:function(){}}},692:function(e,t,n){"use strict";n(595)},693:function(e,t,n){var a=n(177)(!1);a.push([e.i,"[data-v-4e2250ac] .formula-suggestion .v-card__text{font-size:.75rem;padding:8px;text-align:center}.hint[data-v-4e2250ac]{font-size:.75rem;line-height:normal;padding:10px 5px}",""]),e.exports=a},694:function(e,t,n){var a=n(944);a.__esModule&&(a=a.default),"string"==typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);(0,n(178).default)("d82d7c9e",a,!0,{sourceMap:!1})},695:function(e,t,n){var a=n(948);a.__esModule&&(a=a.default),"string"==typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);(0,n(178).default)("56ec3340",a,!0,{sourceMap:!1})},696:function(e,t,n){var a=n(950);a.__esModule&&(a=a.default),"string"==typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);(0,n(178).default)("651087ca",a,!0,{sourceMap:!1})},697:function(e,t,n){var a=n(952);a.__esModule&&(a=a.default),"string"==typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);(0,n(178).default)("482ef493",a,!0,{sourceMap:!1})},698:function(e,t,n){var a=n(954);a.__esModule&&(a=a.default),"string"==typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);(0,n(178).default)("1a50747a",a,!0,{sourceMap:!1})},699:function(e,t,n){var a=n(956);a.__esModule&&(a=a.default),"string"==typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);(0,n(178).default)("e289b7ea",a,!0,{sourceMap:!1})},700:function(e,t,n){var a=n(958);a.__esModule&&(a=a.default),"string"==typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);(0,n(178).default)("1b83b27a",a,!0,{sourceMap:!1})},701:function(e,t,n){var a=n(960);a.__esModule&&(a=a.default),"string"==typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);(0,n(178).default)("765058d2",a,!0,{sourceMap:!1})},702:function(e,t,n){var a=n(962);a.__esModule&&(a=a.default),"string"==typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);(0,n(178).default)("fc3e9534",a,!0,{sourceMap:!1})},703:function(e,t,n){var a=n(964);a.__esModule&&(a=a.default),"string"==typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);(0,n(178).default)("253d29d2",a,!0,{sourceMap:!1})},704:function(e,t,n){var a=n(966);a.__esModule&&(a=a.default),"string"==typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);(0,n(178).default)("b9c788cc",a,!0,{sourceMap:!1})},705:function(e,t,n){var a=n(968);a.__esModule&&(a=a.default),"string"==typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);(0,n(178).default)("0aa64dd5",a,!0,{sourceMap:!1})},706:function(e,t,n){var a=n(970);a.__esModule&&(a=a.default),"string"==typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);(0,n(178).default)("17daeae7",a,!0,{sourceMap:!1})},707:function(e,t,n){var a=n(972);a.__esModule&&(a=a.default),"string"==typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);(0,n(178).default)("9481fa84",a,!0,{sourceMap:!1})},710:function(e,t,n){var a=n(974);a.__esModule&&(a=a.default),"string"==typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);(0,n(178).default)("3263e36a",a,!0,{sourceMap:!1})},711:function(e,t,n){var a=n(976);a.__esModule&&(a=a.default),"string"==typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);(0,n(178).default)("df7564aa",a,!0,{sourceMap:!1})},712:function(e,t,n){var a=n(978);a.__esModule&&(a=a.default),"string"==typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);(0,n(178).default)("669f7cd2",a,!0,{sourceMap:!1})},714:function(e,t,n){var a=n(982);a.__esModule&&(a=a.default),"string"==typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);(0,n(178).default)("64908e60",a,!0,{sourceMap:!1})},733:function(e,t,n){var a=n(1001);a.__esModule&&(a=a.default),"string"==typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);(0,n(178).default)("2a1611a0",a,!0,{sourceMap:!1})},734:function(e,t,n){var a=n(1003);a.__esModule&&(a=a.default),"string"==typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);(0,n(178).default)("933a2ae6",a,!0,{sourceMap:!1})},735:function(e,t,n){var a=n(1005);a.__esModule&&(a=a.default),"string"==typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);(0,n(178).default)("f82e089a",a,!0,{sourceMap:!1})},743:function(e,t,n){"use strict";n(623)},744:function(e,t,n){var a=n(177)(!1);a.push([e.i,".long-text-cell[data-v-624efb6f]{white-space:break-spaces}",""]),e.exports=a},905:function(e,t,n){"use strict";n(652)},906:function(e,t,n){var a=n(177)(!1);a.push([e.i,".wrapper[data-v-07ac66a9]{border:2px solid rgba(127,130,139,.2);border-radius:4px}[data-v-07ac66a9] .v-input__control{height:33px}",""]),e.exports=a},907:function(e,t,n){"use strict";n(653)},908:function(e,t,n){var a=n(177)(!1);a.push([e.i,".wrapper[data-v-2cc38b2c]{border:2px solid rgba(127,130,139,.2);border-radius:4px}[data-v-2cc38b2c] .v-input__append-inner{margin-top:4px!important}",""]),e.exports=a},909:function(e,t,n){"use strict";n(654)},910:function(e,t,n){var a=n(177)(!1);a.push([e.i,".wrapper[data-v-1f5a80dc]{border:2px solid rgba(127,130,139,.2);border-radius:4px}[data-v-1f5a80dc] .v-input__append-inner{margin-top:4px!important}",""]),e.exports=a},911:function(e,t,n){"use strict";n(655)},912:function(e,t,n){var a=n(177)(!1);a.push([e.i,".nc-rating-wrapper[data-v-15dc077c]{display:flex;grid-gap:16px;gap:16px}",""]),e.exports=a},913:function(e,t,n){"use strict";n(656)},914:function(e,t,n){var a=n(177)(!1);a.push([e.i,".nc-rating-wrapper[data-v-0a637a87]{display:flex;grid-gap:16px;gap:16px}",""]),e.exports=a},915:function(e,t,n){"use strict";n(657)},916:function(e,t,n){var a=n(177)(!1);a.push([e.i,".currency-wrapper[data-v-2e3e5e9b]{margin:0}[data-v-2e3e5e9b] .v-input__append-inner{margin-top:4px!important}",""]),e.exports=a},917:function(e,t,n){"use strict";n(658)},918:function(e,t,n){var a=n(177)(!1);a.push([e.i,".duration-wrapper[data-v-699cf064]{margin:0}.duration-wrapper .caption[data-v-699cf064]:first-child{margin:-10px 0 10px 5px}",""]),e.exports=a},919:function(e,t,n){"use strict";n(660)},920:function(e,t,n){var a=n(177)(!1);a.push([e.i,".chips-wrapper .chips[data-v-99334390]{max-width:100%}.chips-wrapper .chips.lookup-items[data-v-99334390]{flex-wrap:wrap;grid-row-gap:3px;row-gap:3px;grid-gap:3px;gap:3px;margin:3px 0}.chips-wrapper.active .chips[data-v-99334390]{max-width:calc(100% - 44px)}",""]),e.exports=a},921:function(e,t,n){"use strict";n(661)},922:function(e,t,n){var a=n(177)(!1);a.push([e.i,".formula-cell-wrapper[data-v-1c91d9a8]{padding:10px}.edit-warning[data-v-1c91d9a8]{text-align:left;margin-top:10px;color:#e65100}",""]),e.exports=a},925:function(e,t,n){"use strict";n(663)},926:function(e,t,n){var a=n(177)(!1);a.push([e.i,"[data-v-2536c685] .dialog{position:relative}[data-v-2536c685] .dialog .close-icon{width:auto;position:absolute;right:10px;top:10px;z-index:9}",""]),e.exports=a},943:function(e,t,n){"use strict";n(694)},944:function(e,t,n){var a=n(177)(!1);a.push([e.i,"[data-v-036d6618] .wrapper{border:2px solid rgba(127,130,139,.2);border-radius:4px}[data-v-036d6618] .v-input__slot{min-height:auto!important}[data-v-036d6618] .v-input:not(.v-input--is-focused) fieldset{border-color:rgba(127,130,139,.2)!important}[data-v-036d6618] .data-type .v-input__append-inner,[data-v-036d6618] .formula-type .v-input__append-inner,[data-v-036d6618] .ui-type .v-input__append-inner{margin-top:4px!important}[data-v-036d6618] .ui-type input{height:24px}[data-v-036d6618] .v-input--selection-controls__input>i{transform:scale(.83)}[data-v-036d6618] label{font-size:.75rem!important}[data-v-036d6618] .v-text-field--outlined.v-input--dense .v-label:not(.v-label--active){top:6px}.wrapper[data-v-036d6618]{border:2px solid rgba(127,130,139,.2);border-radius:4px}.editDisabled[data-v-036d6618]{position:relative}.editDisabled .disabled-info[data-v-036d6618]{display:flex;align-items:center;justify-content:center;position:absolute;width:100%;height:100%;top:0;bottom:0;background:var(--v-backgroundColor-base);opacity:.9}.editDisabled .disabled-info>*[data-v-036d6618]{opacity:1}",""]),e.exports=a},947:function(e,t,n){"use strict";n(695)},948:function(e,t,n){var a=n(177)(!1);a.push([e.i,"[data-v-1224883c] .v-input__slot{min-height:auto!important}[data-v-1224883c] .v-input:not(.v-input--is-focused) fieldset{border-color:rgba(127,130,139,.2)!important}[data-v-1224883c] .ui-type input{height:24px}[data-v-1224883c] .v-input--selection-controls__input>i{transform:scale(.83)}[data-v-1224883c] label{font-size:.75rem!important}[data-v-1224883c] .v-text-field--outlined.v-input--dense .v-label:not(.v-label--active){top:6px}",""]),e.exports=a},949:function(e,t,n){"use strict";n(696)},950:function(e,t,n){var a=n(177)(!1);a.push([e.i,".value[data-v-1d852fbe]{width:100%;min-height:20px}",""]),e.exports=a},951:function(e,t,n){"use strict";n(697)},952:function(e,t,n){var a=n(177)(!1);a.push([e.i,"input[data-v-25494a1e],textarea[data-v-25494a1e]{width:100%;height:100%;color:var(--v-textColor-base)}",""]),e.exports=a},953:function(e,t,n){"use strict";n(698)},954:function(e,t,n){var a=n(177)(!1);a.push([e.i,".cell-container[data-v-2848aa86]{width:100%}",""]),e.exports=a},955:function(e,t,n){"use strict";n(699)},956:function(e,t,n){var a=n(177)(!1);a.push([e.i,"input[data-v-0f21b1c8],textarea[data-v-0f21b1c8]{width:100%;height:100%;color:var(--v-textColor-base)}",""]),e.exports=a},957:function(e,t,n){"use strict";n(700)},958:function(e,t,n){var a=n(177)(!1);a.push([e.i,"[data-v-3be739d6] .v-input,[data-v-3be739d6] .v-text-field{margin-top:0!important;padding-top:0!important;font-size:inherit!important}.edit-warning[data-v-3be739d6]{padding:10px;text-align:left;color:#e65100}",""]),e.exports=a},959:function(e,t,n){"use strict";n(701)},960:function(e,t,n){var a=n(177)(!1);a.push([e.i,"input[data-v-c02fe110],textarea[data-v-c02fe110]{width:100%;min-height:60px;height:100%;color:var(--v-textColor-base)}",""]),e.exports=a},961:function(e,t,n){"use strict";n(702)},962:function(e,t,n){var a=n(177)(!1);a.push([e.i,"[data-v-b1bfaf16] .v-select{min-width:150px}[data-v-b1bfaf16] .v-input__slot{padding-right:0!important;padding-left:35px!important}[data-v-b1bfaf16] .v-input__icon.v-input__icon--clear{width:15px!important;min-width:13px!important}[data-v-b1bfaf16] .v-input__icon.v-input__icon--clear .v-icon{font-size:13px!important}",""]),e.exports=a},963:function(e,t,n){"use strict";n(703)},964:function(e,t,n){var a=n(177)(!1);a.push([e.i,"input[data-v-6599487a]{width:100%;height:100%;color:var(--v-textColor-base)}",""]),e.exports=a},965:function(e,t,n){"use strict";n(704)},966:function(e,t,n){var a=n(177)(!1);a.push([e.i,"input[data-v-142c7366]{width:100%;height:100%;color:var(--v-textColor-base)}",""]),e.exports=a},967:function(e,t,n){"use strict";n(705)},968:function(e,t,n){var a=n(177)(!1);a.push([e.i,".value[data-v-7bfa3712]{width:100%;min-height:20px}",""]),e.exports=a},969:function(e,t,n){"use strict";n(706)},970:function(e,t,n){var a=n(177)(!1);a.push([e.i,"select[data-v-230906c0]{width:100%;height:100%;color:var(--v-textColor-base);-webkit-appearance:menulist;-moz-appearance:menulist;appearance:menulist}",""]),e.exports=a},971:function(e,t,n){"use strict";n(707)},972:function(e,t,n){var a=n(177)(!1);a.push([e.i,".duration-cell-wrapper[data-v-6071b89c]{padding:10px}.duration-warning[data-v-6071b89c]{text-align:left;margin-top:10px;color:#e65100}",""]),e.exports=a},973:function(e,t,n){"use strict";n(710)},974:function(e,t,n){var a=n(177)(!1);a.push([e.i,".items-container[data-v-e8d4bfd6]{overflow-x:visible;max-height:min(500px,60vh);overflow-y:auto}.primary-value .primary-key[data-v-e8d4bfd6]{display:none;margin-left:.5em}.primary-value:hover .primary-key[data-v-e8d4bfd6]{display:inline}.child-card[data-v-e8d4bfd6]{cursor:pointer}.child-card[data-v-e8d4bfd6]:hover{box-shadow:0 0 .2em var(--v-textColor-lighten5)}.hm-items[data-v-e8d4bfd6]{flex-wrap:wrap;grid-row-gap:3px;row-gap:3px;grid-gap:3px;gap:3px;margin:3px auto}[data-v-e8d4bfd6] .unlink-icon{padding:0 1px 2px;margin-top:2px;margin-right:-2px}[data-v-e8d4bfd6] .search-field input{max-height:28px!important}[data-v-e8d4bfd6] .search-field .v-input__slot{min-height:auto!important}.chips-wrapper .chips[data-v-e8d4bfd6]{max-width:100%}.chips-wrapper.active .chips[data-v-e8d4bfd6]{max-width:calc(100% - 44px)}",""]),e.exports=a},975:function(e,t,n){"use strict";n(711)},976:function(e,t,n){var a=n(177)(!1);a.push([e.i,".wrapper[data-v-168550df]{flex-wrap:wrap}",""]),e.exports=a},977:function(e,t,n){"use strict";n(712)},978:function(e,t,n){var a=n(177)(!1);a.push([e.i,".items-container[data-v-aab171e2]{overflow-x:visible;max-height:min(500px,60vh);overflow-y:auto}.primary-value .primary-key[data-v-aab171e2]{display:none;margin-left:.5em}.primary-value:hover .primary-key[data-v-aab171e2]{display:inline}.child-list-modal[data-v-aab171e2]{position:relative}.child-list-modal .remove-child-icon[data-v-aab171e2]{position:absolute;right:10px;top:10px;bottom:10px;opacity:0}.child-list-modal:hover .remove-child-icon[data-v-aab171e2]{opacity:1}.child-card[data-v-aab171e2]{cursor:pointer}.child-card[data-v-aab171e2]:hover{box-shadow:0 0 .2em var(--v-textColor-lighten5)}.hm-items[data-v-aab171e2]{flex-wrap:wrap;grid-row-gap:3px;row-gap:3px;grid-gap:3px;gap:3px;margin:3px auto}.chips-wrapper .chips[data-v-aab171e2]{max-width:100%}.chips-wrapper.active .chips[data-v-aab171e2]{max-width:calc(100% - 44px)}",""]),e.exports=a},981:function(e,t,n){"use strict";n(714)},982:function(e,t,n){var a=n(177)(!1);a.push([e.i,".nc-hint[data-v-31036bb8]{font-size:.61rem;color:grey}.nc-virtual-cell[data-v-31036bb8]{position:relative}.nc-locked-overlay[data-v-31036bb8]{position:absolute;z-index:2;height:100%;width:100%;top:0;left:0}",""]),e.exports=a},983:function(e,t,n){var a=n(1048);a.__esModule&&(a=a.default),"string"==typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);(0,n(178).default)("ac742714",a,!0,{sourceMap:!1})}}]);