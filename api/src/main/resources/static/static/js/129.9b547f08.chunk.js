"use strict";(self.webpackChunkstartbuilding=self.webpackChunkstartbuilding||[]).push([[129],{6549:function(e,n,t){t(2791);n.Z=t.p+"static/media/apple.7f266128e9ea9928775383a0a3930d6e.svg"},3280:function(e,n,t){t(2791);n.Z=t.p+"static/media/architecture.631a4752885caafd43ea604fd6b6ff3a.svg"},8006:function(e,n,t){t(2791);n.Z=t.p+"static/media/google.b58ffc002585a28021a00030f4b2a965.svg"},4947:function(e,n,t){t(2791);n.Z=t.p+"static/media/linkedin.7ec10e715d53d7e7f09b2649e06a1294.svg"},8330:function(e,n,t){t.r(n),t.d(n,{default:function(){return ht}});var i=t(2791),o=t(5405),l=t(7637),r=t(8009),d=t(2183),a=t(9421);var u=t.p+"static/media/search-black.d9666e6d4103062e194c9e0c886e8e91.svg";var s=t.p+"static/media/filter.e1bc3dbd425be94f328d303dfce58414.svg";var c=t.p+"static/media/chevron-left.895bf471dad3151ce05565b8b1439242.svg",v=t(6618),f=t(184),h=function(e){var n=e.title,t=e.search;return(0,f.jsxs)("div",{className:"card-head",children:[(0,f.jsxs)("div",{className:"card-f-row",children:[(0,f.jsx)("b",{children:n}),(0,f.jsxs)("div",{className:"card-filter",children:[(0,f.jsx)("u",{children:"Trier et filtrer"}),(0,f.jsx)("img",{src:s}),(0,f.jsx)("img",{src:u})]})]}),(0,f.jsxs)("div",{className:"card-search",children:[(0,f.jsxs)("div",{className:"navigate",children:[(0,f.jsx)("div",{className:"black-round",children:(0,f.jsx)("img",{src:c})}),(0,f.jsx)("div",{className:"black-round",children:(0,f.jsx)("img",{src:c})})]}),"string"===typeof t?(0,f.jsx)(v.Z,{type:"card-header",title:t,doThings:function(){return console.log()}}):t]}),(0,f.jsx)("div",{className:"break"})]})},p=t(1413),m=t(3433),g={label:"empty",id:0,iconName:"placeholder"};var x=function(e){var n=e.favs,t=n.length>=10?n:[].concat((0,m.Z)(n),(0,m.Z)(Array(10-n.length).fill(g).map((function(e,n){return(0,p.Z)((0,p.Z)({},e),{},{id:e.label+n})}))));return(0,f.jsxs)("div",{className:"fav-block-container-0i",children:[(0,f.jsx)("div",{className:"fav-block-title",children:"Favoris"}),(0,f.jsx)("div",{className:"fav-blocks",children:t.map((function(e){return(0,f.jsx)("button",{className:"fav-btn ".concat(e.label),type:"button",children:"empty"===e.label?"+":e.label},e.id)}))})]})},j=t(4942),b=t(5241),y=t(5850),w=function(){var e,n,t=(0,o.v9)((function(e){return e.projects.payload})),i=(0,o.v9)((function(e){return e.treeNode.project})),l=(0,o.v9)((function(e){return e.treeNode.activeNode})),r=(0,o.v9)((function(e){return e.treeNode.activeNodePath})),d=(0,o.I0)(),a=Object.values((0,p.Z)((0,p.Z)({},null!==r&&void 0!==r?r:{}),l?(0,j.Z)({},null===l||void 0===l||null===(e=l.data)||void 0===e||null===(n=e.attributes)||void 0===n?void 0:n.id,l):{})).sort(y.ow),u=function(e){var n,t;return e===(null===l||void 0===l||null===(n=l.data)||void 0===n||null===(t=n.attributes)||void 0===t?void 0:t.id)||r&&"undefined"!==typeof r[e]},s=a.length>0&&a[0],c=(null===t||void 0===t?void 0:t.length)>0?t.filter((function(e){return!(null!==e&&void 0!==e&&e.parentId)})):[],v=s?"Explorer":"Mes projets",h=function(e){null===e||void 0===e||e.stopPropagation(),d((0,b.Jy)(null)),d((0,b.rZ)({})),d((0,b.Y9)(null))};return(0,f.jsx)("div",{tabIndex:0,role:"button",onKeyDown:function(e){var n,t,i,o,r;"backspace"===(null===e||void 0===e||null===(n=e.key)||void 0===n?void 0:n.toLowerCase())&&(d((0,b.Jy)(null===l||void 0===l?void 0:l.parent)),(0,y.gV)(null===l||void 0===l||null===(t=l.parent)||void 0===t||null===(i=t.data)||void 0===i||null===(o=i.attributes)||void 0===o||null===(r=o.id)||void 0===r?void 0:r.toString()))},className:"explorer-0o87uu no-padding",children:s?a.map((function(e,n){var t,i,o,l,r,s=null===e||void 0===e||null===(t=e.children)||void 0===t?void 0:t.filter((function(e){var n,t;return"empty"!==(null===e||void 0===e||null===(n=e.data)||void 0===n||null===(t=n.attributes)||void 0===t?void 0:t.nodeType)}));return(0,f.jsxs)("div",{tabIndex:0,role:"button",className:"explore-bread-crumbs-0r",children:[(0,f.jsx)("span",{className:"separator-arrow-p",children:n>0?">":""}),(0,f.jsxs)("div",{tabIndex:0,role:"button",className:"explorer-crumb-0ijf4",onClick:function(){return function(e){var n,t,i;d((0,b.Jy)(e)),(0,y.gV)(null===e||void 0===e||null===(n=e.data)||void 0===n||null===(t=n.attributes)||void 0===t||null===(i=t.id)||void 0===i?void 0:i.toString())}(e)},children:[0===n?(0,f.jsx)("button",{className:"explore-close-icon",onClick:h,children:"x"}):null,null===e||void 0===e||null===(r=e.data)||void 0===r?void 0:r.name,s&&(null===s||void 0===s?void 0:s.length)>0?(0,f.jsxs)(f.Fragment,{children:[n===a.length-1?(0,f.jsx)("svg",{width:"20px",height:"20px",viewBox:"0 0 20 20",focusable:"false",fill:"#000000",children:(0,f.jsx)("polygon",{points:"5,8 10,13 15,8"})}):null,(0,f.jsx)("div",{className:"explorer-dropdown-m3uu",children:s.map((function(e){var n,t,i,o,l,r,a,s,c;return(0,f.jsx)("button",{type:"button",title:null===e||void 0===e||null===(n=e.data)||void 0===n||null===(t=n.attributes)||void 0===t||null===(i=t.description)||void 0===i?void 0:i.toString(),className:"explorer-dropdown-m3uu-it3m ".concat(u(null===e||void 0===e||null===(o=e.data)||void 0===o||null===(l=o.attributes)||void 0===l?void 0:l.id)?"active":""),onClick:function(n){return function(e,n){e.stopPropagation(),d((0,b.Jy)(n))}(n,e)},children:null===e||void 0===e||null===(c=e.data)||void 0===c?void 0:c.name},null===e||void 0===e||null===(r=e.data)||void 0===r||null===(a=r.attributes)||void 0===a||null===(s=a.id)||void 0===s?void 0:s.toString())}))})]}):null]})]},null===e||void 0===e||null===(i=e.data)||void 0===i||null===(o=i.attributes)||void 0===o||null===(l=o.id)||void 0===l?void 0:l.toString())})):(0,f.jsx)("div",{className:"explore-search-project-09",children:(0,f.jsxs)("div",{tabIndex:0,role:"button",className:"explore-search-button-div",children:[v,c.length>0?(0,f.jsx)("div",{className:"explorer-proj-dropdown-m3uu",children:[].concat((0,m.Z)(c),[{id:-1,name:"Nouveau projet",description:"Nouveau projet"}]).map((function(e){var n,t;return(0,f.jsx)("button",{type:"button",title:e.description,className:"explorer-proj-dropdown-m3uu-it3m ".concat((null===(n=e.id)||void 0===n?void 0:n.toString())===(null===i||void 0===i||null===(t=i.id)||void 0===t?void 0:t.toString())?"active":""),onClick:function(){return function(e){var n,t;-1===e.id?h():(d((0,b.Y9)(e)),null!==e&&void 0!==e&&e.tree&&(0,y.gV)(null===e||void 0===e||null===(n=e.tree)||void 0===n||null===(t=n.attributes)||void 0===t?void 0:t.id))}(e)},children:e.name},e.id)}))}):null]})})})},Z=t(3174),k=t(4483),N=t(2001),C=t(6221),S=t(9439),I=t(3168),E=t(5334),D=t(5987),_=["onEnter","style","className","onBlur","defaultValue","readonly","round"],R=function(e){var n=e.onEnter,t=e.style,o=e.className,l=e.onBlur,r=e.defaultValue,d=e.readonly,a=e.round,u=(0,D.Z)(e,_),s=(0,i.useState)(""),c=(0,S.Z)(s,2),v=c[0],h=c[1];return(0,i.useEffect)((function(){h(null===r||void 0===r?void 0:r.toString())}),[r]),(0,f.jsx)("input",(0,p.Z)((0,p.Z)({style:(0,p.Z)((0,p.Z)({},{width:"100%",background:"transparent",border:"none",borderBottom:"1px solid transparent",outline:"none",margin:0,lineHeight:"inherit",fontFamily:"inherit",fontSize:"inherit",borderRadius:a?50:0}),null!==t&&void 0!==t?t:{}),onKeyDown:function(e){var t,i,o,l=null===e||void 0===e||null===(t=e.target)||void 0===t?void 0:t.value;if(n)if(null!==e&&void 0!==e&&e.key&&"enter"===(null===e||void 0===e||null===(i=e.key)||void 0===i?void 0:i.toLowerCase()))(null===l||void 0===l?void 0:l.toString())!==(null===r||void 0===r?void 0:r.toString())&&n(l);else if(null!==e&&void 0!==e&&e.key&&"tab"===(null===e||void 0===e||null===(o=e.key)||void 0===o?void 0:o.toLowerCase())){var d;(null===l||void 0===l||null===(d=l.toString())||void 0===d?void 0:d.trim())!==(null===r||void 0===r?void 0:r.toString())&&n(l)}},onBlur:function(e){var n,t,i=null===e||void 0===e||null===(n=e.target)||void 0===n?void 0:n.value;(console.log("blurring",{val:i}),l&&(null===i||void 0===i?void 0:i.toString())!==(null===r||void 0===r?void 0:r.toString()))&&l(null===e||void 0===e||null===(t=e.target)||void 0===t?void 0:t.value)},readOnly:d,value:v,onChange:function(e){return h(e.target.value)}},u),{},{className:"editable-cell-sb ".concat(null!==o&&void 0!==o?o:"")}))},A=["children"],T=function(e){var n=e.children,t=(0,D.Z)(e,A);return(0,f.jsx)("tr",(0,p.Z)((0,p.Z)({},t),{},{children:n}))},L=t(1260),B=["onChange","onEnter","style","className","options","selected","color","editable","disabled"],F=function(e){var n,t=e.onChange,o=(e.onEnter,e.style),l=e.className,r=e.options,d=e.selected,a=e.color,u=e.editable,s=e.disabled,c=(0,D.Z)(e,B),v=(0,I.$)().t,h=null===r||void 0===r?void 0:r.find((function(e){return(null===e||void 0===e?void 0:e.label)===d})),m=(0,i.useState)(!1),g=(0,S.Z)(m,2),x=g[0],j=g[1],b=(0,i.useState)(""),w=(0,S.Z)(b,2),Z=w[0],k=w[1];return(0,f.jsxs)("div",(0,p.Z)((0,p.Z)({style:(0,p.Z)((0,p.Z)({},{width:"100%",background:null!==a&&void 0!==a?a:"transparent",border:"none",outline:"none",margin:0,lineHeight:"inherit",fontFamily:"inherit",fontSize:"inherit",position:"relative"}),null!==o&&void 0!==o?o:{})},c),{},{className:"dropdown-select-cell-sb ".concat(null!==l&&void 0!==l?l:""),children:[(0,f.jsx)("input",{style:{width:"100%",background:"transparent",border:"none",outline:"none",margin:0,lineHeight:"inherit",fontFamily:"inherit",fontSize:"inherit",position:"relative",cursor:s?"not-allowed":"pointer"},className:"dropdown-select-cell-input",value:Z||v(null!==(n=null===h||void 0===h?void 0:h.label)&&void 0!==n?n:""),onChange:function(e){var n;return k(null===e||void 0===e||null===(n=e.target)||void 0===n?void 0:n.value)},onFocus:function(){return j(!0)},readOnly:!u,onBlur:function(){setTimeout((function(){return j(!1)}),300)}}),(0,f.jsx)(L.Z.Menu,{style:{maxHeight:100,overflow:"auto",backgroundColor:"#dfdfdf"},show:!s&&x,children:(null===r||void 0===r?void 0:r.length)>0&&(0,f.jsx)(f.Fragment,{children:null===r||void 0===r?void 0:r.map((function(e){var n,i,o=(0,y.lR)(null===e||void 0===e?void 0:e.label,{rgb:!0}).color;return(0,f.jsx)(L.Z.Item,{value:null!==(n=null===e||void 0===e?void 0:e.id)&&void 0!==n?n:null===e||void 0===e?void 0:e.label,style:{padding:"1px 0",borderLeft:(null===h||void 0===h?void 0:h.label)===(null===e||void 0===e?void 0:e.label)||(null===h||void 0===h?void 0:h.id)===(null===e||void 0===e?void 0:e.id)?"3px solid rgb(".concat(o,")"):""},children:(0,f.jsx)("button",{className:"dropdown-select-button",style:{color:"rgb(".concat(o,")"),backgroundColor:"rgba(".concat(o,", 0.4)"),padding:5},onClick:function(){var n;return function(e){t(e)}(null!==(n=null===e||void 0===e?void 0:e.label)&&void 0!==n?n:null===e||void 0===e?void 0:e.id)},children:v(null!==(i=null===e||void 0===e?void 0:e.label)&&void 0!==i?i:"")})},(null===e||void 0===e?void 0:e.label)+(null===e||void 0===e?void 0:e.id))}))})})]}))},V=t(8422),P=t(9446),M=function(e){var n=e.target,t=e.children,o=e.onDrop,l=e.onHover,r=e.style,d=e.element,a=void 0===d?"div":d,u=function(){o&&o(s.current,n)},s=(0,i.useRef)(),c=(0,V.L)((function(){return{accept:P.t,drop:u,collect:function(e){return{isOver:!!e.isOver(),item:e.getItem()}}}}),[]),v=(0,S.Z)(c,2),h=v[0],p=h.isOver,m=h.item,g=v[1];return(0,i.useEffect)((function(){"function"===typeof l&&(p?l(m,n):l())}),[p]),(0,i.useEffect)((function(){s.current=m}),[m]),(0,f.jsx)(a,{ref:g,className:"".concat(p?"data-table-xx-hover-effect":"data-table-xx-hover-effect-reset"),style:r,children:t})},z=function(e){var n=e.icon,t=e.onChange,o=e.onEnter,l=e.value,r=e.text,d=e.color,a=e.style,u=e.background,s=e.className,c=e.onClick,v=e.title,h=(0,i.useState)(!1),m=(0,S.Z)(h,2),g=m[0],x=m[1],j=(0,i.useRef)("");return(0,f.jsx)("div",{title:v,style:(0,p.Z)((0,p.Z)({},null!==a&&void 0!==a?a:{}),{},{color:d,background:u}),className:"input-button-container ".concat(null!==s&&void 0!==s?s:""),children:g?(0,f.jsx)("input",(0,p.Z)((0,p.Z)((0,p.Z)({className:"input-button-container__input",placeholder:r,autoFocus:!0,onBlur:function(e){j.current=(null===e||void 0===e?void 0:e.target).value,x(!1)},onKeyDown:function(e){var n,t;(null!==e&&void 0!==e&&e.key&&"enter"===(null===e||void 0===e||null===(n=e.key)||void 0===n?void 0:n.toLowerCase())||null!==e&&void 0!==e&&e.key&&"tab"===(null===e||void 0===e||null===(t=e.key)||void 0===t?void 0:t.toLowerCase()))&&(o&&o((null===e||void 0===e?void 0:e.target).value),x(!1),j.current="")}},l?{value:l}:{}),t?{onChange:t}:{}),{},{defaultValue:j.current})):(0,f.jsx)(f.Fragment,{children:(0,f.jsxs)("button",{onClick:c,className:"input-button-container__btn",onFocus:function(){return x(!0)},children:["function"===typeof n?n():n,r]})})})},O=(t(8193),function(e){var n=e.getRef,t=e.fileName,i=e.icon;return(0,f.jsx)("button",{style:{background:"transparent",border:"none",outline:"none",padding:2,margin:0},onClick:function(){var e=new(0,window.Table2Excel)({defaultFileName:t,tableNameDataAttribute:t}),i=n(),o="string"===typeof i?document.querySelector(i):null===i||void 0===i?void 0:i.cloneNode(!0);if(o){for(var l=o.querySelectorAll("td"),r=0;r<l.length;r++){var d,a=document.createElement("div");if(a.innerHTML=l[r].innerHTML,null!==(d=l[r].innerText)&&void 0!==d&&d.trim()){var u,s=a.querySelector("span");if(s&&"hidden"===s.style.visibility&&(l[r].innerText=""),null!==(u=l[r].innerText)&&void 0!==u&&u.endsWith("%")){var c=parseInt(l[r].innerText.substring(0,l[r].innerText.length-1));Number.isNaN(c)||(l[r].innerText=(c/100).toFixed(3))}}else{var v,f=a.querySelector("input");l[r].innerHTML=null!==(v=null===f||void 0===f?void 0:f.value)&&void 0!==v?v:""}}e.export(o)}},children:null!==i&&void 0!==i?i:(0,f.jsx)("span",{children:"Download"})})}),q=t(1067),H=t(953),W=(0,i.forwardRef)((function(e,n){return(0,f.jsxs)("td",{ref:n,role:"representation",className:"drag-handle-xx",children:[(0,f.jsxs)("div",{className:"drag-handle-bars",children:[(0,f.jsx)("div",{}),(0,f.jsx)("div",{}),(0,f.jsx)("div",{})]}),(0,f.jsxs)("div",{className:"drag-handle-bars",children:[(0,f.jsx)("div",{}),(0,f.jsx)("div",{}),(0,f.jsx)("div",{})]})]})})),U=["children","dragItem","style"];function G(e,n,t){var i="translate3d(".concat(e,"px, ").concat(n,"px, 0)");return t?{position:"absolute",transform:i,WebkitTransform:i,opacity:0,height:0}:{}}var Y=function(e){var n=e.children,t=e.dragItem,o=e.style,l=(0,D.Z)(e,U),r=(0,i.useRef)(),d=(0,i.useState)(0),a=(0,S.Z)(d,1)[0],u=(0,i.useState)(0),s=(0,S.Z)(u,1)[0],c=(0,q.c)((function(){return{type:P.t,item:t,collect:function(e){return{isDragging:!!e.isDragging()}}}})),v=(0,S.Z)(c,3),h=v[0].isDragging,m=v[1],g=v[2];return(0,i.useEffect)((function(){g((0,H.r)(),{captureDraggingState:!1})}),[]),(0,f.jsxs)("tr",(0,p.Z)((0,p.Z)({style:(0,p.Z)((0,p.Z)({},null!==o&&void 0!==o?o:{}),G(a,s,h))},l),{},{ref:m,children:[(0,f.jsx)(W,{ref:r}),n]}))},$=["data","meta","treeMeta","newColumn","newRow","appendColums","caption","groupId","handleDropItem"],K=function(e){var n,t=e.data,o=e.meta,l=e.treeMeta,r=e.newColumn,d=e.newRow,a=e.appendColums,u=e.caption,s=e.groupId,c=e.handleDropItem,v=(0,D.Z)(e,$),h=(0,i.useState)({}),g=(0,S.Z)(h,2),x=g[0],j=g[1],b=(0,i.useRef)(),y=(0,I.$)().t,w=function(e){return"string"===typeof e?e:null};(0,i.useEffect)((function(){if((null===t||void 0===t?void 0:t.length)>0){var e={};t.forEach((function(n){var t,i;null!==n&&void 0!==n&&null!==(t=n.children)&&void 0!==t&&t.length&&(null===n||void 0===n||null===(i=n.children)||void 0===i||i.forEach((function(n){n.name&&(e[n.name]=n)})))})),j(e)}}),[t]);var Z=[].concat((0,m.Z)(Object.keys((0,p.Z)((0,p.Z)({},null!==o&&void 0!==o?o:{}),null!==x&&void 0!==x?x:{}))),(0,m.Z)(a),["empty"]);return(0,f.jsx)("div",(0,p.Z)((0,p.Z)({},v),{},{style:{maxWidth:"100vw",overflow:"auto",overflowY:"auto"},children:(0,f.jsx)("div",{children:(0,f.jsxs)("details",{style:{width:"100%"},open:!0,children:[(0,f.jsx)("summary",{children:(0,f.jsxs)("div",{style:{display:"inline-flex",alignItems:"center"},children:[(0,f.jsx)("span",{style:{padding:2},children:u}),(0,f.jsx)(O,{getRef:function(){return b.current},fileName:u,icon:(0,f.jsxs)("span",{style:{display:"flex",alignItems:"center"},children:[(0,f.jsx)("span",{style:{height:20,width:20,background:"#888",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",margin:5},children:(0,f.jsx)("svg",{style:{height:20,width:20},xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 5.067 8.137",children:(0,f.jsx)("path",{d:"M3.438,2.488,1.2,4.775a.683.683,0,0,1-1,0,.782.782,0,0,1,0-1.055L3.6.2A.581.581,0,0,1,4.033,0h.262A.525.525,0,0,1,4.6.2L7.932,3.795a.782.782,0,0,1,0,1.055.683.683,0,0,1-1,0L4.889,2.639C4.306,2.245,4.053,2.132,3.438,2.488Z",transform:"scale(0.5) translate(1, 5)",fill:"#fff",fillRule:"evenodd"})})}),y("export")]})})]})}),(null===t||void 0===t?void 0:t.length)>0?(0,f.jsxs)("table",{ref:b,className:"data-table-xx",style:{borderCollapse:"collapse",borderRadius:5},children:[(0,f.jsx)("thead",{children:(0,f.jsx)(T,{children:(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)("th",{role:"representation"}),Object.entries(o).map((function(e){var n,t=(0,S.Z)(e,2),i=t[0],o=t[1];return(0,f.jsx)("th",{children:null!==(n=o.displayName)&&void 0!==n?n:i},i)})),Object.keys(x).map((function(e){return(0,f.jsx)("th",{style:{textTransform:"capitalize"},children:e},e)})),a.map((function(e){return(0,f.jsx)("th",{style:{textTransform:"capitalize"},children:e},e)})),(0,f.jsx)("th",{style:{textAlign:"center"},children:r.renderHeader()})]})})}),(0,f.jsxs)("tbody",{children:[null===t||void 0===t||null===(n=t.filter((function(e){var n;return"empty"!==(null===e||void 0===e||null===(n=e.attributes)||void 0===n?void 0:n.nodeType)})))||void 0===n?void 0:n.map((function(e,n){var t,i,d,u,c,v,h,m;return(0,f.jsxs)(Y,{dragItem:(0,p.Z)({name:null===e||void 0===e?void 0:e.name,groupId:s},null!==(t=null===e||void 0===e?void 0:e.attributes)&&void 0!==t?t:{}),id:"tree-data-table-".concat(null!==(c=null===e||void 0===e||null===(v=e.attributes)||void 0===v||null===(h=v.id)||void 0===h?void 0:h.toString())&&void 0!==c?c:null===e||void 0===e?void 0:e.name),onKeyDown:function(n){var t,i,o;return function(e,n){var t,i,o,l,r=document.getElementById("tree-data-table-".concat(e));null!==n&&void 0!==n&&n.key&&("enter"===(null===n||void 0===n||null===(t=n.key)||void 0===t?void 0:t.toLowerCase())||"arrowdown"===(null===n||void 0===n||null===(i=n.key)||void 0===i?void 0:i.toLowerCase()))&&r&&(null===r||void 0===r||null===(o=r.nextElementSibling)||void 0===o||null===(l=o.querySelector("input:not(:read-only)"))||void 0===l||l.focus())}(null!==(t=null===e||void 0===e||null===(i=e.attributes)||void 0===i||null===(o=i.id)||void 0===o?void 0:o.toString())&&void 0!==t?t:null===e||void 0===e?void 0:e.name,n)},children:[Object.entries(o).map((function(t){var i=(0,S.Z)(t,2),o=i[0],l=i[1];return(0,f.jsx)("td",{"data-key":o,children:l.render?l.render(e,n):w(e[o])},o)})),Object.values(x).map((function(t){var i,o,r;if((null===e||void 0===e||null===(i=e.children)||void 0===i?void 0:i.length)>0){var d,a,u,s,c,v,h,p,m=null===e||void 0===e||null===(d=e.children)||void 0===d?void 0:d.find((function(e){return e.name===(null===t||void 0===t?void 0:t.name)}));return m?(0,f.jsx)("td",{"data-key":m.name+(null===e||void 0===e||null===(a=e.attributes)||void 0===a?void 0:a.id),children:l.status?null===(s=l.status)||void 0===s?void 0:s.render(e,m,n):null===(c=l.data)||void 0===c?void 0:c.render(e,m,n)},m.name+(null===e||void 0===e||null===(u=e.attributes)||void 0===u?void 0:u.id)):(0,f.jsx)("td",{"data-key":(null===e||void 0===e||null===(v=e.attributes)||void 0===v?void 0:v.id)+(null===t||void 0===t?void 0:t.name),children:null===(p=l.none)||void 0===p?void 0:p.render(e,t,n)},(null===e||void 0===e||null===(h=e.attributes)||void 0===h?void 0:h.id)+(null===t||void 0===t?void 0:t.name))}return(0,f.jsx)("td",{children:null===(r=l.none)||void 0===r?void 0:r.render(e,t,n)},(null===e||void 0===e||null===(o=e.attributes)||void 0===o?void 0:o.id)+(null===t||void 0===t?void 0:t.name))})),a.map((function(t){var i,o;return(0,f.jsx)("td",{children:null===(o=l.none)||void 0===o?void 0:o.render(e,{name:t},n)},(null===e||void 0===e||null===(i=e.attributes)||void 0===i?void 0:i.id)+t)})),(0,f.jsx)("td",{children:r.renderData(n)},(null===e||void 0===e||null===(m=e.attributes)||void 0===m?void 0:m.id)+"new")]},null!==(i=null===e||void 0===e||null===(d=e.attributes)||void 0===d||null===(u=d.id)||void 0===u?void 0:u.toString())&&void 0!==i?i:null===e||void 0===e?void 0:e.name)})),d&&(0,f.jsxs)(M,{target:s,style:{border:"1.5px solid transparent"},element:"tr",onDrop:function(e,n){"function"===typeof c&&c(e,n)},children:[(0,f.jsx)("td",{role:"representation"}),Z.map((function(e,n){return(0,f.jsx)("td",{children:d.render(e,n,Z.length)},e)}))]})]}),(0,f.jsx)("tfoot",{children:(0,f.jsxs)("tr",{children:[(0,f.jsx)("td",{role:"representation"}),Z.map((function(e,n){return(0,f.jsx)("td",{children:(0,f.jsx)("span",{style:{visibility:"hidden",display:"flex"},children:"h"})},e)}))]})})]}):null]})})}))},J=t(5530),X=function(){var e,n,t,l=(0,o.v9)((function(e){return e.treeNode.activeNode})),r=(0,o.v9)((function(e){return e.treeNode.project})),d=(0,o.I0)(),a=(0,I.$)().t,u=(0,i.useState)(!1),s=(0,S.Z)(u,2),c=s[0],v=s[1],h=(0,i.useState)({}),g=(0,S.Z)(h,2),x=(g[0],g[1],(0,i.useState)({})),j=(0,S.Z)(x,2),b=(j[0],j[1],(0,i.useState)([])),w=(0,S.Z)(b,2),Z=w[0],k=w[1],N=(0,i.useState)({}),C=(0,S.Z)(N,2),D=C[0],_=C[1],A=(0,i.useState)([]),T=(0,S.Z)(A,2),L=(T[0],T[1]),B=(0,i.useState)([]),F=(0,S.Z)(B,2),V=F[0],P=F[1],O=(0,i.useState)(""),q=(0,S.Z)(O,2),H=q[0],W=q[1],U=function(e){W(e),v(!1)},G=function(e){L((function(e){return[].concat((0,m.Z)(e),[(0,p.Z)((0,p.Z)({},y.Z),{},{attributes:(0,p.Z)((0,p.Z)({},y.Z.attributes),{},{id:(new Date).getTime()*Math.random(),nodeType:"libre"})})])}))};(0,i.useEffect)((function(){var e,n,t,i,o,r,d,a,u,s,c,v=(0,m.Z)(null!==(e=null===l||void 0===l||null===(n=l.data)||void 0===n?void 0:n.children)&&void 0!==e?e:[]).sort(y.R1),f=(null===l||void 0===l||null===(t=l.data)||void 0===t||null===(i=t.attributes)||void 0===i||null===(o=i.sections)||void 0===o?void 0:o.length)>0?null===l||void 0===l||null===(r=l.data)||void 0===r||null===(d=r.attributes)||void 0===d||null===(a=d.sections)||void 0===a?void 0:a.reduce((function(e,n){var t;return[].concat((0,m.Z)(e),(0,m.Z)(null!==(t=null===n||void 0===n?void 0:n.children)&&void 0!==t?t:[]))}),[]):[];k(null===v||void 0===v?void 0:v.filter((function(e){var n;return!((null===f||void 0===f?void 0:f.length)>0)||!(null!==f&&void 0!==f&&f.includes(null===(n=e.attributes)||void 0===n?void 0:n.id))})));var h={};null===(u=l.data)||void 0===u||null===(s=u.attributes)||void 0===s||null===(c=s.sections)||void 0===c||c.forEach((function(e){var n;h[e.id]=(0,p.Z)((0,p.Z)({},e),{},{childNodes:null===(n=e.children)||void 0===n?void 0:n.map((function(e){return v.find((function(n){var t;return(null===(t=n.attributes)||void 0===t?void 0:t.id)==e}))}))})})),_(h)}),[l]);var Y=function(e){var n=e.id,t=e.node;d((0,E.sU)({id:n,node:t}))},$=function(e){var n,t,i,o=e.id,l=e.node;d((0,E.VR)({id:o,node:{description:null===l||void 0===l||null===(n=l.attributes)||void 0===n?void 0:n.description,name:null===l||void 0===l?void 0:l.name,nodeType:null!==(t=null===l||void 0===l||null===(i=l.attributes)||void 0===i?void 0:i.nodeType)&&void 0!==t?t:"libre",parentNodeId:null===l||void 0===l?void 0:l.parentNodeId,data:null===l||void 0===l?void 0:l.data}})).unwrap().then((function(){var e=null===V||void 0===V?void 0:V.findIndex((function(e){return e===l.name}));if(e>-1){var n=(0,m.Z)(V);n.splice(e,1),P(n)}}))},X=function(e){null!==e&&void 0!==e&&e.trim()&&(P([].concat((0,m.Z)(V),[e])),W("")),v(!1)},Q=function(e,n){var t,i;e&&n&&d((0,E.gH)({projectId:null===r||void 0===r?void 0:r.id,nodeId:null===l||void 0===l||null===(t=l.data)||void 0===t||null===(i=t.attributes)||void 0===i?void 0:i.id,sectionId:n,chldren:[e.id]}))},ee=function(e,n){var t,i;if(console.log({item:e,target:n}),e)if(n&&e.groupId)d((0,E.FO)({projectId:null===r||void 0===r?void 0:r.id,nodeId:null===l||void 0===l||null===(t=l.data)||void 0===t||null===(i=t.attributes)||void 0===i?void 0:i.id,sourceId:e.groupId,targetId:n,chldren:[e.id]}));else if(n){var o,a;d((0,E.gH)({projectId:null===r||void 0===r?void 0:r.id,nodeId:null===l||void 0===l||null===(o=l.data)||void 0===o||null===(a=o.attributes)||void 0===a?void 0:a.id,sectionId:n,chldren:[e.id]}))}else if(e.groupId){var u,s;d((0,E.Tp)({projectId:null===r||void 0===r?void 0:r.id,nodeId:null===l||void 0===l||null===(u=l.data)||void 0===u||null===(s=u.attributes)||void 0===s?void 0:s.id,sectionId:e.groupId,chldren:[e.id]}))}},ne=function(e){var n=e.nodes,t=e.caption,i=e.groupId;return(0,f.jsx)(K,{id:"node-data-table-10x",caption:t,groupId:i,data:n,meta:{elements:{displayName:a("elements"),render:function(e,n){var t,i;return(0,f.jsx)("div",{style:{display:"flex",background:"#fff",borderTopLeftRadius:0===n?5:0,borderTopRightRadius:0===n?5:0},children:(0,f.jsx)(R,{style:{textAlign:"right"},onEnter:function(n){var t;return Y({id:null===r||void 0===r?void 0:r.id,node:{id:null===e||void 0===e||null===(t=e.attributes)||void 0===t?void 0:t.id,name:n}})},defaultValue:null!==(t=e.name)&&void 0!==t?t:"",title:null===e||void 0===e||null===(i=e.attributes)||void 0===i?void 0:i.data})})}}},treeMeta:{data:{render:function(e,n,t){var i;return(0,f.jsx)("div",{style:{display:"flex",background:"#fff",borderTopLeftRadius:0===t?5:0,borderTopRightRadius:0===t?5:0},children:(0,f.jsx)(R,{style:{textAlign:"right"},onEnter:function(e){var t;return Y({id:null===r||void 0===r?void 0:r.id,node:{id:null===n||void 0===n||null===(t=n.attributes)||void 0===t?void 0:t.id,data:e}})},defaultValue:(null===n||void 0===n||null===(i=n.attributes)||void 0===i?void 0:i.data)||""})})}},empty:{render:function(e,n){return(0,f.jsx)(J.Z,{style:{height:20,width:20},onClick:function(){var t;return $({id:null===r||void 0===r?void 0:r.id,node:(0,p.Z)((0,p.Z)({},n),{},{parentNodeId:null===e||void 0===e||null===(t=e.attributes)||void 0===t?void 0:t.id})})}})}},none:{render:function(e,n,t){return(0,f.jsx)("div",{style:{display:"flex",background:"#eee",borderTopLeftRadius:0===t?5:0,borderTopRightRadius:0===t?5:0},children:(0,f.jsx)(R,{onEnter:function(t){var i;return $({id:null===r||void 0===r?void 0:r.id,node:(0,p.Z)((0,p.Z)({},n),{},{data:t,parentNodeId:null===e||void 0===e||null===(i=e.attributes)||void 0===i?void 0:i.id})})}})})}}},newColumn:{renderData:function(e){return(0,f.jsx)("div",{style:{display:"flex",background:"#fff",borderTopLeftRadius:0===e?5:0,borderTopRightRadius:0===e?5:0},children:(0,f.jsx)(R,{readonly:!0})})},renderHeader:function(){return c?(0,f.jsx)(R,{autoFocus:!0,style:{textAlign:"right"},onBlur:U,onEnter:X,defaultValue:H}):(0,f.jsx)(J.Z,{style:{height:20,width:20},onClick:function(){return v(!0)}})}},newRow:{render:function(e,n,t){return(0,f.jsx)("div",{style:{display:"flex",background:"#fff",borderBottomLeftRadius:0===n?5:0,borderBottomRightRadius:n===t-1?5:0},children:0===n?(0,f.jsx)("span",{style:{padding:"0 10px"},title:a("use-map-to-select-location"),children:(0,f.jsx)(J.Z,{style:{height:20,width:20,marginTop:-5},onClick:G})}):(0,f.jsx)("span",{style:{visibility:"hidden"},children:"h"})})}},appendColums:V,handleDropItem:ee})};return(0,f.jsxs)(f.Fragment,{children:[(null===Z||void 0===Z?void 0:Z.length)>0?(0,f.jsx)(ne,{caption:null===(e=l.data)||void 0===e?void 0:e.name,nodes:Z},l.data.name):null,(null===(n=l.data)||void 0===n||null===(t=n.attributes)||void 0===t?void 0:t.sections.length)>0?Object.values(D).map((function(e){var n,t,i;return(0,f.jsxs)("div",{children:[(0,f.jsx)(ne,{caption:"".concat(e.name," (").concat(null!==(n=null===e||void 0===e||null===(t=e.childNodes)||void 0===t?void 0:t.length)&&void 0!==n?n:0,")"),nodes:e.childNodes,groupId:e.id}),e.childNodes&&0!==(null===(i=e.childNodes)||void 0===i?void 0:i.length)?null:(0,f.jsx)(M,{target:e.id,onDrop:Q,children:(0,f.jsx)("div",{className:"empty-node-group-section ",children:a("empty-section")})})]},e.id)})):null,(0,f.jsx)(z,{icon:(0,f.jsx)(J.Z,{background:"none"}),text:a("add-section"),color:"#fff",background:"#F3BE3D",onEnter:function(e){return function(e){var n,t,i;null!==e&&void 0!==e&&e.trim()&&d((0,E.mc)({projectId:null===r||void 0===r?void 0:r.id,nodeId:null===l||void 0===l||null===(n=l.data)||void 0===n||null===(t=n.attributes)||void 0===t||null===(i=t.id)||void 0===i?void 0:i.toString(),section:{name:e}}))}(e)},style:{marginTop:25}})]})},Q=t(5937),ee=t(663),ne=function(e){var n=e.progress,t=e.color;return(0,f.jsx)("div",{className:"simple-progress-xx",style:{border:"1px solid ".concat(null!==t&&void 0!==t?t:"#295EA7")},children:(0,f.jsx)("span",{style:{width:"number"===typeof n?"".concat(n>100?n%100:n,"%"):n,backgroundColor:null!==t&&void 0!==t?t:"#295EA7"},children:(0,f.jsxs)("span",{style:{fontSize:10,width:"auto"},children:[n,"%"]})})})},te=t(1105),ie=["data","meta","treeMeta","newColumn","newRow","appendColums","caption","groupId"],oe=function(e){var n,t=e.data,o=e.meta,l=e.treeMeta,r=e.newColumn,d=e.newRow,a=e.appendColums,u=e.caption,s=e.groupId,c=(0,D.Z)(e,ie),v=(0,i.useRef)(),h=function(e){return"string"===typeof e?e:null},g={};(null===t||void 0===t?void 0:t.length)>0&&t.forEach((function(e){var n,t,i,o;null!==(n=e.tree)&&void 0!==n&&null!==(t=n.children)&&void 0!==t&&t.length&&(null===e||void 0===e||null===(i=e.tree)||void 0===i||null===(o=i.children)||void 0===o||o.forEach((function(e){e.name&&(g[e.name]=e)})))}));var x=[].concat((0,m.Z)(Object.keys((0,p.Z)((0,p.Z)({},null!==o&&void 0!==o?o:{}),null!==g&&void 0!==g?g:{}))),(0,m.Z)(a),["empty"]);return(null===t||void 0===t?void 0:t.length)>0?(0,f.jsxs)("div",(0,p.Z)((0,p.Z)({},c),{},{style:{maxWidth:"100vw",overflow:"auto"},children:[(0,f.jsxs)("div",{style:{display:"flex",alignItems:"center"},children:[(0,f.jsx)("span",{children:u}),(0,f.jsx)(O,{getRef:function(){return v.current},fileName:u,icon:(0,f.jsxs)("span",{style:{display:"flex",alignItems:"center"},children:[(0,f.jsx)("span",{style:{height:20,width:20,background:"#888",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",margin:5},children:(0,f.jsx)("svg",{style:{height:20,width:20},xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 5.067 8.137",children:(0,f.jsx)("path",{d:"M3.438,2.488,1.2,4.775a.683.683,0,0,1-1,0,.782.782,0,0,1,0-1.055L3.6.2A.581.581,0,0,1,4.033,0h.262A.525.525,0,0,1,4.6.2L7.932,3.795a.782.782,0,0,1,0,1.055.683.683,0,0,1-1,0L4.889,2.639C4.306,2.245,4.053,2.132,3.438,2.488Z",transform:"scale(0.5) translate(1, 5)",fill:"#fff",fillRule:"evenodd"})})}),(0,te.t)("export")]})})]}),(0,f.jsxs)("table",{ref:v,className:"data-table-xx",style:{borderCollapse:"collapse",borderRadius:5},children:[(0,f.jsx)("thead",{children:(0,f.jsx)(T,{children:(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)("th",{role:"representation"}),Object.entries(o).map((function(e){var n,t=(0,S.Z)(e,2),i=t[0],o=t[1];return(0,f.jsx)("th",{children:null!==(n=o.displayName)&&void 0!==n?n:i},i)})),Object.keys(g).map((function(e){return(0,f.jsx)("th",{style:{textTransform:"capitalize"},children:e},e)})),a.map((function(e){return(0,f.jsx)("th",{style:{textTransform:"capitalize"},children:e},e)})),(0,f.jsx)("th",{style:{textAlign:"center"},children:r.renderHeader()})]})})}),(0,f.jsxs)("tbody",{children:[null===t||void 0===t||null===(n=t.filter((function(e){var n,t;return"empty"!==(null===e||void 0===e||null===(n=e.tree)||void 0===n||null===(t=n.attributes)||void 0===t?void 0:t.nodeType)})))||void 0===n?void 0:n.map((function(e,n){var t,i,d,u,c,v,m,x,j,b,y,w,Z,k,N;return(0,f.jsxs)(Y,{dragItem:(0,p.Z)({name:null===e||void 0===e||null===(t=e.tree)||void 0===t?void 0:t.name,groupId:s},null!==(i=null===(d=e.tree)||void 0===d?void 0:d.attributes)&&void 0!==i?i:{}),id:null!==(x=null===e||void 0===e||null===(j=e.id)||void 0===j?void 0:j.toString())&&void 0!==x?x:null===e||void 0===e||null===(b=e.tree)||void 0===b||null===(y=b.attributes)||void 0===y||null===(w=y.id)||void 0===w?void 0:w.toString(),onKeyDown:function(n){var t,i,o,l,r;return function(e,n){var t,i,o,l=document.getElementById(e);null!==n&&void 0!==n&&n.key&&"enter"===(null===n||void 0===n||null===(t=n.key)||void 0===t?void 0:t.toLowerCase())&&l&&(null===l||void 0===l||null===(i=l.nextElementSibling)||void 0===i||null===(o=i.querySelector("input:not(:read-only)"))||void 0===o||o.focus())}(null!==(t=null===e||void 0===e||null===(i=e.id)||void 0===i?void 0:i.toString())&&void 0!==t?t:null===e||void 0===e||null===(o=e.tree)||void 0===o||null===(l=o.attributes)||void 0===l||null===(r=l.id)||void 0===r?void 0:r.toString(),n)},children:[Object.entries(o).map((function(t){var i=(0,S.Z)(t,2),o=i[0],l=i[1];return(0,f.jsx)("td",{"data-key":o,children:l.render?l.render(e,n,g):h(e[o])},o)})),Object.values(g).map((function(t){var i,o,r,d,a;if((null===e||void 0===e||null===(i=e.tree)||void 0===i?void 0:i.children.length)>1){var u,s,c,v,h,p,m,g,x,j,b,y,w,Z,k,N,C,S=null===e||void 0===e||null===(u=e.tree)||void 0===u||null===(s=u.children)||void 0===s?void 0:s.find((function(e){return e.name===(null===t||void 0===t?void 0:t.name)}));return S?(0,f.jsx)("td",{"data-key":S.name+(null!==(c=null===e||void 0===e?void 0:e.id)&&void 0!==c?c:null===e||void 0===e||null===(v=e.tree)||void 0===v||null===(h=v.attributes)||void 0===h?void 0:h.id),children:l.status?null===(x=l.status)||void 0===x?void 0:x.render(e,S,n):null===(j=l.data)||void 0===j?void 0:j.render(e,S,n)},S.name+(null!==(p=null===e||void 0===e?void 0:e.id)&&void 0!==p?p:null===e||void 0===e||null===(m=e.tree)||void 0===m||null===(g=m.attributes)||void 0===g?void 0:g.id)):(0,f.jsx)("td",{"data-key":(null!==(b=null===e||void 0===e?void 0:e.id)&&void 0!==b?b:null===e||void 0===e||null===(y=e.tree)||void 0===y||null===(w=y.attributes)||void 0===w?void 0:w.id)+(null===t||void 0===t?void 0:t.name),children:null===(C=l.none)||void 0===C?void 0:C.render(e,t,n)},(null!==(Z=null===e||void 0===e?void 0:e.id)&&void 0!==Z?Z:null===e||void 0===e||null===(k=e.tree)||void 0===k||null===(N=k.attributes)||void 0===N?void 0:N.id)+(null===t||void 0===t?void 0:t.name))}return(0,f.jsx)("td",{children:null===(a=l.none)||void 0===a?void 0:a.render(e,t,n)},(null!==(o=null===e||void 0===e?void 0:e.id)&&void 0!==o?o:null===e||void 0===e||null===(r=e.tree)||void 0===r||null===(d=r.attributes)||void 0===d?void 0:d.id)+(null===t||void 0===t?void 0:t.name))})),a.map((function(t){var i,o,r,d;return(0,f.jsx)("td",{children:null===(d=l.none)||void 0===d?void 0:d.render(e,{name:t},n)},(null!==(i=null===e||void 0===e?void 0:e.id)&&void 0!==i?i:null===e||void 0===e||null===(o=e.tree)||void 0===o||null===(r=o.attributes)||void 0===r?void 0:r.id)+t)})),(0,f.jsx)("td",{children:r.renderData(n)},(null!==(Z=null===e||void 0===e?void 0:e.id)&&void 0!==Z?Z:null===e||void 0===e||null===(k=e.tree)||void 0===k||null===(N=k.attributes)||void 0===N?void 0:N.id)+"new")]},null!==(u=null===e||void 0===e?void 0:e.id)&&void 0!==u?u:null===e||void 0===e||null===(c=e.tree)||void 0===c||null===(v=c.attributes)||void 0===v||null===(m=v.id)||void 0===m?void 0:m.toString())})),d&&(0,f.jsxs)("tr",{children:[(0,f.jsx)("td",{role:"representation"}),x.map((function(e,n){return(0,f.jsx)("td",{children:d.render(e,n,x.length)},e)}))]})]}),(0,f.jsx)("tfoot",{children:(0,f.jsxs)("tr",{children:[(0,f.jsx)("td",{role:"representation"}),x.map((function(e,n){return(0,f.jsx)("td",{children:(0,f.jsx)("span",{style:{visibility:"hidden",display:"flex"},children:"h"})},e)}))]})})]})]})):null},le=(0,i.memo)(oe),re=["fill","background","style"],de=function(e){var n=e.fill,t=e.background,i=e.style,o=(0,D.Z)(e,re);return(0,f.jsx)("svg",(0,p.Z)((0,p.Z)({},o),{},{tabIndex:0,role:"button",style:(0,p.Z)((0,p.Z)({},{height:"1.5em",width:"1.5em",transform:"translate(25%, 25%) scale(1.5)",cursor:"pointer",border:"none",outline:"none"}),null!==i&&void 0!==i?i:{}),viewBox:"0 0 100 100",fill:null!==t&&void 0!==t?t:"#F3BE3D",children:(0,f.jsx)("g",{children:(0,f.jsxs)("g",{children:[(0,f.jsx)("g",{children:(0,f.jsx)("path",{d:"M29.008,48.308c-16.476,0-28.336-17.029-28.833-17.754c-0.248-0.36-0.231-0.841,0.039-1.184 c0.561-0.712,13.906-17.424,29.913-17.424c17.953,0,29.474,16.769,29.956,17.482c0.23,0.342,0.229,0.79-0.007,1.129 c-0.475,0.688-11.842,16.818-29.899,17.721C29.786,48.297,29.396,48.308,29.008,48.308z M2.267,30.028 c2.326,3.098,13.553,16.967,27.812,16.254c15.237-0.76,25.762-13.453,27.938-16.3c-2.175-2.912-12.811-16.035-27.889-16.035 C16.7,13.947,4.771,27.084,2.267,30.028z",fill:null!==n&&void 0!==n?n:"#ddd"})}),(0,f.jsx)("g",{children:(0,f.jsx)("path",{d:"M30.127,37.114c-3.852,0-6.986-3.135-6.986-6.986c0-3.851,3.134-6.985,6.986-6.985s6.986,3.135,6.986,6.985 C37.113,33.979,33.979,37.114,30.127,37.114z",fill:null!==n&&void 0!==n?n:"#ddd"})}),(0,f.jsx)("g",{children:(0,f.jsx)("path",{d:"M30.127,42.614c-6.885,0-12.486-5.602-12.486-12.486c0-6.883,5.602-12.485,12.486-12.485 c6.884,0,12.486,5.602,12.486,12.485C42.613,37.012,37.013,42.614,30.127,42.614z M30.127,19.641 c-5.782,0-10.486,4.704-10.486,10.486c0,5.781,4.704,10.485,10.486,10.485s10.486-4.704,10.486-10.485 C40.613,24.345,35.91,19.641,30.127,19.641z",fill:null!==n&&void 0!==n?n:"#ddd"})})]})})}))},ae=function(e){var n,t=e.onNewRowClick,l=(0,I.$)().t,r=(0,o.v9)((function(e){return e.projects.payload})),a=(0,o.v9)((function(e){return e.treeNode.activeNode})),u=(0,o.v9)((function(e){return e.treeNode.project})),s=(0,o.v9)((function(e){return e.projectNodeStatuses.payload})),c=(0,o.v9)((function(e){return e.organisation})),v=(0,i.useState)(!1),h=(0,S.Z)(v,2),g=h[0],x=h[1],w=(0,i.useState)({}),Z=(0,S.Z)(w,2),k=Z[0],N=Z[1],C=(0,i.useState)(""),D=(0,S.Z)(C,2),_=D[0],A=D[1],T=(0,i.useState)([]),L=(0,S.Z)(T,2),B=L[0],V=L[1],P=(0,o.I0)(),M=function(e){A(e),x(!1)},O=function(e){null!==e&&void 0!==e&&e.trim()&&(V([].concat((0,m.Z)(B),[e])),A("")),x(!1)},q=function(e){t&&t(e)},H=function(e){var n=e.id,t=e.node;P((0,E.sU)({id:n,node:t}))};return(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)(le,{id:"project-data-table-10x",data:r,caption:null!==(n=null===c||void 0===c?void 0:c.corporateName)&&void 0!==n?n:(null===c||void 0===c?void 0:c.name)||l("my-projects"),meta:{name:{displayName:l("project-name"),render:function(e,n){var t,i,o,l,r,s;return(0,f.jsxs)("div",{style:{padding:0,background:"#fff",display:"flex",alignItems:"center",minWidth:200,borderTopLeftRadius:0===n?5:0},children:[(0,f.jsx)(R,{style:{textAlign:"left",borderTopLeftRadius:0===n?5:0},onEnter:function(n){return function(e,n){P((0,d.ty)({id:e,node:{name:n}})),setTimeout((function(){return N((function(n){return(0,p.Z)((0,p.Z)({},n),{},(0,j.Z)({},e,""))}))}),300)}(e.id,n)},onChange:function(n){return N((function(t){var i;return(0,p.Z)((0,p.Z)({},t),{},(0,j.Z)({},e.id,null===n||void 0===n||null===(i=n.target)||void 0===i?void 0:i.value))}))},value:k[e.id]||(null!==(t=null===(i=e.tree)||void 0===i?void 0:i.name)&&void 0!==t?t:e.name),readonly:!(null!==e&&void 0!==e&&e.tree)}),(0,f.jsx)(de,{disabled:!(null!==e&&void 0!==e&&e.tree),onClick:function(){var n;null!==(n=e)&&void 0!==n&&n.tree&&((null===u||void 0===u?void 0:u.id)===(null===n||void 0===n?void 0:n.id)?(P((0,b.Jy)(null)),P((0,b.rZ)({})),P((0,Q.KZ)("single")),P((0,b.Y9)(null))):(P((0,b.Y9)(n)),P((0,Q.KZ)("list")),P((0,ee.BR)("kanban"))))},fill:a&&(null===a||void 0===a||null===(o=a.data)||void 0===o||null===(l=o.attributes)||void 0===l?void 0:l.id)===(null===e||void 0===e||null===(r=e.tree)||void 0===r||null===(s=r.attributes)||void 0===s?void 0:s.id)||(null===u||void 0===u?void 0:u.id)===(null===e||void 0===e?void 0:e.id)?"#000":"#ddd"})]})}},creator:{displayName:l("project-manager"),render:function(e,n){var t,i,o,l,r,d,a,u;return(0,f.jsx)("div",{style:{padding:"0 5px",background:"#fff"},title:"".concat(null!==(t=null===(i=e.creator)||void 0===i?void 0:i.firstName)&&void 0!==t?t:""," ").concat(null!==(o=null===(l=e.creator)||void 0===l?void 0:l.lastName)&&void 0!==o?o:""),children:(0,f.jsx)(R,{readonly:!0,style:{textAlign:"right"},onEnter:function(e){return console.log(e)},defaultValue:"".concat(null!==(r=null===(d=e.creator)||void 0===d?void 0:d.firstName)&&void 0!==r?r:""," ").concat(null!==(a=null===(u=e.creator)||void 0===u?void 0:u.lastName)&&void 0!==a?a:"")})})}},progression:{displayName:l("progression"),render:function(e,n,t){var i=(0,y.dh)(null===e||void 0===e?void 0:e.tree);return(0,f.jsx)("div",{style:{display:"flex",background:"#fff",borderBottom:"2px solid #fff",cursor:"move"},children:(0,f.jsx)(ne,{color:"#ED6E40",progress:Math.round(100*i)})})}},status:{displayName:l("status"),render:function(e){var n,t,i,o=(0,y.lR)(null!==e&&void 0!==e&&e.tree?null===e||void 0===e||null===(n=e.tree)||void 0===n||null===(t=n.attributes)||void 0===t?void 0:t.status:null===e||void 0===e||null===(i=e.attributes)||void 0===i?void 0:i.status);return(0,f.jsx)(F,{options:["todo","started","completed"].map((function(e){return{id:e,label:e,iconName:e}})),selected:o.status,onChange:function(n){var t,i,o,l;H({id:e.id,node:{id:null===e||void 0===e||null===(t=e.tree)||void 0===t||null===(i=t.attributes)||void 0===i?void 0:i.id,status:n}}),P((0,Q.XK)(null===e||void 0===e||null===(o=e.tree)||void 0===o||null===(l=o.attributes)||void 0===l?void 0:l.id)),P((0,ee.BR)("kanban"))},color:o.color,disabled:!(null!==e&&void 0!==e&&e.tree)})}}},treeMeta:{status:{render:function(e,n){var t,i,o,l=(0,y.lR)(null!==n&&void 0!==n&&n.tree?null===n||void 0===n||null===(t=n.tree)||void 0===t||null===(i=t.attributes)||void 0===i?void 0:i.status:null===n||void 0===n||null===(o=n.attributes)||void 0===o?void 0:o.status);return(0,f.jsx)(F,{options:s,selected:l.status,onChange:function(t){var i;return H({id:e.id,node:{id:null===n||void 0===n||null===(i=n.attributes)||void 0===i?void 0:i.id,status:t}})},color:l.color})}},none:{render:function(e,n){return(0,f.jsx)(J.Z,{style:{height:20,width:20},onClick:function(){return function(e){var n,t,i,o=e.id,l=e.node;P((0,E.VR)({id:o,node:{description:null===l||void 0===l||null===(n=l.attributes)||void 0===n?void 0:n.description,name:null===l||void 0===l?void 0:l.name,nodeType:null!==(t=null===l||void 0===l||null===(i=l.attributes)||void 0===i?void 0:i.nodeType)&&void 0!==t?t:"libre",parentNodeId:null===l||void 0===l?void 0:l.parentNodeId,data:null===l||void 0===l?void 0:l.data}})).unwrap().then((function(){var e=null===B||void 0===B?void 0:B.findIndex((function(e){return e===l.name}));if(e>-1){var n=(0,m.Z)(B);n.splice(e,1),V(n)}}))}({id:e.id,node:n})}})}}},newColumn:{renderData:function(e){return(0,f.jsx)("div",{style:{display:"flex",background:"#fff"},children:(0,f.jsx)(R,{readonly:!0})})},renderHeader:function(){return g?(0,f.jsx)(R,{autoFocus:!0,style:{textAlign:"right"},onBlur:M,onEnter:O,defaultValue:_}):(0,f.jsx)(J.Z,{style:{height:20,width:20},onClick:function(){return x(!0)}})}},newRow:{render:function(e,n,t){return(0,f.jsx)("div",{style:{display:"flex",background:"#fff",borderBottomLeftRadius:0===n?5:0,borderBottomRightRadius:n===t-1?5:0},children:0===n?(0,f.jsx)("span",{style:{padding:"0 10px"},title:l("use-map-to-select-location"),children:(0,f.jsx)(J.Z,{style:{height:20,width:20,marginTop:-5},onClick:q})}):(0,f.jsx)("span",{style:{visibility:"hidden"},children:"h"})})}},appendColums:B}),(0,f.jsx)(z,{icon:(0,f.jsx)(J.Z,{background:"none"}),text:l("add-section"),color:"#fff",background:"#F3BE3D",onEnter:function(e){return console.log({val:e})},style:{marginTop:25}})]})},ue=function(){var e=(0,o.v9)((function(e){return e.fullScreen})),n=(0,o.v9)((function(e){return e.treeNode.activeNode})),t=(0,o.I0)(),l=(0,i.useMemo)((function(){return"data-table"===e.target?n?(0,f.jsx)(X,{}):(0,f.jsx)(ae,{}):null}),[e.target,n]);return l?(0,f.jsxs)(N.s,{size:{height:"100%",width:"95vw"},maxWidth:"95vw",bounds:"parent",style:{background:"rgba(250,250,250, 0.9)",padding:15,overflow:"auto",zIndex:10},enableResizing:!1,disableDragging:!0,children:[(0,f.jsx)("div",{style:{width:"100%",display:"flex",justifyContent:"flex-end"},children:(0,f.jsx)("button",{onClick:function(){return t((0,C.CL)())},className:"full-screen-dismiss",children:(0,f.jsx)(k.G,{icon:Z.NBC})})}),l]}):null},se=t(4419),ce=t.n(se),ve=t(6549),fe=t(3280),he=t(810),pe=t(8006),me=t(2607),ge=t(4023),xe=t(4947),je=t(5211);var be=t.p+"static/media/member.fb3513941ba1baf12e08119a7024ab11.svg",ye=t(2454);var we=t.p+"static/media/organisation.efa0cfcf500774d1efcb6b093ef829b9.svg";var Ze=t.p+"static/media/pin.d2679618240c8b28773a95afcb281fb5.svg",ke=t(3834);var Ne=t.p+"static/media/plus.8a6a02d7c59802bb732d85e8e550ad63.svg";var Ce=t.p+"static/media/question.9b793928a44f6612d3dd1f8c551126cc.svg",Se=t(9200),Ie=t(447);var Ee=t.p+"static/media/clap.e11804d8958e6b79668b05285348dc58.svg",De={apple:ve.Z,projet:fe.Z,dashboard:he.Z,google:pe.Z,home:me.Z,house:ge.Z,linkedin:xe.Z,mail:je.Z,equipe:be,notification:ye.Z,organisation:we,pin:Ze,plug:ke.Z,empty:Ne,question:Ce,search:Se.Z,user:Ie.Z,clap:Ee},_e=["nodeDatum","d3ExtraProps","setActive","activeNodes","active","toggleNode","setEmptyNodePlacement"];var Re=function(e){var n,t,o,l,r,d,a,u,s,c,v,h=(0,i.useRef)(null),p=e.nodeDatum,m=e.d3ExtraProps,g=e.setActive,x=e.activeNodes,j=e.active,b=e.toggleNode,y=e.setEmptyNodePlacement,w=((0,D.Z)(e,_e),p.attributes),Z=w.id,k=w.nodeType,N=w.iconName,C=x&&x[Z],S=j===Z,I=m.hierarchyPointNode,E=(null===I||void 0===I||null===(n=I.parent)||void 0===n||null===(t=n.data)||void 0===t||null===(o=t.attributes)||void 0===o?void 0:o.id)===j||null===(null===I||void 0===I?void 0:I.parent),_=S?"#295EA7":"#fff",R="empty"===k,A="",T=null!==(l=e.nodeSize)&&void 0!==l?l:52,L=De.question;return R&&(_="#F3BE3D"),N in De?L=De[N]:k in De&&(L=De[k]),A=C?S?"#555":"#295EA7":"#959595",R&&!E?null:(0,f.jsxs)("svg",{x:-T/2,y:-T/2,viewBox:"0 0 ".concat(T+5," ").concat(T+5),width:T+5,height:T+5,onClick:function(e){var n,t;null!==I&&void 0!==I&&null!==(n=I.data)&&void 0!==n&&null!==(t=n.__rd3t)&&void 0!==t&&t.collapsed&&b(e),"function"!==typeof g||R||g(I),y&&R&&y({showForm:!0,node:I,el:null===h||void 0===h?void 0:h.current})},ref:h,children:[(0,f.jsxs)("g",{id:"tree-node-".concat(Z),children:[(0,f.jsx)("circle",{fill:_,cy:T/2,cx:T/2,id:Z,r:T/2-(C&&!S?3:0),strokeWidth:C&&!S?3:0,stroke:"#295EA7"}),(0,f.jsx)("image",{viewBox:"0 0 ".concat(T," ").concat(T),x:"20%",y:"20%",xlinkHref:L,width:"50%",height:"50%",preserveAspectRatio:"xMidYMid slice"}),(0,f.jsx)("text",{y:T/2,x:T/2,strokeWidth:0,fontSize:10,fill:A,alignmentBaseline:"middle",textAnchor:"middle",children:(null===p||void 0===p||null===(r=p.name)||void 0===r?void 0:r.length)>9?(null===p||void 0===p||null===(d=p.name)||void 0===d?void 0:d.substring(0,7))+"...":null===p||void 0===p?void 0:p.name})]}),!R&&(null===I||void 0===I||null===(a=I.data)||void 0===a||null===(u=a.children)||void 0===u?void 0:u.length)>1&&(0,f.jsx)("text",{viewBox:"0 0 ".concat(T," ").concat(T),x:"75%",y:"100%",width:"60%",height:"60%",strokeWidth:0,fontSize:25,fill:_,onClick:function(e){e.stopPropagation(),b(e)},children:null!==I&&void 0!==I&&null!==(s=I.data)&&void 0!==s&&null!==(c=s.__rd3t)&&void 0!==c&&c.collapsed?"+":"-"}),(0,f.jsx)("title",{children:null===(v=p.attributes)||void 0===v?void 0:v.description})]})},Ae=function(e){var n,t,l,r,d,a,u,s,c,v,h=e.placement,p=e.onSubmit,m=e.mapCoords,g=e.onClose,x=(0,o.v9)((function(e){return e.projectNodeTypes})),j=(0,o.I0)(),b=null===h||void 0===h||null===(n=h.el)||void 0===n?void 0:n.getBoundingClientRect(),w=(0,i.useState)(""),Z=(0,S.Z)(w,2),k=Z[0],N=Z[1],C=(0,i.useState)(""),I=(0,S.Z)(C,2),E=I[0],D=I[1],_=(0,i.useState)(""),R=(0,S.Z)(_,2),A=R[0],T=R[1],L=(0,i.useState)(null),B=(0,S.Z)(L,2),F=B[0],V=B[1],P=(0,i.useState)(""),M=(0,S.Z)(P,2),z=(M[0],M[1]);(0,i.useEffect)((function(){var e,n;x.payload&&(null===(e=x.payload)||void 0===e?void 0:e.length)>0&&N(null===x||void 0===x||null===(n=x.payload[0])||void 0===n?void 0:n.id)}),[x]),(0,i.useEffect)((function(){var e;m?V(m):null!==h&&void 0!==h&&h.node&&null===(null===h||void 0===h||null===(e=h.node)||void 0===e?void 0:e.parent)&&(0,y.vW)().then((function(e){return V(null===e||void 0===e?void 0:e.coords)}),(function(e){console.log("error geting position",e),z("Veuillez activer la localisation sur votre navigateur")}))}),[m,h]);return(0,f.jsx)("div",{style:{position:"absolute",top:"".concat(null!==(t=null===b||void 0===b?void 0:b.y)&&void 0!==t?t:0,"px"),left:"".concat(null!==(l=null===b||void 0===b?void 0:b.right)&&void 0!==l?l:0,"px"),zIndex:1100},children:(0,f.jsxs)("div",{className:"placement-form-u0",children:[(0,f.jsx)("button",{className:"placement-close-icon",onClick:function(e){g&&g()},children:(0,f.jsx)("svg",{fill:"#000000",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:"24px",height:"24px",children:(0,f.jsx)("path",{d:"M 4.9902344 3.9902344 A 1.0001 1.0001 0 0 0 4.2929688 5.7070312 L 10.585938 12 L 4.2929688 18.292969 A 1.0001 1.0001 0 1 0 5.7070312 19.707031 L 12 13.414062 L 18.292969 19.707031 A 1.0001 1.0001 0 1 0 19.707031 18.292969 L 13.414062 12 L 19.707031 5.7070312 A 1.0001 1.0001 0 0 0 18.980469 3.9902344 A 1.0001 1.0001 0 0 0 18.292969 4.2929688 L 12 10.585938 L 5.7070312 4.2929688 A 1.0001 1.0001 0 0 0 4.9902344 3.9902344 z"})})}),(0,f.jsxs)("div",{className:"placement-title",children:["Ajouter un nouveau ",null===(null===h||void 0===h||null===(r=h.node)||void 0===r?void 0:r.parent)?"projet":"n\u0153ud \xe0 ".concat(null===h||void 0===h||null===(d=h.node)||void 0===d||null===(a=d.parent)||void 0===a||null===(u=a.data)||void 0===u?void 0:u.name)]}),null!==(s=h.node)&&void 0!==s&&s.parent&&x&&!x.isLoading&&null!==x&&void 0!==x&&x.payload&&(null===x||void 0===x||null===(c=x.payload)||void 0===c?void 0:c.length)>0?(0,f.jsx)("select",{value:k,onChange:function(e){var n;return function(e){var n,t=null===x||void 0===x||null===(n=x.payload)||void 0===n?void 0:n.find((function(n){var t;return(null===(t=n.id)||void 0===t?void 0:t.toString())===e}));!t||"model_3d"!==(null===t||void 0===t?void 0:t.label)&&"ifc"!==(null===t||void 0===t?void 0:t.label)?j((0,ee.BR)("map")):j((0,ee.BR)("model_3d")),N(e)}(null===e||void 0===e||null===(n=e.target)||void 0===n?void 0:n.value)},children:x.payload.filter((function(e){return"empty"!==(null===e||void 0===e?void 0:e.label)&&"projet"!==(null===e||void 0===e?void 0:e.label)})).map((function(e){return(0,f.jsx)("option",{value:null===e||void 0===e?void 0:e.id,children:null===e||void 0===e?void 0:e.label},(null===e||void 0===e?void 0:e.id)+(null===e||void 0===e?void 0:e.label))}))}):null,null===(null===h||void 0===h||null===(v=h.node)||void 0===v?void 0:v.parent)?(0,f.jsx)("input",{readOnly:!0,type:"search",placeholder:"Emplacement du projet",value:F?"".concat(null===F||void 0===F?void 0:F.longitude,", ").concat(null===F||void 0===F?void 0:F.longitude):""}):null,(0,f.jsxs)("div",{style:{position:"relative"},children:[(0,f.jsx)("span",{style:{color:"#E33F1A",position:"absolute",left:5,top:"20%"},children:"*"}),(0,f.jsx)("input",{required:!0,style:{paddingLeft:10},placeholder:"nom",value:E,onChange:function(e){var n;return D(null===e||void 0===e||null===(n=e.target)||void 0===n?void 0:n.value)}})]}),(0,f.jsx)("div",{children:(0,f.jsx)("textarea",{placeholder:"description",value:A,onChange:function(e){var n;return T(null===e||void 0===e||null===(n=e.target)||void 0===n?void 0:n.value)}})}),(0,f.jsx)("div",{children:(0,f.jsx)("button",{disabled:!(null!==E&&void 0!==E&&E.trim()),onClick:function(){var e,n,t,i;h.node&&E&&p({name:E,typeId:k,description:A,longitude:null===F||void 0===F?void 0:F.longitude,latitude:null===F||void 0===F?void 0:F.latitude,parentNodeId:null===h||void 0===h||null===(e=h.node)||void 0===e||null===(n=e.parent)||void 0===n||null===(t=n.data)||void 0===t||null===(i=t.attributes)||void 0===i?void 0:i.id})},children:"Add"})})]})})},Te=t(5861),Le=t(7757),Be=t.n(Le),Fe=t(8785),Ve=t(4431),Pe=(0,Fe.hg)("createProject",function(){var e=(0,Te.Z)(Be().mark((function e(n,t){var i;return Be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ve.Z.createProject(n);case 2:return i=e.sent,e.abrupt("return",null===i||void 0===i?void 0:i.content);case 4:case"end":return e.stop()}}),e)})));return function(n,t){return e.apply(this,arguments)}}()),Me=((0,Fe.oM)({name:"authSlice",initialState:{isLoading:!1,payload:{code:"",content:{description:"",latitude:0,longitude:0,name:""},errors:[],warnings:[]}},reducers:{},extraReducers:function(e){e.addCase(Pe.pending,(function(e){e.isLoading=!0})),e.addCase(Pe.fulfilled,(function(e,n){return{payload:n.payload,isLoading:!1}})),e.addCase(Pe.rejected,(function(e,n){e.isLoading=!1}))}}),t(215)),ze=["nodeDatum","toggleNode"],Oe=function(){var e=(0,o.I0)(),n=(0,o.v9)((function(e){return e.treeNode.project})),t=(0,o.v9)((function(e){return e.treeNode.activeNode})),l=(0,o.v9)((function(e){return e.treeNode.activeNodePath})),r=(0,o.v9)((function(e){return e.mapMeta.selection})),a=(0,o.v9)((function(e){var n;return null===(n=e.projects)||void 0===n?void 0:n.payload})),u=(0,o.v9)((function(e){return e.treeNode.activities})),s=(0,o.v9)((function(e){return e.user})),c=(0,i.useRef)(null),v=(0,i.useState)({x:0,y:0}),h=(0,S.Z)(v,2),m=h[0],g=h[1],x=(0,i.useState)({width:0,height:0}),w=(0,S.Z)(x,2),Z=w[0],k=w[1],N=(0,i.useState)(),C=(0,S.Z)(N,2),I=C[0],_=C[1],R=(0,i.useState)(y.Z),A=(0,S.Z)(R,2),T=A[0],L=A[1];(0,i.useEffect)((function(){if(null!==n&&void 0!==n&&n.tree){var e=null===a||void 0===a?void 0:a.find((function(e){return e.id===(null===n||void 0===n?void 0:n.id)}));e&&L(null===e||void 0===e?void 0:e.tree)}else L(y.Z)}),[n,a]),(0,i.useEffect)((function(){var e,n,i;T&&t&&(0,y.gV)(null===t||void 0===t||null===(e=t.data)||void 0===e||null===(n=e.attributes)||void 0===n||null===(i=n.id)||void 0===i?void 0:i.toString())}),[T]),(0,i.useEffect)((function(){var n,i,o,l=null===c||void 0===c||null===(n=c.current)||void 0===n?void 0:n.getBoundingClientRect();g({x:l?l.width/10:0,y:l?l.width/3:0}),k({width:null!==(i=null===l||void 0===l?void 0:l.width)&&void 0!==i?i:0,height:null!==(o=null===l||void 0===l?void 0:l.height)&&void 0!==o?o:0}),_({});for(var r=(0,p.Z)({},t),d={};null!==r&&void 0!==r;){var a,u,s,v,f,h,m,x,y,w,Z,N,C,S,I,E;if(null!==(a=r)&&void 0!==a&&null!==(u=a.data)&&void 0!==u&&null!==(s=u.attributes)&&void 0!==s&&s.id&&null!==(v=r)&&void 0!==v&&null!==(f=v.parent)&&void 0!==f&&null!==(h=f.data)&&void 0!==h&&null!==(m=h.attributes)&&void 0!==m&&m.id)d=(0,p.Z)((0,p.Z)({},d),{},(E={},(0,j.Z)(E,null===(y=r)||void 0===y||null===(w=y.parent)||void 0===w||null===(Z=w.data)||void 0===Z||null===(N=Z.attributes)||void 0===N?void 0:N.id,r.parent),(0,j.Z)(E,null===(C=r)||void 0===C||null===(S=C.data)||void 0===S||null===(I=S.attributes)||void 0===I?void 0:I.id,r),E));r=null===(x=r)||void 0===x?void 0:x.parent}e((0,b.rZ)(d)),t||e((0,Me.fR)({is_active:!1,name:null===T||void 0===T?void 0:T.name}))}),[t]);var B=function(n){var t,i;if(e((0,b.Jy)(n)),_({}),u.auto_select_node_by_type)switch(null===n||void 0===n||null===(t=n.data)||void 0===t||null===(i=t.attributes)||void 0===i?void 0:i.nodeType){case"ifc":case"model_3d":e((0,ee.BR)("model_3d"));break;default:e((0,ee.BR)("kanban"))}else e((0,b.Ls)("auto_select_node_by_type"));e((0,Me.fR)({is_active:!0,name:null===T||void 0===T?void 0:T.name}))};return(0,f.jsxs)("div",{id:"d3-tree-project",style:{height:"100%",width:"100%",overflow:"auto"},ref:c,children:[(0,f.jsx)(ce(),{data:T,orientation:"horizontal",translate:m,renderCustomNodeElement:function(e){var n,i,o,r=e.nodeDatum,d=e.toggleNode,a=(0,D.Z)(e,ze);return(0,f.jsx)(Re,{nodeDatum:r,toggleNode:d,activeNodes:l,setActive:B,d3ExtraProps:a,active:null===t||void 0===t||null===(n=t.data)||void 0===n||null===(i=n.attributes)||void 0===i||null===(o=i.id)||void 0===o?void 0:o.toString(),setEmptyNodePlacement:_})},pathClassFunc:function(e){var n,i,o,r,d,a,u,s,c,v,f,h,p,m,g,x,j,b=e.source,y=e.target;return"empty"===(null===y||void 0===y||null===(n=y.data)||void 0===n||null===(i=n.attributes)||void 0===i?void 0:i.nodeType)?(null===t||void 0===t||null===(m=t.data)||void 0===m||null===(g=m.attributes)||void 0===g?void 0:g.id)===(null===b||void 0===b||null===(x=b.data)||void 0===x||null===(j=x.attributes)||void 0===j?void 0:j.id)?"node-link to-empty":"empty-link":!l||(null===(o=l[null===y||void 0===y||null===(a=y.data)||void 0===a||null===(u=a.attributes)||void 0===u?void 0:u.id])||void 0===o||null===(r=o.data)||void 0===r||null===(d=r.attributes)||void 0===d?void 0:d.id)!==(null===y||void 0===y||null===(s=y.data)||void 0===s||null===(c=s.attributes)||void 0===c?void 0:c.id)&&(null===t||void 0===t||null===(v=t.data)||void 0===v||null===(f=v.attributes)||void 0===f?void 0:f.id)!==(null===y||void 0===y||null===(h=y.data)||void 0===h||null===(p=h.attributes)||void 0===p?void 0:p.id)?"node-link":"node-link to-active"},collapsible:!0,depthFactor:0,dimensions:Z,separation:{siblings:.5}}),(null===I||void 0===I?void 0:I.showForm)&&(0,f.jsx)(Ae,{mapCoords:r,placement:I,onSubmit:function(t){var i,o,l,r;null!==I&&void 0!==I&&null!==(i=I.node)&&void 0!==i&&i.parent?e((0,E.VR)({id:null===n||void 0===n?void 0:n.id,node:t})):e(Pe({description:null!==(o=t.description)&&void 0!==o?o:"",latitude:null!==(l=t.latitude)&&void 0!==l?l:0,longitude:null!==(r=t.longitude)&&void 0!==r?r:0,name:t.name})).unwrap().then((function(n){var t,i;e((0,d.B)((0,p.Z)((0,p.Z)({},null!==(t=null===n||void 0===n?void 0:n.project)&&void 0!==t?t:{}),{},{tree:null===n||void 0===n||null===(i=n.knowledgeBase)||void 0===i?void 0:i.tree,creator:s})))}));_({})},onClose:function(){return _({})}})]})},qe=t(1058),He=function(e){var n=e.project,t=(0,o.I0)(),l=(0,i.useState)([]),r=(0,S.Z)(l,2),d=r[0],a=r[1],u=(0,i.useState)(!1),s=(0,S.Z)(u,2),c=s[0],h=s[1],p=(0,i.useState)(!1),g=(0,S.Z)(p,2),x=g[0],j=g[1],b=(0,i.useState)(""),y=(0,S.Z)(b,2),w=y[0],N=y[1];(0,i.useEffect)((function(){h(!1)}),[w]),(0,i.useEffect)((function(){j(!1)}),[d]);var C=function(e,n){var t=(0,m.Z)(d);t[n].roleId=parseInt(e.target.id),a(t),console.log(d)};function I(){t((0,Me.Wx)("Dashboard")),t((0,Me.eU)(!1))}return(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)("div",{className:"pop-in_background"}),(0,f.jsxs)("div",{className:"pop-in",children:[(0,f.jsxs)("div",{className:"pop-in_container",children:[(0,f.jsx)("p",{className:"title",children:"Inviter des participants"}),(0,f.jsx)("p",{className:"subtitle",children:"Cette \xe9tape vous permet d'inviter des utilisateurs \xe0 rejoindre ce projet."}),(0,f.jsxs)("div",{className:"content",children:[(0,f.jsxs)("div",{className:"input-container",children:[(0,f.jsx)("input",{type:"text",required:!0,value:w,onChange:function(e){return N(e.target.value)},onKeyPress:function(e){!function(e,n){"Enter"===e.code&&(new RegExp("[a-z0-9]+@[a-z]+.[a-z]{2,3}").test(n)?(d.push({email:n,roleId:""}),N("")):h(!0))}(e,e.currentTarget.value)}}),c&&(0,f.jsx)("p",{className:"errorMsg-popin",children:"L'email n'est pas valide"}),x&&(0,f.jsx)("p",{className:"errorMsg-popin",children:"Selectionnez des droits pour chaques participants"}),(0,f.jsx)("span",{children:"Saisir le mail"})]}),(0,f.jsx)("div",{className:"mail-container",children:d.length>0&&d.map((function(e,n){return(0,f.jsxs)("fieldset",{className:"email-line",children:[(0,f.jsx)("div",{className:"email",onClick:function(){!function(e){var n=(0,m.Z)(d);n.splice(e,1),a(n)}(n)},children:(0,f.jsx)("span",{children:e.email})}),(0,f.jsxs)("div",{className:"radio-btn",children:[(0,f.jsx)("input",{name:e.email,type:"radio",id:"1",onClick:function(e){C(e,n)}}),(0,f.jsx)("span",{children:"Administrateur"})]}),(0,f.jsxs)("div",{className:"radio-btn",children:[(0,f.jsx)("input",{name:e.email,type:"radio",id:"2",onClick:function(e){C(e,n)}}),(0,f.jsx)("span",{children:"Membre"})]}),(0,f.jsxs)("div",{className:"radio-btn",children:[(0,f.jsx)("input",{name:e.email,type:"radio",id:"3",onClick:function(e){C(e,n)}}),(0,f.jsx)("span",{children:"Observateur"})]})]},n)}))}),(0,f.jsx)(v.Z,{type:"submit",light:!0,title:"B\xe2tir ensemble",doThings:function(){var e=!0;d.map((function(n){""===n.roleId&&(e=!1)})),e&&d.length>0?(console.log("send mail"),t((0,qe.Y)({invitations:{invitations:d},id:n})),I()):(j(!0),console.log("dont send mail"))},iconName:Z.yOZ})]})]}),(0,f.jsx)("div",{children:(0,f.jsx)("div",{className:"pop-in_goback",onClick:function(){return I()},children:(0,f.jsx)(k.G,{icon:Z.NBC,className:"icon_center"})})})]})]})},We=function(e){var n,t=e.onChange,o=e.options,l=e.selected,r=(e.activeNode,(0,I.$)().t),d=null===o||void 0===o?void 0:o.find((function(e){return(null===e||void 0===e?void 0:e.label)===l})),a=(0,i.useState)(!1),u=(0,S.Z)(a,2),s=u[0],c=u[1];return(0,f.jsxs)("div",{className:"dropdown-common-xx",children:[(0,f.jsx)("span",{tabIndex:0,role:"button",onClick:function(){return c((function(e){return!e}))},children:r(null!==(n=null===d||void 0===d?void 0:d.label)&&void 0!==n?n:"")}),(0,f.jsx)("div",{style:{flex:1,display:"flex",justifyContent:"flex-end",alignItems:"flex-start"},children:(0,f.jsx)("button",{className:"proj-back__btn",onClick:function(){return c((function(e){return!e}))},children:(0,f.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 5.067 8.137",children:(0,f.jsx)("path",{id:"Fl\xe8che",d:"M3.438,2.488,1.2,4.775a.683.683,0,0,1-1,0,.782.782,0,0,1,0-1.055L3.6.2A.581.581,0,0,1,4.033,0h.262A.525.525,0,0,1,4.6.2L7.932,3.795a.782.782,0,0,1,0,1.055.683.683,0,0,1-1,0L4.889,2.639C4.306,2.245,4.053,2.132,3.438,2.488Z",transform:"translate(0 8.137) rotate(-90)",fill:"#fff",fillRule:"evenodd"})})})}),(null===o||void 0===o?void 0:o.length)>0&&s&&(0,f.jsx)("ul",{className:"dropdown-target-container",children:null===o||void 0===o?void 0:o.map((function(e){var n,i;return(0,f.jsx)("li",{value:null!==(n=null===e||void 0===e?void 0:e.id)&&void 0!==n?n:null===e||void 0===e?void 0:e.label,className:"dropdown-list-item-xx ".concat((null===d||void 0===d?void 0:d.label)===(null===e||void 0===e?void 0:e.label)||(null===d||void 0===d?void 0:d.id)===(null===e||void 0===e?void 0:e.id)?"selected":""),children:(0,f.jsx)("button",{className:"dropdown-button-xx",onClick:function(){var n,i;return i=null!==(n=null===e||void 0===e?void 0:e.label)&&void 0!==n?n:null===e||void 0===e?void 0:e.id,t(i),void setTimeout((function(){return c(!1)}),100)},children:r(null!==(i=null===e||void 0===e?void 0:e.label)&&void 0!==i?i:"")})},(null===e||void 0===e?void 0:e.label)+(null===e||void 0===e?void 0:e.id))}))})]})},Ue=t(6739),Ge=t(5671),Ye=t(3144),$e=t(7326),Ke=t(136),Je=t(9388),Xe=t(9054),Qe=function(e){(0,Ke.Z)(t,e);var n=(0,Je.Z)(t);function t(e){var o;return(0,Ge.Z)(this,t),(o=n.call(this,e)).getForgeToken=function(){return{access_token:o.props.token,expires_in:3599,token_type:"Bearer"}},o.handleTokenRequested=function(e){if(console.log("Token requested by the viewer."),e){var n=o.getForgeToken();console.log("Token : "+n.access_token),n&&e(n.access_token,n.expires_in)}},o.handleDocumentLoaded=function(e,n){0===n.length?console.error("Document contains no viewables."):(console.log("handleDocumentLoaded:",n[0]),o.setViews(n),o.forceUpdate())},o.onSelectionEvent=function(e){var n=(0,$e.Z)(o),t=(o.viewer.getSelection(),n.viewer.model.getData().instanceTree);if(1===e.dbIdArray.length){for(var i=e.dbIdArray[0],l=[i];i;)i=t.getNodeParentId(i),l.push(i);n.viewer.model.getBulkProperties(l,["GUID"],(function(e){if(e&&e.length>0){var t=e[0].properties[0].displayValue;console.log("GUID!!!!"),n.props.onSelectedGuid(t)}}))}},o.docs=[],o.views={},o.state={enable:!1,error:!1,empty:!0},o.viewerDiv=i.createRef(),o.viewer=null,o.resizeHandling=null,"undefined"!==typeof e.urn&&""!==e.urn&&o.docs.push(e.urn),o.state={dimensions:{width:-1,height:-1}},o}return(0,Ye.Z)(t,[{key:"componentDidMount",value:function(){console.log("Comp model"),this.handleScriptLoad.bind(this),this.handleScriptLoad()}},{key:"componentWillUnmount",value:function(){console.log("React Forge Viewer unmounting..."),this.viewer&&(this.viewer.removeEventListener(window.Autodesk.Viewing.SELECTION_CHANGED_EVENT,this.onSelectionEvent),this.viewer.tearDown(),this.viewer.finish(),this.viewer=null,console.log("React Forge Viewer destroyed."))}},{key:"handleLoadModelSuccess",value:function(e){console.log(window.Autodesk.Viewing),console.log("Model successfully loaded by Forge Viewer.",e),this.props.onModelLoad&&this.props.onModelLoad(this.viewer,e)}},{key:"handleLoadModelError",value:function(e){this.setState({error:!0}),console.error("Error loading Forge model - errorCode:"+e),this.props.onModelError&&this.props.onModelError(e)}},{key:"handleViewerError",value:function(e){this.setState({error:!0}),console.error("Error loading Forge Viewer. - errorCode:",e),this.props.onViewerError&&this.props.onViewerError(e)}},{key:"handleScriptLoad",value:function(){console.log("Autodesk scripts have finished loading.");var e={env:"AutodeskProduction",getAccessToken:this.handleTokenRequested};window.Autodesk.Viewing.Initializer(e,this.handleViewerInit.bind(this))}},{key:"handleViewerInit",value:function(){console.log("Forge Viewer has finished initializing."),this.props.proxy&&window.Autodesk.Viewing.endpoint.setEndpointAndApi(this.props.proxy,"derivativeV2");var e=this.viewerDiv.current;this.props.headless?this.viewer=new window.Autodesk.Viewing.Viewer3D(e):this.viewer=new window.Autodesk.Viewing.Private.GuiViewer3D(e),console.log("Starting the Forge Viewer...");var n=this.viewer.start();n?(console.error("Error starting Forge Viewer - code:",n),this.handleViewerError(n)):(console.log("Forge Viewer has successfully started."),this.setState({enable:!0}),this.reviewDocuments()),this.viewer.addEventListener(window.Autodesk.Viewing.SELECTION_CHANGED_EVENT,this.onSelectionEvent)}},{key:"handleLoadDocumentSuccess",value:function(e){console.log("Forge viewer has successfully loaded document:",e);var n=e.getRoot().search({type:"geometry"},!0);n.forEach((function(n){n.doc=e})),this.handleDocumentLoaded(e,n)}},{key:"handleLoadDocumentError",value:function(e){this.setState({error:!0}),console.error("Error loading Forge document - errorCode:"+e),this.props.onDocumentError&&this.props.onDocumentError(e)}},{key:"clearErrors",value:function(){this.setState({error:!1})}},{key:"clearViews",value:function(){this.views={},this.viewer&&(this.viewer.tearDown(),this.viewer.start())}},{key:"reviewDocuments",value:function(){var e=this;if(this.viewer){this.clearErrors(),console.log("reviewing documents...");Object.keys(this.docs);this.setState({empty:0===this.docs.length}),this.docs.forEach((function(n){e.loadDocument(n)}))}}},{key:"loadDocument",value:function(e){var n="urn:".concat(e),t=this.handleLoadDocumentSuccess.bind(this),i=this.handleLoadDocumentError.bind(this);window.Autodesk.Viewing.Document.load(n,t,i)}},{key:"loadView",value:function(e){console.log("loading view:",e.guid),this.views[e.viewableID]=e;var n=e.doc.getViewablePath(e),t=this.handleLoadModelSuccess.bind(this),i=this.handleLoadModelError.bind(this),o={sharedPropertyDbPath:e.doc.getFullPath()};this.viewer.loadModel(n,o,t,i)}},{key:"isArrayDifferent",value:function(e,n){if(null==e&&null==n)return!1;if(null==e||null==n)return!0;if(e.length!==n.length)return!0;for(var t=0;t<e.length;t++)if(e[t]!==n[t])return!0;return!1}},{key:"shouldComponentUpdateURN",value:function(e,n){this.clearViews(),!e.urn||""===e.urn||"undefined"===typeof e.urn||Array.isArray(e.urn)&&0===e.urn.length?this.docs.length>0&&this.setDocuments([]):Array.isArray(e.urn)?this.isArrayDifferent(this.props.urn,e.urn)&&this.setDocuments(e.urn):e.urn!==this.props.urn?(this.setDocuments([e.urn]),this.loadDocument([e.urn])):this.loadDocument([e.urn])}},{key:"shouldComponentUpdateView",value:function(e,n){!e.view||"undefined"===typeof e.view||Array.isArray(e.view)&&0===e.view.length?Object.keys(this.views).length>0&&this.clearViews():Array.isArray(e.view)?this.isArrayDifferent(this.props.view,e.view)&&this.setViews(e.view):this.props.view!==e.view&&this.setViews([e.view])}},{key:"shouldComponentUpdate",value:function(e,n){return this.shouldComponentUpdateURN(e,n),this.shouldComponentUpdateView(e,n),!0}},{key:"setDocuments",value:function(e){this.docs=e,this.clearViews(),this.reviewDocuments()}},{key:"setViews",value:function(e){var n=this,t=Object.assign({},this.views),i=[];e.forEach((function(e){t.hasOwnProperty(e.viewableID)?delete t[e.viewableID]:i.push(e)})),Object.keys(t).length>0?(this.viewer.tearDown(),this.viewer.start(),e.forEach((function(e){n.loadView(e)}))):i.forEach((function(e){n.loadView(e)}))}},{key:"handleResize",value:function(e){var n=this;this.setState({dimensions:e.bounds}),this.resizeHandling&&clearTimeout(this.resizeHandling),this.resizeHandling=setTimeout((function(){n.viewer&&n.viewer.resize()}),100)}},{key:"render",value:function(){var e=this;return(0,f.jsx)(Xe.Z,{bounds:!0,onResize:this.handleResize.bind(this),children:function(n){var t=n.measureRef;return(0,f.jsxs)("div",{ref:t,className:"ForgeViewerContainer",children:[(0,f.jsx)("div",{ref:e.viewerDiv,className:"ForgeViewer",style:{height:e.state.dimensions.height}}),e.state.empty&&(0,f.jsx)("div",{className:"scrim",children:(0,f.jsx)("div",{className:"message",children:(0,f.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,f.jsx)("path",{d:"M12.89 1.45l8 4A2 2 0 0 1 22 7.24v9.53a2 2 0 0 1-1.11 1.79l-8 4a2 2 0 0 1-1.79 0l-8-4a2 2 0 0 1-1.1-1.8V7.24a2 2 0 0 1 1.11-1.79l8-4a2 2 0 0 1 1.78 0z"}),(0,f.jsx)("polyline",{points:"2.32 6.16 12 11 21.68 6.16"}),(0,f.jsx)("line",{x1:"12",y1:"22.76",x2:"12",y2:"11"})]})})}),e.state.error&&(0,f.jsx)("div",{className:"scrim",children:(0,f.jsxs)("div",{className:"message",children:[(0,f.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,f.jsx)("circle",{cx:"12",cy:"12",r:"10"}),(0,f.jsx)("line",{x1:"12",y1:"8",x2:"12",y2:"12"}),(0,f.jsx)("line",{x1:"12",y1:"16",x2:"12",y2:"16"})]}),(0,f.jsx)("div",{children:"Viewer Error"})]})}),!e.state.enable&&(0,f.jsx)("div",{className:"scrim",children:(0,f.jsxs)("div",{className:"message",children:[(0,f.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:(0,f.jsx)("polygon",{points:"13 2 3 14 12 14 11 22 21 10 12 10 13 2"})}),(0,f.jsx)("div",{children:"Starting Viewer..."})]})})]})}})}}]),t}(i.Component),en=t(3179),nn=t(4569),tn=t.n(nn),on=t(8079);var ln=t.p+"static/media/cloud-upload.d927155858f04d23bb808ca3703f6838.svg",rn=["onChange","nodeName"],dn=function(e){var n=e.onChange,t=e.nodeName,o=(0,D.Z)(e,rn),l=(0,i.useRef)(null),r=(0,i.useState)([]),d=(0,S.Z)(r,2),a=d[0],u=d[1],s=(0,I.$)().t;return(0,f.jsxs)("div",{style:{display:"flex",width:"100%",alignItems:"flex-end",justifyContent:"center",height:"100%"},children:[(0,f.jsxs)("div",{style:{minWidth:200,minHeight:200,display:"flex",justifyContent:"center",alignItems:"center",flexDirection:"column",cursor:"pointer"},tabIndex:0,role:"button",onClick:function(){var e;null!==(e=l.current)&&void 0!==e&&e.click&&l.current.click()},children:[(0,f.jsx)("div",{style:{width:100,height:100},children:(0,f.jsx)("img",{width:"100%",height:"100%",style:{cursor:"pointer",objectFit:"contain"},src:ln,alt:""})}),(0,f.jsx)("div",{style:{maxWidth:"30vw",textAlign:"center"},children:a.length>0?(0,f.jsx)("p",{children:a.length>1?a.join(", "):a[0]}):t&&(0,f.jsx)("p",{children:s("upload-file-add-to-project",{name:t})})})]}),(0,f.jsx)("input",(0,p.Z)((0,p.Z)({},o),{},{onChange:function(e){var t;if(n(e),null!==e&&void 0!==e&&null!==(t=e.target)&&void 0!==t&&t.files){for(var i=[],o=0;o<(null===e||void 0===e||null===(l=e.target)||void 0===l||null===(r=l.files)||void 0===r?void 0:r.length);o++){var l,r,d,a;i.push(null===e||void 0===e||null===(d=e.target)||void 0===d||null===(a=d.files[o])||void 0===a?void 0:a.name)}u(i)}},type:"file",hidden:!0,ref:l}))]})},an=t(4849),un=t(658),sn=function(e){(0,i.useRef)();var n=(0,o.I0)(),t=(0,i.useState)(""),l=(0,S.Z)(t,2),r=l[0],d=l[1],a=(0,i.useState)(!1),u=(0,S.Z)(a,2),s=u[0],c=u[1],v=(0,i.useState)(""),h=(0,S.Z)(v,2)[1],p=(0,o.v9)((function(e){return e.forge})),m=((0,o.v9)((function(e){return e.urn.urn})),(0,o.v9)((function(e){return e.urn_load.response.content})),(0,o.v9)((function(e){return e.nodeData})),(0,i.useRef)(null)),g=(0,i.useRef)(0),x=(0,I.$)().t;(0,i.useEffect)((function(){n((0,en.pO)()),d("")}),[]);var j=function(t){if(t.target.files[0]){var i=new FormData;i.append("file",t.target.files[0]),d(""),c(!1),tn().post((0,on.iE)().urlHostApi+"/public/forge/upload/"+e.nodeId+"?projectId="+e.projectId,i).then((function(t){"success"===t.data.content.result&&(n((0,en.ie)(t.data.content.urn)),e.projectId&&n((0,E.AV)(e.projectId)),d(t.data.content.urn))}))}},b=function(e){un.Z.getCheckStatus(e).then((function(e){if(null!==e&&void 0!==e&&e.content){var n=null===e||void 0===e?void 0:e.content,t=n.status,i=n.progress;"success"===t&&(clearInterval(m.current),c(!0)),i&&"inprogress"===t&&h(null===i||void 0===i?void 0:i.substring(0,null===i||void 0===i?void 0:i.indexOf("complete")))}}))};(0,i.useEffect)((function(){var e;r.length>0&&(e=r,clearInterval(m.current),c(!1),e&&(m.current=setInterval((function(){g.current>9&&clearInterval(m.current),g.current=g.current+1,b(e)}),1e4)))}),[r]),(0,i.useEffect)((function(){var n,t,i,o,l;(d(""),c(!1),null!==(n=e.activeNode)&&void 0!==n&&null!==(t=n.attributes)&&void 0!==t&&t.data)&&b(null===(i=e.activeNode)||void 0===i||null===(o=i.attributes)||void 0===o||null===(l=o.data)||void 0===l?void 0:l.toString())}),[e.activeNode]);return(0,f.jsx)("div",{className:"adsk-viewing-viewer overlay-map",children:function(){var n,t,i,o,l,d,a,u,c,v,h;if((null===(n=p.response.content)||void 0===n?void 0:n.access_token.length)>0)return"model_3d"!==(null===(t=e.activeNode)||void 0===t||null===(i=t.attributes)||void 0===i?void 0:i.nodeType)&&"ifc"!==(null===(o=e.activeNode)||void 0===o||null===(l=o.attributes)||void 0===l?void 0:l.nodeType)||"string"!==typeof(null===(d=e.activeNode)||void 0===d||null===(a=d.attributes)||void 0===a?void 0:a.data)?r.length>0?s?(0,f.jsx)(Qe,{version:"6.0",expiresAt:3599,token:null===(u=p.response.content)||void 0===u?void 0:u.access_token,urn:r,headless:!1,onSelectedGuid:""}):(0,f.jsxs)("div",{style:{height:"100%",width:"100%",margin:"auto",display:"flex",justifyContent:"center",alignItems:"center",flexDirection:"column"},children:[(0,f.jsx)(an.Z,{animation:"grow",variant:"info"}),(0,f.jsx)("span",{style:{textAlign:"center"},children:x("preparing-model-data")})]}):(0,f.jsx)(dn,{nodeName:e.nodeName,className:"center-input",name:"upload",onChange:j}):s?(0,f.jsx)(Qe,{version:"6.0",expiresAt:3599,token:null===(c=p.response.content)||void 0===c?void 0:c.access_token,urn:null===(v=e.activeNode)||void 0===v||null===(h=v.attributes)||void 0===h?void 0:h.data,headless:!1,onSelectedGuid:""}):(0,f.jsxs)("div",{style:{height:"100%",width:"100%",margin:"auto",display:"flex",justifyContent:"center",alignItems:"center",flexDirection:"column"},children:[(0,f.jsx)(an.Z,{animation:"grow",variant:"info"}),(0,f.jsx)("span",{style:{textAlign:"center"},children:x("preparing-model-data")})]})}()})},cn=function(e){(0,Ke.Z)(t,e);var n=(0,Je.Z)(t);function t(e){var i;return(0,Ge.Z)(this,t),(i=n.call(this,e)).state={hasError:!1},i}return(0,Ye.Z)(t,[{key:"componentDidCatch",value:function(e,n){console.log({error:e,errorInfo:n})}},{key:"render",value:function(){return this.state.hasError?null:this.props.children}}],[{key:"getDerivedStateFromError",value:function(e){return{hasError:!0}}}]),t}(i.Component),vn=t(9811),fn=new Date,hn=function(e){var n,t,o=e.projects,l=e.node,r=e.onUpdateCell,d=e.isProjectsView,a=e.selectedProjectId,u=e.onChangeRepresentation,s=(0,i.useRef)(),c=(0,i.useRef)(),v=(0,i.useState)(),h=(0,S.Z)(v,2),m=h[0],g=h[1],x=(0,i.useState)("Day"),j=(0,S.Z)(x,2),b=j[0],w=j[1],Z=(0,i.useState)(!1),k=(0,S.Z)(Z,2),N=k[0],C=k[1],E=(0,i.useState)(),D=(0,S.Z)(E,2),_=D[0],R=D[1],A=(0,i.useState)(),T=(0,S.Z)(A,2),L=T[0],B=T[1],F=(0,i.useState)(),V=(0,S.Z)(F,2),P=(V[0],V[1]),M=(0,I.$)(),z=M.t,O=M.i18n,q=function(e){w(e)},H=function(e){R(e),"empty"===(null===e||void 0===e?void 0:e.nodeType)&&"function"===typeof u&&d&&u("map")},W=function(e,n,t){r&&r({id:e.projectId,node:{id:e.id,startsAt:new Date(n).getTime(),endsAt:new Date(t).getTime()}})};return(0,i.useEffect)((function(){if(s.current){var e,n;m&&(null===m||void 0===m||m.clear(),null===m||void 0===m||m.hide_popup());var t=d?function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(e){return e},t=[];return null===e||void 0===e||e.forEach((function(e){var i,o,l,r,d,a,u,s,c,v,f,h,m,g,x,j,b,w,Z,k,N,C,S;t.push((0,p.Z)({id:null!==(i=null===e||void 0===e||null===(o=e.tree)||void 0===o||null===(l=o.attributes)||void 0===l||null===(r=l.id)||void 0===r?void 0:r.toString())&&void 0!==i?i:e.id,start:null!==e&&void 0!==e&&null!==(d=e.tree)&&void 0!==d&&null!==(a=d.attributes)&&void 0!==a&&a.startsAt?new Date(null===e||void 0===e||null===(u=e.tree)||void 0===u||null===(s=u.attributes)||void 0===s?void 0:s.startsAt):fn,end:null!==e&&void 0!==e&&null!==(c=e.tree)&&void 0!==c&&null!==(v=c.attributes)&&void 0!==v&&v.endsAt?new Date(null===e||void 0===e||null===(f=e.tree)||void 0===f||null===(h=f.attributes)||void 0===h?void 0:h.endsAt):new Date(fn.getFullYear(),fn.getMonth()+1),progress:100*(0,y.dh)(null===e||void 0===e?void 0:e.tree),name:(null!==e&&void 0!==e&&null!==(m=e.tree)&&void 0!==m&&null!==(g=m.attributes)&&void 0!==g&&g.status?n(null===e||void 0===e||null===(x=e.tree)||void 0===x||null===(j=x.attributes)||void 0===j||null===(b=j.status)||void 0===b?void 0:b.toString())+": ":"")+(null!==(w=null===e||void 0===e||null===(Z=e.tree)||void 0===Z?void 0:Z.name)&&void 0!==w?w:null===e||void 0===e?void 0:e.name),projectId:e.id,title:null!==(k=null===e||void 0===e||null===(N=e.tree)||void 0===N?void 0:N.name)&&void 0!==k?k:null===e||void 0===e?void 0:e.name},null!==(C=null===e||void 0===e||null===(S=e.tree)||void 0===S?void 0:S.attributes)&&void 0!==C?C:{}))})),t}(o,z):function(e,n){var t,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(e){return e},o=[];return null===e||void 0===e||null===(t=e.children)||void 0===t||t.forEach((function(e){var t,l,r,d,a,u,s,c,v,f;o.push((0,p.Z)({id:null===e||void 0===e||null===(t=e.attributes)||void 0===t||null===(l=t.id)||void 0===l?void 0:l.toString(),start:null!==e&&void 0!==e&&null!==(r=e.attributes)&&void 0!==r&&r.startsAt?new Date(null===e||void 0===e||null===(d=e.attributes)||void 0===d?void 0:d.startsAt):fn,end:null!==e&&void 0!==e&&null!==(a=e.attributes)&&void 0!==a&&a.endsAt?new Date(null===e||void 0===e||null===(u=e.attributes)||void 0===u?void 0:u.endsAt):new Date(fn.getFullYear(),fn.getMonth()+1),progress:100*(0,y.dh)(e),name:(null!==e&&void 0!==e&&null!==(s=e.attributes)&&void 0!==s&&s.status?i(null===e||void 0===e||null===(c=e.attributes)||void 0===c||null===(v=c.status)||void 0===v?void 0:v.toString())+": ":"")+(null===e||void 0===e?void 0:e.name),projectId:n,title:null===e||void 0===e?void 0:e.name},null!==(f=e.attributes)&&void 0!==f?f:{}))})),o}(l,a,z),i=new vn.Z("#gantt-frappe-10x",t,{on_click:H,on_date_change:W,on_progress_change:function(e,n){console.log(e,n)},on_view_change:q,view_mode:b,language:O.language,popup_trigger:"mouseover"});g(i),P(null===(e=s.current)||void 0===e?void 0:e.getBoundingClientRect());var r=null===(n=s.current)||void 0===n?void 0:n.querySelector(".date");if(r){var u,v=r.getBoundingClientRect(),f=null===(u=c.current)||void 0===u?void 0:u.getBoundingClientRect();v.y=v.bottom-f.y+7,v.height=s.current.clientHeight-v.top,B(v)}}}),[s,o,d,l]),(0,f.jsxs)("div",{ref:c,id:"gantt-frappe-wrapper-10x",style:{marginLeft:15,position:"relative"},children:[(0,f.jsx)("div",{className:"gantt-btn-group",children:["Day","Week","Month"].map((function(e){return(0,f.jsx)("button",{className:"gantt-btn ".concat(b===e?"active":""),onClick:function(){return function(e){null!==m&&void 0!==m&&m.change_view_mode&&m.change_view_mode(e)}(e)},children:z(e)},e)}))}),(0,f.jsx)("div",{style:{top:null===L||void 0===L?void 0:L.y,height:null===L||void 0===L?void 0:L.height,display:"flex",flexDirection:"column"},className:"task-layer",children:(null===m||void 0===m||null===(n=m.bars)||void 0===n?void 0:n.length)>0?null===(t=m.bars)||void 0===t?void 0:t.map((function(e){var n,t;return(0,f.jsx)("div",{style:{position:"absolute",top:(null===e||void 0===e?void 0:e.y)-65},children:null===e||void 0===e||null===(t=e.task)||void 0===t?void 0:t.title},null===e||void 0===e||null===(n=e.task)||void 0===n?void 0:n.id)})):null}),(0,f.jsx)("svg",{ref:s,id:"gantt-frappe-10x"}),N?(0,f.jsx)(Ue.Z,{show:N,el:"#representation-container-10x",container:"#representation-container-10x",onDismiss:function(){C(!1)},children:(0,f.jsxs)("div",{children:[(0,f.jsx)("div",{children:null===_||void 0===_?void 0:_.name}),(0,f.jsxs)("div",{className:"gantt-control-wrapper",children:[(0,f.jsx)("label",{htmlFor:"start",children:z("start")}),(0,f.jsx)("input",{id:"start",className:"gantt-input",type:"date",defaultValue:null!==_&&void 0!==_&&_.startsAt?(0,y.P4)(new Date(null===_||void 0===_?void 0:_.startsAt)):(0,y.P4)(fn)})]}),(0,f.jsxs)("div",{className:"gantt-control-wrapper",children:[(0,f.jsx)("label",{htmlFor:"end",children:z("end")}),(0,f.jsx)("input",{id:"end",className:"gantt-input",type:"date",defaultValue:null!==_&&void 0!==_&&_.endsAt?(0,y.P4)(new Date(null===_||void 0===_?void 0:_.endsAt)):(0,y.P4)(new Date(fn.getFullYear(),fn.getMonth()+1))})]})]})}):null]})},pn=["activeNode","projects","selectedProjectId","projectId"],mn=function(e){var n=e.activeNode,t=e.projects,i=e.selectedProjectId,l=(e.projectId,(0,D.Z)(e,pn)),r=!n,d=(0,o.I0)();return(0,f.jsx)(cn,{children:(0,f.jsx)("div",{children:(0,f.jsx)(hn,(0,p.Z)((0,p.Z)({isProjectsView:r,node:n,selectedProjectId:i},l),{},{projects:t,onChangeRepresentation:function(e){d((0,ee.BR)(e))}}))})})},gn=t(3816),xn=t.n(gn),jn=(t(8162),function(e){var n=e.color,t=e.id,l=e.label,r=e.cards,d=e.isProjectBoard,a=e.onAddCard,u=(0,I.$)().t,s=(0,o.I0)();(0,i.useEffect)((function(){var e=document.body.querySelector('div[data-rbd-draggable-id="column-draggable-'.concat(t,'"]'));e&&(e.style.backgroundColor="rgba(".concat(n,", 0.5)"))}),[]);return(0,f.jsxs)("div",{id:"kanban-column-header-".concat(t),className:"kanban-colum-header",style:{marginBottom:5,color:"rgb(".concat(n,")"),padding:5,display:"flex",justifyContent:"space-between",alignItems:"center"},children:["".concat(u(l)," (").concat(null===r||void 0===r?void 0:r.length,")"),(0,f.jsxs)("button",{style:{backgroundColor:"rgba(".concat(n,", 0.3)")},className:"kanban-colum-header-btn",type:"button",children:[(0,f.jsx)("span",{style:{backgroundColor:"rgb(".concat(n,")")}}),(0,f.jsx)("span",{style:{backgroundColor:"rgb(".concat(n,")")}}),(0,f.jsx)("span",{style:{backgroundColor:"rgb(".concat(n,")")}})]}),(0,f.jsx)("div",{style:{position:"absolute",bottom:5},children:d?(0,f.jsxs)("button",{style:{backgroundColor:"transparent",display:"flex",alignItems:"center",border:"none",color:"#fff",outline:"none",transition:"0.3s"},className:"kanban-add-card-btn",onClick:function(){d&&s((0,ee.BR)("map")),s((0,Q.Q)(l))},title:u(d?"click-to-use-map-to-select-location":"click-to-add-new-card",{status:u(l)}),children:[(0,f.jsx)(J.Z,{style:{height:20,width:20},background:"rgba(".concat(n,", 0.3)")})," ",u("add")]}):(0,f.jsx)(z,{style:{backgroundColor:"transparent",display:"flex",alignItems:"center",border:"none",color:"#fff",outline:"none",transition:"0.3s"},icon:(0,f.jsx)(J.Z,{style:{height:20,width:20},background:"rgba(".concat(n,", 0.3)")}),text:u("add"),className:"kanban-add-card-btn",title:u("click-to-add-new-card",{status:u(l)}),onEnter:function(e){return a(e,l)}})})]})}),bn=["fill","background","style"],yn=function(e){e.fill;var n=e.background,t=e.style,i=(0,D.Z)(e,bn);return(0,f.jsx)("svg",(0,p.Z)((0,p.Z)({},i),{},{tabIndex:0,role:"button",style:(0,p.Z)((0,p.Z)({},{height:"1.5em",width:"1.5em",transform:"translateX(-15%) scale(0.5)",cursor:"pointer",border:"none",outline:"none"}),null!==t&&void 0!==t?t:{}),viewBox:"0 0 45.701 45.7",fill:null!==n&&void 0!==n?n:"#F3BE3D",children:(0,f.jsx)("g",{children:(0,f.jsx)("g",{children:(0,f.jsx)("path",{d:"M20.687,38.332c-2.072,2.072-5.434,2.072-7.505,0L1.554,26.704c-2.072-2.071-2.072-5.433,0-7.504 c2.071-2.072,5.433-2.072,7.505,0l6.928,6.927c0.523,0.522,1.372,0.522,1.896,0L36.642,7.368c2.071-2.072,5.433-2.072,7.505,0 c0.995,0.995,1.554,2.345,1.554,3.752c0,1.407-0.559,2.757-1.554,3.752L20.687,38.332z"})})})}))},wn=function(e){var n=e.id,t=e.defaultValue,o=e.defaultText,l=e.onChange,r=(0,i.useState)(!0),d=(0,S.Z)(r,2),a=d[0],u=d[1],s=(0,i.useRef)(),c=function(){var e=null===s||void 0===s?void 0:s.current;u(!1),setTimeout((function(){null!==e&&void 0!==e&&e.showPicker?(e.showPicker(),null===e||void 0===e||e.focus()):null===e||void 0===e||e.focus()}),100)};return(0,f.jsxs)("div",{tabIndex:0,role:"button",onFocus:c,onClick:c,className:"date-input-container",children:[(0,f.jsx)("input",{onFocus:function(e){e.stopPropagation()},defaultValue:t?(0,y.P4)(t):(0,y.P4)(new Date),onBlur:function(){setTimeout((function(){return u(!0)}),300)},hidden:a,ref:s,type:"date",id:n}),(0,f.jsx)("button",{onFocus:function(e){return e.stopPropagation()},onClick:function(e){e.stopPropagation(),function(){var e,n=null===s||void 0===s||null===(e=s.current)||void 0===e?void 0:e.value;if("function"===typeof l&&n){var i=new Date(n);(null===i||void 0===i?void 0:i.getTime())!==(null===t||void 0===t?void 0:t.getTime())&&l(i)}setTimeout((function(){return u(!0)}),300)}()},hidden:a,children:(0,f.jsx)(yn,{background:"#7B83EB"})}),(0,f.jsx)("span",{hidden:!a,children:t?t.toLocaleDateString():o})]})},Zn=function(e){var n=e.title,t=e.startsAt,o=e.endsAt,l=e.description,r=e.iconName,d=e.nodeType,a=e.restricted,u=e.onChange,s=e.parentId,c=e.id,v=e.showDates,h=(0,i.useState)(""),p=(0,S.Z)(h,2),m=p[0],g=p[1],x=(0,i.useState)(""),j=(0,S.Z)(x,2),b=j[0],y=j[1],w=(0,I.$)().t;(0,i.useEffect)((function(){g(n)}),[n]),(0,i.useEffect)((function(){y(l)}),[l]);var Z=De.question;r in De?Z=De[r]:d in De&&(Z=De[d]);return(0,f.jsxs)("div",{className:"react-kanban-card react-kanban-card__container",id:"kanban-card-".concat(c),children:[(0,f.jsx)("span",{children:(0,f.jsxs)("div",{className:"react-kanban-card__title",style:{marginTop:8},children:[(0,f.jsx)("div",{style:{textTransform:"capitalize"},children:(0,f.jsx)(R,{onEnter:function(e){u&&u({id:c,parentId:s,name:e})},style:{paddingLeft:10,textTransform:"capitalize",fontWeight:600},value:null!==m&&void 0!==m?m:"",onChange:function(e){var n;return g(null===e||void 0===e||null===(n=e.target)||void 0===n?void 0:n.value)},readonly:a,placeholder:w("card-title")})}),(0,f.jsx)("img",{src:Z,alt:"",style:{width:25,height:25,objectFit:"cover",objectPosition:"center"}})]})}),(0,f.jsx)("div",{className:"react-kanban-card__description",children:(0,f.jsx)(R,{onEnter:function(e){u&&u({id:c,parentId:s,description:e})},style:{paddingLeft:10},value:b,onChange:function(e){var n;return y(null===e||void 0===e||null===(n=e.target)||void 0===n?void 0:n.value)},readonly:a,placeholder:w("card-description")})}),v?(0,f.jsxs)("div",{className:"react-kanban-card__dates",children:[(0,f.jsxs)("div",{className:"react-kanban-card__date-control-group",children:[(0,f.jsx)("label",{htmlFor:"start-date-".concat(c),children:w("start-date")}),(0,f.jsx)(wn,{defaultText:w("none"),onChange:function(e){u&&u({id:c,parentId:s,startsAt:e.getTime()})},id:"start-date-".concat(c),defaultValue:t?new Date(t):null})]}),(0,f.jsxs)("div",{className:"react-kanban-card__date-control-group",children:[(0,f.jsx)("label",{htmlFor:"due-date-".concat(c),children:w("due-date")}),(0,f.jsx)(wn,{defaultText:w("none"),onChange:function(e){u&&u({id:c,parentId:s,endsAt:e.getTime()})},id:"due-date-".concat(c),defaultValue:o?new Date(o):null})]})]}):null]})},kn=["content"],Nn=function(e,n){var t={todo:1,"in-progress":2,done:3,delivered:4},i=e.label,o=n.label;return t[i]>t[o]?1:t[i]<t[o]?-1:0},Cn=function(e){var n,t=e.kanban,o=e.onUpdateCell,l=e.selectedProjectId,r=e.nodeId,d=e.scrollId,a=e.projectId,u=e.showDates,s=e.onAddNewNode,c=(0,i.useState)({columns:[]}),v=(0,S.Z)(c,2),h=v[0],m=v[1];(0,i.useRef)();(0,i.useEffect)((function(){m(function(e,n,t){var i,o,l,r={columns:[]};return(null===e||void 0===e||null===(i=e.columns)||void 0===i?void 0:i.length)>0&&(null===e||void 0===e||null===(l=e.columns)||void 0===l||l.forEach((function(i){var o,l,d,a=(0,y.lR)(i.label,{rgb:!0}).color,u=function(e){var t,o,l,r,d,a,u;return n?(null===e||void 0===e||null===(a=e.attributes)||void 0===a||null===(u=a.status)||void 0===u?void 0:u.toString())===(null===i||void 0===i?void 0:i.label):null!==e&&void 0!==e&&e.tree?(null===e||void 0===e||null===(t=e.tree)||void 0===t||null===(o=t.attributes)||void 0===o||null===(l=o.status)||void 0===l?void 0:l.toString())===(null===i||void 0===i?void 0:i.label):(null===e||void 0===e||null===(r=e.attributes)||void 0===r||null===(d=r.status)||void 0===d?void 0:d.toString())===(null===i||void 0===i?void 0:i.label)};"todo"==i.label&&(u=function(e){var t,o,l,r,d,a,u,s,c,v,f,h,p,m,g;return n?(null===e||void 0===e||null===(h=e.attributes)||void 0===h||null===(p=h.status)||void 0===p?void 0:p.toString())===(null===i||void 0===i?void 0:i.label)||!(null!==e&&void 0!==e&&null!==(m=e.attributes)&&void 0!==m&&m.status)&&"empty"!==(null===e||void 0===e||null===(g=e.attributes)||void 0===g?void 0:g.nodeType):null!==e&&void 0!==e&&e.tree?(null===e||void 0===e||null===(t=e.tree)||void 0===t||null===(o=t.attributes)||void 0===o||null===(l=o.status)||void 0===l?void 0:l.toString())===(null===i||void 0===i?void 0:i.label)||!(null!==e&&void 0!==e&&null!==(r=e.tree)&&void 0!==r&&null!==(d=r.attributes)&&void 0!==d&&d.status)&&"empty"!==(null===e||void 0===e||null===(a=e.tree)||void 0===a||null===(u=a.attributes)||void 0===u?void 0:u.nodeType):(null===e||void 0===e||null===(s=e.attributes)||void 0===s||null===(c=s.status)||void 0===c?void 0:c.toString())===(null===i||void 0===i?void 0:i.label)||!(null!==e&&void 0!==e&&null!==(v=e.attributes)&&void 0!==v&&v.status)&&"empty"!==(null===e||void 0===e||null===(f=e.attributes)||void 0===f?void 0:f.nodeType)});var s=null===e||void 0===e||null===(o=e.data)||void 0===o||null===(l=o.filter(u))||void 0===l?void 0:l.map((function(e,i){var o,l,r=null!==e&&void 0!==e&&e.attributes?null===e||void 0===e?void 0:e.attributes:null===e||void 0===e||null===(o=e.tree)||void 0===o?void 0:o.attributes;return(0,p.Z)((0,p.Z)({},null!==r&&void 0!==r?r:{id:i+"restricted",restricted:!0,description:null===e||void 0===e?void 0:e.description}),{},{title:null!==e&&void 0!==e&&e.tree?null===e||void 0===e||null===(l=e.tree)||void 0===l?void 0:l.name:null===e||void 0===e?void 0:e.name,parentId:null!==e&&void 0!==e&&e.tree?null===e||void 0===e?void 0:e.id:null!==n&&void 0!==n?n:t,color:a})}));null===r||void 0===r||null===(d=r.columns)||void 0===d||d.push((0,p.Z)((0,p.Z)({},i),{},{id:"".concat(i.label).concat(null!==t&&void 0!==t?t:""),color:a,title:i.label,cards:s,isProjectBoard:!n}))}))),null===(o=r.columns)||void 0===o||o.sort(Nn),r}(t,r,a))}),[t.data]),(0,i.useEffect)((function(){var e=document.getElementById("representation-container-10x");if(e){var n=e.firstChild;if(n){var t=document.getElementById("kanban-card-".concat(d));if(t){var i=t.getBoundingClientRect();null===n||void 0===n||n.scrollTo({top:i.y,left:i.x,behavior:"smooth"})}}}}),[h]);var g=function(e){o&&o(r?{id:l,node:(0,p.Z)((0,p.Z)({},e),{},{parentNodeId:null===e||void 0===e?void 0:e.parentId})}:{id:null===e||void 0===e?void 0:e.parentId,node:(0,p.Z)((0,p.Z)({},e),{},{id:null===e||void 0===e?void 0:e.id})})},x=function(e,n){s&&s({id:null===a||void 0===a?void 0:a.toString(),node:{name:e,attributes:{status:n},parentNodeId:r}})};return(null===h||void 0===h||null===(n=h.columns)||void 0===n?void 0:n.length)>0?(0,f.jsx)(cn,{children:(0,f.jsx)(xn(),{renderColumnHeader:function(e){var n=e.title,t=e.color,i=e.iconName,o=e.id,l=e.label,r=e.cards,d=e.isProjectBoard;return(0,f.jsx)(jn,{onAddCard:x,isProjectBoard:d,title:n,color:t,id:o,iconName:i,label:l,cards:r})},onColumnDragEnd:function(){var e=arguments.length<=1?void 0:arguments[1],n=e.fromPosition,t=arguments.length<=2?void 0:arguments[2],i=t.toPosition,o=(0,p.Z)({},h);o.columns[n]=o.columns[i],o.columns[i]=arguments.length<=0?void 0:arguments[0],m(o)},onCardDragEnd:function(){var e;if(null===(e=arguments.length<=0?void 0:arguments[0])||void 0===e||!e.restricted){var n,t,i,d,a=arguments.length<=1?void 0:arguments[1],u=a.fromPosition,s=a.fromColumnId,c=arguments.length<=2?void 0:arguments[2],v=c.toPosition,f=c.toColumnId,g=(0,p.Z)({},h),x=null===(n=g.columns)||void 0===n?void 0:n.find((function(e){return e.id==s}));null===x||void 0===x||null===(t=x.cards)||void 0===t||t.splice(u,1);var j,b,y,w,Z=null===(i=g.columns)||void 0===i?void 0:i.find((function(e){return e.id==f}));if(s!==f)if(o)if(r)o({id:l,node:{parentNodeId:null===(j=arguments.length<=0?void 0:arguments[0])||void 0===j?void 0:j.parentId,id:null===(b=arguments.length<=0?void 0:arguments[0])||void 0===b?void 0:b.id,status:null===Z||void 0===Z?void 0:Z.label}});else o({id:null===(y=arguments.length<=0?void 0:arguments[0])||void 0===y?void 0:y.parentId,node:{id:null===(w=arguments.length<=0?void 0:arguments[0])||void 0===w?void 0:w.id,status:null===Z||void 0===Z?void 0:Z.label}});null===Z||void 0===Z||null===(d=Z.cards)||void 0===d||d.splice(v,0,arguments.length<=0?void 0:arguments[0]),m(g)}},renderCard:function(e,n){var t=e.content,i=(0,D.Z)(e,kn),o=n.removeCard,l=n.dragging;return(0,f.jsx)(Zn,(0,p.Z)({showDates:u,onChange:g,content:t,dragging:l,removeCard:o},i))},allowAddCard:{on:"top"},onColumnNew:function(e){return(0,p.Z)({id:(new Date).getTime()},e)},id:"kanban-board-125",children:h})}):(0,f.jsx)("span",{})},Sn=["activeNode","projects","activeProject","projectId"],In=function(e){var n,t,i=e.activeNode,l=e.projects,r=e.activeProject,d=(e.projectId,(0,D.Z)(e,Sn)),a=(0,o.v9)((function(e){return e.projectNodeStatuses})),u=(0,o.v9)((function(e){return e.kanbanMeta})).scrollId,s="list"===(0,o.v9)((function(e){return e.kanbanMeta.viewType})),c=null!==(n=null===a||void 0===a||null===(t=a.payload)||void 0===t?void 0:t.filter((function(e){return["todo","in-progress","done","delivered","blocked"].includes(e.label)})))&&void 0!==n?n:["todo","in-progress","done","delivered","blocked"].map((function(e){return{id:e,label:e,iconName:e}}));return i?(0,f.jsx)(Cn,(0,p.Z)((0,p.Z)({projectId:null===r||void 0===r?void 0:r.id,showDates:!0,scrollId:u},d),{},{kanban:{columns:c,data:null===i||void 0===i?void 0:i.children}})):s?(0,f.jsx)("div",{style:{marginLeft:15},children:null===l||void 0===l?void 0:l.map((function(e){var n,t,i,o,l,a,s,v;return null!==e&&void 0!==e&&e.tree?(0,f.jsxs)("details",{open:(null===r||void 0===r?void 0:r.id)===(null===e||void 0===e?void 0:e.id),children:[(0,f.jsx)("summary",{children:null!==(o=null===e||void 0===e||null===(l=e.tree)||void 0===l?void 0:l.name)&&void 0!==o?o:null===e||void 0===e||null===(a=e.tree)||void 0===a||null===(s=a.attributes)||void 0===s?void 0:s.description}),(0,f.jsx)(Cn,(0,p.Z)((0,p.Z)({showDates:!0,projectId:null===e||void 0===e?void 0:e.id,scrollId:u},d),{},{kanban:{columns:c,data:null===e||void 0===e||null===(v=e.tree)||void 0===v?void 0:v.children}}))]},null!==(n=null===e||void 0===e||null===(t=e.tree)||void 0===t||null===(i=t.attributes)||void 0===i?void 0:i.id)&&void 0!==n?n:null===e||void 0===e?void 0:e.id):(0,f.jsx)("span",{})}))}):(0,f.jsx)(Cn,(0,p.Z)((0,p.Z)({showDates:!0,scrollId:u},d),{},{kanban:{columns:["todo","started","completed"].map((function(e){return{id:e,label:e,iconName:e}})),data:l}}))},En=(t(4847),t(5936)),Dn=t(7707),_n=t(430),Rn=t(2532),An=t(8976),Tn=t(6588),Ln=t(7726),Bn=t(1358),Fn=t(2652),Vn=t(8153),Pn=t(5397);var Mn=t.p+"static/media/orange.08ed0737daabcf34240f2a28402d80e9.svg";var zn=t.p+"static/media/blue.18e2e570f303f3c69fadb17f6507ed87.svg";var On={orange:Mn,blue:zn,yellow:t.p+"static/media/yellow.95f3abb3465d6d410ba85571b2c9482f.svg"};var qn=t.p+"static/media/drawable.e28d4a0198e43cb720feecf652f5a7ed.svg",Hn=t(7447),Wn=t(9409),Un=t(8676),Gn=t(6252),Yn=t(9236),$n=t(927),Kn=t(6233),Jn=t(7867),Xn=t(6089);t(4929);var Qn=function(e){var n=e.options,t=e.name,i=e.title,o=(e.checked,e.type),l=void 0===o?"checkbox":o,r=e.onChange,d=null!==t&&void 0!==t?t:(Math.random()*Date.now()).toString(),a=function(e,t){var i=(0,p.Z)((0,p.Z)({},t),{},{checked:e.target.checked});"function"===typeof r&&r({target:i,selection:n.map((function(e){var n,t;return(null===(n=i.value)||void 0===n?void 0:n.toString())===(null===(t=e.value)||void 0===t?void 0:t.toString())?i:"radio"===l?(0,p.Z)((0,p.Z)({},e),{},{checked:!1}):e}))})};return n.length>0?(0,f.jsxs)("fieldset",{className:"inline-select-fieldset",children:[i?(0,f.jsx)("legend",{children:i}):null,(0,f.jsx)("div",{className:"options-container",children:n.map((function(e){return(0,f.jsxs)("label",{title:e.description,children:[(0,f.jsx)("input",{onChange:function(n){return a(n,e)},name:d,type:l,defaultChecked:e.checked}),e.label]},e.value)}))})]}):null};var et=function(e){var n=e.onNext,t=e.entrance,o=e.exit,l=e.projectData,r=(0,i.useState)(""),d=(0,S.Z)(r,2),a=d[0],u=d[1],s=(0,i.useState)(""),c=(0,S.Z)(s,2),h=c[0],p=c[1],m=(0,i.useState)(""),g=(0,S.Z)(m,2),x=g[0],j=g[1],b=(0,i.useState)(""),y=(0,S.Z)(b,2),w=y[0],Z=y[1],k=(0,i.useState)(!0),N=(0,S.Z)(k,2),C=N[0],I=N[1];return(0,i.useEffect)((function(){var e,n,t,i;u(null!==(e=null===l||void 0===l?void 0:l.name)&&void 0!==e?e:""),p(null!==(n=null===l||void 0===l?void 0:l.description)&&void 0!==n?n:""),j(null!==(t=null===l||void 0===l?void 0:l.contractor)&&void 0!==t?t:""),Z(null!==(i=null===l||void 0===l?void 0:l.contractorEmail)&&void 0!==i?i:"")}),[]),(0,f.jsxs)("div",{className:"proj-screen__container ".concat(t?"entrance":""," ").concat(o?"exit":""),children:[(0,f.jsx)("h3",{className:"proj-screen__title",children:"Parlez nous de votre projet"}),(0,f.jsx)(v.Z,{required:!0,value:a,onChange:function(e){return u(null===e||void 0===e?void 0:e.target.value)},containerClassName:"proj-screen__input",title:"Nom du projet"}),(0,f.jsx)(v.Z,{required:!0,value:h,onChange:function(e){return p(null===e||void 0===e?void 0:e.target.value)},containerClassName:"proj-screen__input",title:"D\xe9crivez le en une phrase"}),(0,f.jsx)(Qn,{options:[{label:"Oui",value:1,checked:!0},{label:"Non",value:0}],title:"Serez vous le ma\xeetre d\u2019ouvrage du projet?",type:"radio",checked:0,onChange:function(e){return I(1===e.target.value)}}),C?null:(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)(v.Z,{value:x,onChange:function(e){return j(null===e||void 0===e?void 0:e.target.value)},containerClassName:"proj-screen__input",title:"Nom de la Ma\xeetrise d\u2019ouvrage"}),(0,f.jsx)(v.Z,{value:w,onChange:function(e){return Z(null===e||void 0===e?void 0:e.target.value)},containerClassName:"proj-screen__input",title:"Adresse mail du Ma\xeetre d\u2019ouvrage",type:"email"})]}),(0,f.jsx)(Xn.Z,{onClick:function(){""!==a.trim()&&""!==h.trim()&&n({name:a,description:h,contractor:x,contractorEmail:w})},round:!0,btnClassName:"proj-continue-btn",icon:(0,f.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 5.067 8.137",style:{transform:"rotate(175deg)"},children:(0,f.jsx)("path",{id:"Fl\xe8che-chevron-s",d:"M3.438,2.488,1.2,4.775a.683.683,0,0,1-1,0,.782.782,0,0,1,0-1.055L3.6.2A.581.581,0,0,1,4.033,0h.262A.525.525,0,0,1,4.6.2L7.932,3.795a.782.782,0,0,1,0,1.055.683.683,0,0,1-1,0L4.889,2.639C4.306,2.245,4.053,2.132,3.438,2.488Z",transform:"translate(0 8.137) rotate(-90)",fill:"#fff",fillRule:"evenodd"})}),children:"Continuer"})]})};var nt=function(e){var n=e.onNext,t=e.onSave,o=e.entrance,l=e.exit,r=e.projectData,d=(0,i.useState)(""),a=(0,S.Z)(d,2),u=a[0],s=a[1],c=(0,i.useState)(""),h=(0,S.Z)(c,2),p=h[0],m=h[1],g=(0,i.useState)(""),x=(0,S.Z)(g,2),j=x[0],b=x[1],y=(0,i.useState)(""),w=(0,S.Z)(y,2),Z=w[0],k=w[1];return(0,i.useEffect)((function(){var e,n,t,i;s(null!==(e=null===r||void 0===r?void 0:r.workType)&&void 0!==e?e:""),m(null!==(n=null===r||void 0===r?void 0:r.marketType)&&void 0!==n?n:""),b(null!==(t=null===r||void 0===r?void 0:r.team)&&void 0!==t?t:""),k(null!==(i=null===r||void 0===r?void 0:r.teamRoleId)&&void 0!==i?i:"")}),[]),(0,f.jsxs)("div",{className:"proj-screen__container ".concat(o?"entrance":""," ").concat(l?"exit":""),children:[(0,f.jsx)("h3",{className:"proj-screen__title",children:"Dites nous en plus"}),(0,f.jsx)("h5",{className:"proj-screen__title",children:"sur votre projet"}),(0,f.jsx)(v.Z,{value:u,onChange:function(e){return s(null===e||void 0===e?void 0:e.target.value)},containerClassName:"proj-screen__input",title:"Typologie de l\u2019ouvrage"}),(0,f.jsx)(v.Z,{value:p,onChange:function(e){return m(null===e||void 0===e?void 0:e.target.value)},containerClassName:"proj-screen__input",title:"Type de march\xe9"}),(0,f.jsx)("h5",{className:"proj-screen__title",children:"sur vous"}),(0,f.jsx)(v.Z,{value:j,onChange:function(e){return b(null===e||void 0===e?void 0:e.target.value)},containerClassName:"proj-screen__input",title:"Dans quelle \xe9quipe intervenez-vous?"}),(0,f.jsx)(v.Z,{value:Z,onChange:function(e){return k(null===e||void 0===e?void 0:e.target.value)},containerClassName:"proj-screen__input",title:"Quel sera votre r\xf4le au sein de l\u2019\xe9quipe?"}),(0,f.jsx)(Xn.Z,{onClick:function(){n({workType:u,marketType:p,team:j,teamRoleId:Z}),t&&t({workType:u,marketType:p,team:j,teamRoleId:Z})},round:!0,btnClassName:"proj-continue-btn",icon:(0,f.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 5.067 8.137",style:{transform:"rotate(175deg)"},children:(0,f.jsx)("path",{id:"Fl\xe8che-chevron-s",d:"M3.438,2.488,1.2,4.775a.683.683,0,0,1-1,0,.782.782,0,0,1,0-1.055L3.6.2A.581.581,0,0,1,4.033,0h.262A.525.525,0,0,1,4.6.2L7.932,3.795a.782.782,0,0,1,0,1.055.683.683,0,0,1-1,0L4.889,2.639C4.306,2.245,4.053,2.132,3.438,2.488Z",transform:"translate(0 8.137) rotate(-90)",fill:"#fff",fillRule:"evenodd"})}),children:"Continuer"})]})},tt=t(3895),it=t(5791);var ot=[et,nt,function(e){var n=e.onNext,t=e.entrance,o=e.exit,l=e.roles,r=e.project,d=(0,i.useState)({}),a=(0,S.Z)(d,2),u=a[0],s=a[1],c=(0,i.useState)(""),h=(0,S.Z)(c,2),m=h[0],g=h[1],x=(0,i.useState)(""),b=(0,S.Z)(x,2),w=b[0],Z=b[1],k=(0,i.useState)(""),N=(0,S.Z)(k,2),C=N[0],I=N[1],E=function(e){var n;(null!==e&&void 0!==e&&e.key&&"enter"===(null===e||void 0===e||null===(n=e.key)||void 0===n?void 0:n.toLowerCase())||null===e||void 0===e||!e.key)&&y.sC.isEmail(m)&&(s((function(e){return(0,p.Z)((0,p.Z)({},e),{},(0,j.Z)({},m,{email:m,roleId:0,ms:Date.now()}))})),g(""),Z(""),I(""))},D=function(e){s((function(n){var t=(0,p.Z)({},n);return delete t[e],t}))},_=function(e,n){return e.ms&&n.ms?e.ms>n.ms?-1:1:-1},R=(0,i.useMemo)((function(){return Object.values(u).sort(_)}),[u]);return(0,f.jsxs)("div",{className:"proj-screen__container ".concat(t?"entrance":""," ").concat(o?"exit":""),children:[(0,f.jsx)("h3",{className:"proj-screen__title",children:"Inviter des participants"}),(0,f.jsx)("h5",{className:"proj-screen__title",children:"Cette \xe9tape vous permet d\u2019inviter des utilisateurs \xe0 rejoindre ce projet."}),(0,f.jsx)(v.Z,{onKeyDown:E,value:m,onChange:function(e){var n;g(null===e||void 0===e||null===(n=e.target)||void 0===n?void 0:n.value),w&&Z(""),C&&I("")},style:{with:"80%"},containerClassName:"proj-screen__input",title:"Saisir une adresse email",icon:(0,f.jsxs)("svg",{onClick:E,tabIndex:0,role:"button",className:"plus-svg-54",viewBox:"0 0 100 100",fill:"#F3BE3D",children:[(0,f.jsx)("circle",{cx:50,cy:50,r:50}),(0,f.jsx)("text",{textAnchor:"middle",x:50,y:75,fill:"#fff",fontSize:100,children:"+"})]})}),R.length>0?R.map((function(e){return(0,f.jsxs)("div",{style:{display:"flex",alignItems:"center"},children:[(0,f.jsx)(it.Z,{value:e.email,onDismiss:D}),(0,f.jsx)(Qn,{onChange:function(n){return t=n,i=e,void s((function(e){return(0,p.Z)((0,p.Z)({},e),{},(0,j.Z)({},i.email,{email:i.email,roleId:t.target.value,ms:i.ms}))}));var t,i},type:"radio",options:l?l.map((function(e){return{value:e.id,label:e.name,description:e.description}})):[]})]},e.email)})):null,w&&R.length>0?(0,f.jsx)("span",{style:{color:"#E33F1A"},children:w}):null,!w&&C?(0,f.jsx)("span",{style:{color:"#E33F1A"},children:C}):null,(0,f.jsx)(Xn.Z,{onClick:function(){""!==m&&I("".concat(y.sC.isEmail(m)?"Veuillez appuyer sur Entr\xe9e si vous souhaitez inviter "+m:"email ".concat(m," invalide")));try{Object.values(u).forEach((function(e){if(!e.roleId)throw Error("Veuillez s\xe9lectionner un r\xf4le pour chaque participant")})),null!==r&&void 0!==r&&r.id&&tt.Z.sendEmail(r.id,{invitations:Object.values(u)}),""===m&&n({})}catch(t){var e;Z(null!==(e=null===t||void 0===t?void 0:t.message)&&void 0!==e?e:"")}},round:!0,btnClassName:"proj-continue-btn",icon:(0,f.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 5.067 8.137",style:{transform:"rotate(175deg)"},children:(0,f.jsx)("path",{id:"Fl\xe8che-chevron-s",d:"M3.438,2.488,1.2,4.775a.683.683,0,0,1-1,0,.782.782,0,0,1,0-1.055L3.6.2A.581.581,0,0,1,4.033,0h.262A.525.525,0,0,1,4.6.2L7.932,3.795a.782.782,0,0,1,0,1.055.683.683,0,0,1-1,0L4.889,2.639C4.306,2.245,4.053,2.132,3.438,2.488Z",transform:"translate(0 8.137) rotate(-90)",fill:"#fff",fillRule:"evenodd"})}),children:R.length>0?"Inviter ces participants":"Continuer"})]})},function(e){var n=e.onNext,t=e.entrance,i=e.exit,o=e.onComplete,l="Ce projet est maintenant disponible!";return(0,f.jsxs)("div",{className:"proj-screen__container ".concat(t?"entrance":""," ").concat(i?"exit":""),children:[(0,f.jsx)("h3",{className:"proj-screen__title",children:l}),(0,f.jsx)("h5",{className:"proj-screen__title",children:"Gr\xe2ce \xe0 vous, l\u2019ensemble des acteurs va pouvoir rejoindre ce projet."}),(0,f.jsx)("img",{width:150,src:Ee,alt:l}),(0,f.jsx)(Xn.Z,{onClick:function(){n({}),"function"===typeof o&&o()},round:!0,btnClassName:"proj-continue-btn",icon:(0,f.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 5.067 8.137",style:{transform:"rotate(175deg)"},children:(0,f.jsx)("path",{id:"Fl\xe8che-chevron-s",d:"M3.438,2.488,1.2,4.775a.683.683,0,0,1-1,0,.782.782,0,0,1,0-1.055L3.6.2A.581.581,0,0,1,4.033,0h.262A.525.525,0,0,1,4.6.2L7.932,3.795a.782.782,0,0,1,0,1.055.683.683,0,0,1-1,0L4.889,2.639C4.306,2.245,4.053,2.132,3.438,2.488Z",transform:"translate(0 8.137) rotate(-90)",fill:"#fff",fillRule:"evenodd"})}),children:"Acc\xe9der au projet"})]})}],lt=t(9896);var rt=function(e){var n=e.onDismiss,t=e.onSubmit,l=e.project,r=(0,o.v9)((function(e){return e.kanbanMeta})).column,d=(0,i.useState)(0),a=(0,S.Z)(d,2),u=a[0],s=a[1],c=(0,i.useState)(!1),v=(0,S.Z)(c,2),h=v[0],m=v[1],g=(0,i.useState)(!1),x=(0,S.Z)(g,2),j=x[0],b=x[1],y=(0,i.useState)({}),w=(0,S.Z)(y,2),Z=w[0],k=w[1],N=(0,i.useState)(),C=(0,S.Z)(N,2),I=C[0],E=C[1],D=(0,o.I0)();(0,i.useEffect)((function(){Ve.Z.getRoleList().then((function(e){return E(e)}))}),[]);var _=(0,i.useMemo)((function(){return ot[u]}),[u]),R=function(){D((0,lt.xZ)("create_project")),D((0,ee.BR)("kanban")),n()};return(0,f.jsxs)("div",{style:{display:"flex",minWidth:"80%"},children:[(0,f.jsx)("div",{style:{flex:2},children:(0,f.jsx)(_,{onSave:function(e){return n=(0,p.Z)((0,p.Z)((0,p.Z)({},Z),e),{},{status:r}),t&&t(n),D((0,lt.xZ)("create_project")),void D((0,Q.Wo)());var n},onComplete:R,project:l,projectData:Z,roles:I,entrance:j,exit:h,onNext:function(e){k((function(n){return s((function(e){return b(!0),setTimeout((function(){return b(!1)}),300),e<ot.length-1?e+1:e})),(0,p.Z)((0,p.Z)({},n),e)}))}})}),(0,f.jsx)("div",{style:{flex:1,display:"flex",justifyContent:"flex-end",alignItems:"flex-start"},children:(0,f.jsxs)("button",{className:"proj-back__btn",onClick:function(){s((function(e){return e>0?(m(!0),setTimeout((function(){return m(!1)}),300),e-1):(R(),0)}))},children:["Retour",(0,f.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 5.067 8.137",children:(0,f.jsx)("path",{id:"Fl\xe8che",d:"M3.438,2.488,1.2,4.775a.683.683,0,0,1-1,0,.782.782,0,0,1,0-1.055L3.6.2A.581.581,0,0,1,4.033,0h.262A.525.525,0,0,1,4.6.2L7.932,3.795a.782.782,0,0,1,0,1.055.683.683,0,0,1-1,0L4.889,2.639C4.306,2.245,4.053,2.132,3.438,2.488Z",transform:"translate(0 8.137) rotate(-90)",fill:"#fff",fillRule:"evenodd"})})]})})]})},dt=function(e){var n,t=(0,i.useState)(!1),l=(0,S.Z)(t,2),r=l[0],a=l[1],u=(0,i.useState)(""),s=(0,S.Z)(u,2),c=s[0],v=s[1],h=(0,i.useState)([]),m=(0,S.Z)(h,2),g=m[0],x=m[1],j=(0,i.useState)(),b=(0,S.Z)(j,2),w=b[0],Z=b[1],k=(0,i.useState)(),N=(0,S.Z)(k,2),C=N[0],I=N[1],D=(0,i.useState)(),_=(0,S.Z)(D,2),R=_[0],A=_[1],T=(0,i.useState)(),L=(0,S.Z)(T,2),B=L[0],F=L[1],V=(0,i.useState)(),P=(0,S.Z)(V,2),M=P[0],z=P[1],O=(0,i.useRef)(),q=(0,i.useRef)(),H=(0,i.useRef)(),W=(0,i.useRef)(),U=(0,i.useRef)();U.current=w;var G=(0,i.useRef)();G.current=C;var Y=(0,i.useRef)();Y.current=R,(0,i.useRef)().current=B;var $=(0,o.I0)(),K=(0,o.v9)((function(e){return e.mapMeta})),J=(0,o.v9)((function(e){return e.resizer.right_col})),X=function(){var n=(0,Te.Z)(Be().mark((function n(t){var i,o,l,r;return Be().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,$(Pe((0,p.Z)((0,p.Z)({},t),{},{longitude:g[0],latitude:g[1]}))).unwrap();case 2:l=n.sent,r=(0,p.Z)((0,p.Z)({},null!==(i=null===l||void 0===l?void 0:l.project)&&void 0!==i?i:{}),{},{tree:null===l||void 0===l||null===(o=l.knowledgeBase)||void 0===o?void 0:o.tree,creator:e.user}),$((0,d.B)(r)),z(r);case 6:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}(),Q=function(){a(!1),$((0,lt.xZ)("create_project"))},ee=function(n){var t,i=n.coordinate,o=n.pixel,l=null===(t=U.current)||void 0===t?void 0:t.forEachFeatureAtPixel(o,(function(e){return e}));if(l)return $((0,Me.fR)({is_active:!0,name:l.get("name")})),$((0,E.AV)(l.get("id"))),void a(!1);var r,d=(0,Pn.bU)(i);x(d);var u=(0,Vn.V7)(d);d.length>1&&(e.onPin&&(e.onPin({longitude:d[0],latitude:d[1]}),a(!0)),$((0,lt.Z5)({longitude:d[0],latitude:d[1],description:u}))),v(u),a(!0),q.current.style.display="block",null===(r=G.current)||void 0===r||r.setPosition(i),te()},ne=function(e){var n,t=e.coordinate,i=e.pixel;U.current.getTarget().style.cursor="";var o,l=null===(n=U.current)||void 0===n?void 0:n.forEachFeatureAtPixel(i,(function(e){return e}));if(l&&(te(),U.current.getTarget().style.cursor="pointer",null===(o=Y.current)||void 0===o||o.setPosition(t),H.current)){H.current.style="display: flex; flex-direction: column; position: relative; z-index: 20;";var r=l.get("name"),d=l.get("description");H.current.innerHTML="\n                    ".concat(r?"<h5>".concat(r,"</h5>"):"","\n                    ").concat(d?"<p>".concat(d,"</p>"):"","\n                ")}},te=function(){H.current&&(H.current.style="display: none;",H.current.innerHTML="")};return(0,i.useEffect)((function(){var e;J.top_row.height&&(null===(e=U.current)||void 0===e||e.updateSize())}),[J]),(0,i.useEffect)((function(){var e=new Bn.Z({element:null===q||void 0===q?void 0:q.current,autoPan:{animation:{duration:250}}}),n=new Bn.Z({element:null===H||void 0===H?void 0:H.current,positioning:"bottom-center",stopEvent:!1}),t=new Rn.Z,i=new En.Z({target:null===O||void 0===O?void 0:O.current,overlays:[e,n],layers:[new Dn.Z({source:new An.Z({url:"https://{a-c}.tile.openstreetmap.org/{z}/{x}/{y}.png",projection:"EPSG:3857"})}),new Hn.Z({source:t})],controls:(0,Tn.ce)().extend([new Ln.Z]),view:new _n.ZP({projection:"EPSG:3857",center:[3,6e6],zoom:5})}),o=new Jn.Z({source:t});i.addInteraction(o),Z(i),I(e),A(n),F(t),i.on("click",ee),i.on("pointermove",ne),i.on("movestart",te)}),[]),(0,i.useEffect)((function(){var n;if(w&&B&&W.current&&e.pins&&(null===(n=e.pins)||void 0===n?void 0:n.length)>0){var t,i={r:237,g:110,b:64},o=(0,y.$h)(qn,i);null===(t=e.pins)||void 0===t||t.forEach((function(n,t){var l,r,d,a,u=new Fn.Z((0,p.Z)({geometry:new Wn.Z((0,Pn.mi)([n.longitude,n.latitude]))},n)),s=new Un.ZP({image:new Gn.Z({anchor:[.5,0],anchorOrigin:"bottom-right",scale:.5,src:On.orange}),text:new Yn.Z({font:"10px Calibri,sans-serif",fill:new $n.Z({color:"rgb(".concat(i.r,",").concat(i.g,",").concat(i.b,")")}),stroke:new Kn.Z({color:"#fff",width:2}),text:null!==(l=null===(r=(null!==(d=null===(a=e.pins)||void 0===a?void 0:a.length)&&void 0!==d?d:0)-t)||void 0===r?void 0:r.toString())&&void 0!==l?l:"",offsetY:-o.height/3})});u.setStyle(s),null===B||void 0===B||B.addFeature(u)})),q.current.style.display="none"}}),[e.pins,w]),(0,f.jsxs)(f.Fragment,{children:[(0,f.jsxs)("div",{ref:O,className:"map",id:"map",children:[(0,f.jsx)("div",{onClick:function(e){null===e||void 0===e||e.stopPropagation()},ref:H,className:"ol-tool-tip"}),(0,f.jsx)("img",{ref:q,src:On.blue,className:"project-pointer"})]}),(0,f.jsx)("img",{ref:W,src:qn,style:{display:"none"}}),r&&!(null===(n=K.activities)||void 0===n||!n.create_project)&&(0,f.jsxs)(Ue.Z,{show:r,el:"#map",container:".background-layout",onDismiss:Q,children:[(0,f.jsx)("code",{children:c}),(0,f.jsx)(rt,{project:M,onSubmit:X,onDismiss:Q})]})]})},at={model_3d:sn,map:dt,kanban:In,gantt:mn},ut=t(322),st=t(61),ct=["fill","background","style"],vt=function(e){e.fill;var n=e.background,t=e.style,i=(0,D.Z)(e,ct);return(0,f.jsx)("svg",(0,p.Z)((0,p.Z)({},i),{},{tabIndex:0,role:"button",style:(0,p.Z)((0,p.Z)({},{height:"1.5em",width:"1.5em",transform:"scale(0.75)",cursor:"pointer",border:"none",outline:"none"}),null!==t&&void 0!==t?t:{}),viewBox:"0 0 22 22",fill:null!==n&&void 0!==n?n:"#F3BE3D",children:(0,f.jsxs)("g",{transform:"matrix(.58303 0 0 .58303 2.73 2.728)",fill:"#4d4d4d",children:[(0,f.jsx)("path",{d:"m28.36 19.595c0-.868-.665-1.57-1.491-1.57-.819.002-1.492.702-1.492 1.57v3.25l-6.02-6.02c-.582-.583-1.524-.583-2.106 0-.582.582-.582 1.527 0 2.109l5.989 5.987h-3.235c-.881.002-1.591.669-1.591 1.491 0 .824.71 1.49 1.591 1.49h6.761c.881 0 1.59-.665 1.593-1.49-.003-.022-.006-.039-.009-.061.003-.028.009-.058.009-.087v-6.668h-.0001"}),(0,f.jsx)("path",{d:"m9 16.824l-6.01 6.02v-3.25c0-.868-.672-1.568-1.493-1.57-.824 0-1.49.702-1.49 1.57l-.002 6.669c0 .029.008.059.001.087-.002.021-.006.038-.008.061.002.825.712 1.49 1.592 1.49h6.762c.879 0 1.59-.666 1.59-1.49 0-.822-.711-1.489-1.59-1.491h-3.235l5.989-5.987c.58-.582.58-1.527 0-2.109-.583-.584-1.526-.584-2.11-.0001"}),(0,f.jsx)("path",{d:"m19.359 11.535l6.02-6.02v3.25c0 .865.673 1.565 1.492 1.568.826 0 1.491-.703 1.491-1.568v-6.671c0-.029-.006-.059-.009-.085.003-.021.006-.041.009-.062-.003-.826-.712-1.491-1.592-1.491h-6.761c-.881 0-1.591.665-1.591 1.491 0 .821.71 1.49 1.591 1.492h3.235l-5.989 5.987c-.582.581-.582 1.524 0 2.105.582.586 1.524.586 2.106.0001"}),(0,f.jsx)("path",{d:"m5.121 3.442h3.234c.879-.002 1.59-.671 1.59-1.492 0-.826-.711-1.491-1.59-1.491h-6.761c-.88 0-1.59.665-1.592 1.491.002.021.006.041.008.062-.002.026-.001.055-.001.085l.002 6.672c0 .865.666 1.568 1.49 1.568.821-.003 1.493-.703 1.493-1.568v-3.25l6.01 6.02c.584.585 1.527.585 2.11 0 .58-.581.58-1.524 0-2.105l-5.989-5.988"})]})}))},ft=function(){var e,n,t,l,r,a=(0,I.$)().t,u=(0,o.v9)((function(e){return e.representation})).component,s=(0,o.v9)((function(e){return e.treeNode.activeNode})),c=(0,o.v9)((function(e){return e.treeNode.project})),v=(0,o.v9)((function(e){return e.projects.payload})),p=(0,o.v9)((function(e){return e.mapMeta})),m=(0,o.v9)((function(e){return e.user})),g=(0,o.v9)((function(e){return e.fullScreen})),x=(0,o.I0)();(0,i.useEffect)((function(){(0,st.J5)("map");var e=(0,o.gi)(".Pane1","attributes",(function(e){var n=e.target,t=n.clientHeight,i=n.clientWidth,o=n.clientLeft,l=n.clientTop;x((0,st.gv)({height:t,width:i,x:o,y:l}))}));return function(){(0,st.a2)(),e()}}),[]);var j=(0,i.useState)(!1),y=(0,S.Z)(j,2),w=y[0],Z=y[1],k=function(e){!function(e,n){n((0,ee.BR)(e))}(e,x)},N=(0,i.useMemo)((function(){var e;return null!==(e=at[u])&&void 0!==e?e:dt}),[u]);return(0,f.jsxs)("div",{style:{position:"relative"},className:"project",children:[(0,f.jsx)(h,{title:"Contextualiser (".concat(null!==s&&void 0!==s&&null!==(e=s.data)&&void 0!==e&&e.name?null===s||void 0===s||null===(n=s.data)||void 0===n?void 0:n.name:"Mes projets",")"),search:(0,f.jsx)(We,{options:Object.entries(ee.cy).filter((function(e){return(0,S.Z)(e,2)[1]})).map((function(e){var n=(0,S.Z)(e,1)[0];return{id:n,label:n}})),onChange:function(e){return k(e)},selected:u,activeNode:null===s||void 0===s?void 0:s.data})}),(0,f.jsx)("div",{style:{position:"relative",height:"100%"},children:(0,f.jsxs)(ut.Z,{split:"horizontal",defaultSize:350,maxSize:500,resizerClassName:"resizer-handle",children:[(0,f.jsx)("div",{className:"presentation-container",id:"representation-container-10x",children:(0,f.jsx)(N,{activeNode:null===s||void 0===s?void 0:s.data,projectId:null===c||void 0===c?void 0:c.id,nodeName:null===c||void 0===c?void 0:c.name,nodeId:null===s||void 0===s||null===(t=s.data)||void 0===t||null===(l=t.attributes)||void 0===l||null===(r=l.id)||void 0===r?void 0:r.toString(),pins:v,projects:v,onUpdateNode:function(e){!function(e,n){var t=e.id,i=e.node;n((0,d.ty)({id:t,node:i}))}(e,x)},onUpdateCell:function(e){!function(e,n){var t=e.id,i=e.node;n((0,b.TA)("auto_select_node_by_type")),n((0,E.sU)({id:t,node:i}))}(e,x)},onAddNewNode:function(e){!function(e,n){var t,i,o,l,r,d=e.id,a=e.node;n((0,E.VR)({id:d,node:{description:null===a||void 0===a||null===(t=a.attributes)||void 0===t?void 0:t.description,name:null===a||void 0===a?void 0:a.name,nodeType:null!==(i=null===a||void 0===a||null===(o=a.attributes)||void 0===o?void 0:o.nodeType)&&void 0!==i?i:"libre",parentNodeId:null===a||void 0===a?void 0:a.parentNodeId,data:null===a||void 0===a?void 0:a.data,status:null!==(l=null===a||void 0===a||null===(r=a.attributes)||void 0===r?void 0:r.status)&&void 0!==l?l:"todo"}}))}(e,x)},selectedProjectId:null===c||void 0===c?void 0:c.id,activeProject:c,user:m})}),(0,f.jsxs)("div",{style:{height:"100%",overflow:"auto"},children:[(0,f.jsxs)("div",{className:"resizer-handle-bar top",children:[(0,f.jsxs)("div",{className:"resizer-handle-bar-line",children:[(0,f.jsx)("span",{}),(0,f.jsx)("span",{}),(0,f.jsx)("span",{}),(0,f.jsx)("span",{})]}),(0,f.jsxs)("button",{onClick:function(){return x((0,C.EV)({target:"data-table"}))},className:"full-screen-handle",children:[a("fullscreen"),(0,f.jsx)(vt,{})]})]}),"data-table"!==g.target?s?(0,f.jsx)(X,{}):(0,f.jsx)(ae,{onNewRowClick:function(){!function(e,n){e(!0),n((0,lt.xZ)("create_project")),n((0,ee.BR)("map"))}(Z,x)}}):null,w?(0,f.jsxs)(Ue.Z,{show:w,el:"#project-data-table-10x",container:"#project-data-table-10x",onDismiss:function(){Z(!1)},children:[(0,f.jsx)("code",{children:p.selection.description}),(0,f.jsx)("blockquote",{children:a("use-map-to-select-location")})]}):null]})]})})]})},ht=function(){var e,n=(0,o.v9)((function(e){return e.projectNodeTypes})),t=(0,o.v9)((function(e){return e.treeNode.project})),u=(0,o.v9)((function(e){return e.pages.selected_tab})),s=(0,o.I0)();return(0,i.useEffect)((function(){s((0,a.w)()),s((0,d.mW)()),s((0,r.y)(0)),s((0,l.N)(0))}),[]),console.count("dashboard"),(0,f.jsxs)(f.Fragment,{children:["Invitation"===u&&(0,f.jsx)(He,{project:null===t||void 0===t?void 0:t.id}),(0,f.jsxs)("div",{className:"dashboard-layout",children:[(0,f.jsxs)("div",{className:"explorer",children:[(0,f.jsx)(h,{title:"Explorer",search:(0,f.jsx)(w,{})}),(0,f.jsx)(x,{favs:null!==(e=n.payload)&&void 0!==e?e:[]}),(0,f.jsx)("div",{className:"canvas-explorer",children:(0,f.jsx)(Oe,{})})]}),(0,f.jsx)(ft,{}),(0,f.jsx)(ue,{})]})]})}},5791:function(e,n,t){var i=t(184);n.Z=function(e){var n=e.value,t=e.onDismiss,o=e.background;return(0,i.jsxs)("div",{title:n,style:{margin:3,borderRadius:10,display:"flex",justifyContent:"space-around",alignItems:"center",background:null!==o&&void 0!==o?o:"#eee",color:"#303643"},children:[(0,i.jsx)("div",{style:{flex:2,margin:"5px 10px",maxWidth:150,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:n}),(0,i.jsx)("button",{style:{border:"none",outline:"none",width:25,height:25,borderRadius:"50%",background:"#303643",color:"#eee",display:"flex",alignItems:"center",justifyContent:"center",margin:"0 5px"},onClick:function(){return t(n)},children:(0,i.jsx)("span",{style:{transform:"translateY(-10%)"},children:"x"})})]})}},5530:function(e,n,t){var i=t(1413),o=t(5987),l=t(184),r=["fill","background","style"];n.Z=function(e){var n=e.fill,t=e.background,d=e.style,a=(0,o.Z)(e,r);return(0,l.jsxs)("svg",(0,i.Z)((0,i.Z)({},a),{},{tabIndex:0,role:"button",style:(0,i.Z)((0,i.Z)({},{height:"1.5em",width:"1.5em",transform:"translateX(-15%)",cursor:"pointer",border:"none",outline:"none"}),null!==d&&void 0!==d?d:{}),viewBox:"0 0 100 100",fill:null!==t&&void 0!==t?t:"#F3BE3D",children:[(0,l.jsx)("circle",{cx:50,cy:50,r:50}),(0,l.jsx)("text",{textAnchor:"middle",x:50,y:75,fill:null!==n&&void 0!==n?n:"#fff",fontSize:100,children:"+"})]}))}},6618:function(e,n,t){t.d(n,{Z:function(){return u}});var i=t(1413),o=t(5987),l=t(2791),r=t(4483),d=t(184),a=["type","title","iconName","doThings","hasError","errorMsg","createForm","id","light","containerClassName","icon","iconPlacement","required"],u=(0,l.forwardRef)((function(e,n){var t=e.type,l=e.title,u=e.iconName,s=e.doThings,c=e.hasError,v=e.errorMsg,f=e.createForm,h=e.id,p=e.light,m=e.containerClassName,g=e.icon,x=e.iconPlacement,j=e.required,b=(0,o.Z)(e,a);return(0,d.jsxs)(d.Fragment,{children:[(0,d.jsxs)("div",{style:{position:"relative"},className:"sign_input-container ".concat("card-header"===t?"card-h":""," ").concat(null!==m&&void 0!==m?m:""),children:[j&&(0,d.jsx)("span",{className:"required",children:"*"}),function(){var e=s?{onChange:function(e){s(e.target.value),f&&f(e)}}:{},o=(0,i.Z)((0,i.Z)({},b),{},{ref:n});switch(t){case"phone":return(0,d.jsx)("input",(0,i.Z)((0,i.Z)((0,i.Z)({type:"tel",id:h,required:null===j||void 0===j||j},e),o),{},{ref:n}));case"submit":case"button":var a=s?{onClick:function(){return s()}}:{};return(0,d.jsxs)("button",(0,i.Z)((0,i.Z)((0,i.Z)({type:t,className:p?"submit light":"submit"},a),o),{},{children:[l,u?(0,d.jsx)("div",{style:{display:"flex",justifyContent:"flex-end",flex:1},children:(0,d.jsx)(r.G,{icon:u,className:p?"icon light":"icon"})}):null]}));case"card-header":return(0,d.jsx)("input",(0,i.Z)({id:h,type:"text",required:!0},o));default:return(0,d.jsx)("input",(0,i.Z)((0,i.Z)({type:t,id:h,required:null===j||void 0===j||j},e),o))}}(),g?(0,d.jsx)("div",{style:(0,i.Z)((0,i.Z)({},{display:"flex",justifyContent:"flex-end",flex:1,position:"absolute",zIndex:99}),"left"===x?{left:0}:{right:0}),children:g}):null,"submit"!==t&&"button"!==t?(0,d.jsx)("span",{children:l}):null]}),c&&(0,d.jsx)("p",{className:"errorMsg",children:v})]})}))}}]);
//# sourceMappingURL=129.9b547f08.chunk.js.map