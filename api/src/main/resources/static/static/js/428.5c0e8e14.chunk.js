"use strict";(self.webpackChunkstartbuilding=self.webpackChunkstartbuilding||[]).push([[428],{6549:function(e,n,t){t(2791);n.Z=t.p+"static/media/apple.7f266128e9ea9928775383a0a3930d6e.svg"},8006:function(e,n,t){t(2791);n.Z=t.p+"static/media/google.b58ffc002585a28021a00030f4b2a965.svg"},4947:function(e,n,t){t(2791);n.Z=t.p+"static/media/linkedin.7ec10e715d53d7e7f09b2649e06a1294.svg"},5960:function(e,n,t){t.r(n),t.d(n,{default:function(){return Qe}});var i=t(3433),o=t(5861),l=t(4942),r=t(1413),a=t(9439),d=t(7757),s=t.n(d),u=t(2791),c=t(9421),v=t(5405),p=(t(4847),t(5936)),f=t(7707),h=t(430),m=t(2532),x=t(8976),j=t(6588),g=t(7726),b=t(1358),y=t(2652),Z=t(8153),N=t(5397);var w=t.p+"static/media/orange.08ed0737daabcf34240f2a28402d80e9.svg";var C=t.p+"static/media/blue.18e2e570f303f3c69fadb17f6507ed87.svg";var k={orange:w,blue:C,yellow:t.p+"static/media/yellow.95f3abb3465d6d410ba85571b2c9482f.svg"};var S=t.p+"static/media/drawable.e28d4a0198e43cb720feecf652f5a7ed.svg",E=t(8258),A=t(4431),_=(0,E.hg)("createProject",function(){var e=(0,o.Z)(s().mark((function e(n,t){var i;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,A.Z.createProject(n);case 2:return i=e.sent,e.abrupt("return",null===i||void 0===i?void 0:i.content);case 4:case"end":return e.stop()}}),e)})));return function(n,t){return e.apply(this,arguments)}}()),R=((0,E.oM)({name:"authSlice",initialState:{isLoading:!1,payload:{code:"",content:{description:"",latitude:0,longitude:0,name:""},errors:[],warnings:[]}},reducers:{},extraReducers:function(e){e.addCase(_.pending,(function(e){e.isLoading=!0})),e.addCase(_.fulfilled,(function(e,n){return{payload:n.payload,isLoading:!1}})),e.addCase(_.rejected,(function(e,n){e.isLoading=!1}))}}),t(2183)),L=t(7447),T=t(9409),I=t(8676),P=t(6252),F=t(9236),D=t(927),z=t(6233),B=t(7867),M=t(5850),O=t(6739),q=t(6089),V=(t(4929),t(184));var H=function(e){var n=e.options,t=e.name,i=e.title,o=(e.checked,e.type),l=void 0===o?"checkbox":o,a=e.onChange,d=null!==t&&void 0!==t?t:(Math.random()*Date.now()).toString(),s=function(e,t){var i=(0,r.Z)((0,r.Z)({},t),{},{checked:e.target.checked});"function"===typeof a&&a({target:i,selection:n.map((function(e){var n,t;return(null===(n=i.value)||void 0===n?void 0:n.toString())===(null===(t=e.value)||void 0===t?void 0:t.toString())?i:"radio"===l?(0,r.Z)((0,r.Z)({},e),{},{checked:!1}):e}))})};return n.length>0?(0,V.jsxs)("fieldset",{className:"inline-select-fieldset",children:[i?(0,V.jsx)("legend",{children:i}):null,(0,V.jsx)("div",{className:"options-container",children:n.map((function(e){return(0,V.jsxs)("label",{title:e.description,children:[(0,V.jsx)("input",{onChange:function(n){return s(n,e)},name:d,type:l,defaultChecked:e.checked}),e.label]},e.value)}))})]}):null},W=t(6618);var G=function(e){var n=e.onNext,t=e.entrance,i=e.exit,o=e.projectData,l=(0,u.useState)(""),r=(0,a.Z)(l,2),d=r[0],s=r[1],c=(0,u.useState)(""),v=(0,a.Z)(c,2),p=v[0],f=v[1],h=(0,u.useState)(""),m=(0,a.Z)(h,2),x=m[0],j=m[1],g=(0,u.useState)(""),b=(0,a.Z)(g,2),y=b[0],Z=b[1],N=(0,u.useState)(!0),w=(0,a.Z)(N,2),C=w[0],k=w[1];return(0,u.useEffect)((function(){var e,n,t,i;s(null!==(e=null===o||void 0===o?void 0:o.name)&&void 0!==e?e:""),f(null!==(n=null===o||void 0===o?void 0:o.description)&&void 0!==n?n:""),j(null!==(t=null===o||void 0===o?void 0:o.contractor)&&void 0!==t?t:""),Z(null!==(i=null===o||void 0===o?void 0:o.contractorEmail)&&void 0!==i?i:"")}),[]),(0,V.jsxs)("div",{className:"proj-screen__container ".concat(t?"entrance":""," ").concat(i?"exit":""),children:[(0,V.jsx)("h3",{className:"proj-screen__title",children:"Parlez nous de votre projet"}),(0,V.jsx)(W.Z,{required:!0,value:d,onChange:function(e){return s(null===e||void 0===e?void 0:e.target.value)},containerClassName:"proj-screen__input",title:"Nom du projet"}),(0,V.jsx)(W.Z,{required:!0,value:p,onChange:function(e){return f(null===e||void 0===e?void 0:e.target.value)},containerClassName:"proj-screen__input",title:"D\xe9crivez le en une phrase"}),(0,V.jsx)(H,{options:[{label:"Oui",value:1,checked:!0},{label:"Non",value:0}],title:"Serez vous le ma\xeetre d\u2019ouvrage du projet?",type:"radio",checked:0,onChange:function(e){return k(1===e.target.value)}}),C?null:(0,V.jsxs)(V.Fragment,{children:[(0,V.jsx)(W.Z,{value:x,onChange:function(e){return j(null===e||void 0===e?void 0:e.target.value)},containerClassName:"proj-screen__input",title:"Nom de la Ma\xeetrise d\u2019ouvrage"}),(0,V.jsx)(W.Z,{value:y,onChange:function(e){return Z(null===e||void 0===e?void 0:e.target.value)},containerClassName:"proj-screen__input",title:"Adresse mail du Ma\xeetre d\u2019ouvrage",type:"email"})]}),(0,V.jsx)(q.Z,{onClick:function(){""!==d.trim()&&""!==p.trim()&&n({name:d,description:p,contractor:x,contractorEmail:y})},round:!0,btnClassName:"proj-continue-btn",icon:(0,V.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 5.067 8.137",style:{transform:"rotate(175deg)"},children:(0,V.jsx)("path",{id:"Fl\xe8che-chevron-s",d:"M3.438,2.488,1.2,4.775a.683.683,0,0,1-1,0,.782.782,0,0,1,0-1.055L3.6.2A.581.581,0,0,1,4.033,0h.262A.525.525,0,0,1,4.6.2L7.932,3.795a.782.782,0,0,1,0,1.055.683.683,0,0,1-1,0L4.889,2.639C4.306,2.245,4.053,2.132,3.438,2.488Z",transform:"translate(0 8.137) rotate(-90)",fill:"#fff",fillRule:"evenodd"})}),children:"Continuer"})]})};var K=function(e){var n=e.onNext,t=e.onSave,i=e.entrance,o=e.exit,l=e.projectData,r=(0,u.useState)(""),d=(0,a.Z)(r,2),s=d[0],c=d[1],v=(0,u.useState)(""),p=(0,a.Z)(v,2),f=p[0],h=p[1],m=(0,u.useState)(""),x=(0,a.Z)(m,2),j=x[0],g=x[1],b=(0,u.useState)(""),y=(0,a.Z)(b,2),Z=y[0],N=y[1];return(0,u.useEffect)((function(){var e,n,t,i;c(null!==(e=null===l||void 0===l?void 0:l.workType)&&void 0!==e?e:""),h(null!==(n=null===l||void 0===l?void 0:l.marketType)&&void 0!==n?n:""),g(null!==(t=null===l||void 0===l?void 0:l.team)&&void 0!==t?t:""),N(null!==(i=null===l||void 0===l?void 0:l.teamRoleId)&&void 0!==i?i:"")}),[]),(0,V.jsxs)("div",{className:"proj-screen__container ".concat(i?"entrance":""," ").concat(o?"exit":""),children:[(0,V.jsx)("h3",{className:"proj-screen__title",children:"Dites nous en plus"}),(0,V.jsx)("h5",{className:"proj-screen__title",children:"sur votre projet"}),(0,V.jsx)(W.Z,{value:s,onChange:function(e){return c(null===e||void 0===e?void 0:e.target.value)},containerClassName:"proj-screen__input",title:"Typologie de l\u2019ouvrage"}),(0,V.jsx)(W.Z,{value:f,onChange:function(e){return h(null===e||void 0===e?void 0:e.target.value)},containerClassName:"proj-screen__input",title:"Type de march\xe9"}),(0,V.jsx)("h5",{className:"proj-screen__title",children:"sur vous"}),(0,V.jsx)(W.Z,{value:j,onChange:function(e){return g(null===e||void 0===e?void 0:e.target.value)},containerClassName:"proj-screen__input",title:"Dans quelle \xe9quipe intervenez-vous?"}),(0,V.jsx)(W.Z,{value:Z,onChange:function(e){return N(null===e||void 0===e?void 0:e.target.value)},containerClassName:"proj-screen__input",title:"Quel sera votre r\xf4le au sein de l\u2019\xe9quipe?"}),(0,V.jsx)(q.Z,{onClick:function(){n({workType:s,marketType:f,team:j,teamRoleId:Z}),t&&t({workType:s,marketType:f,team:j,teamRoleId:Z})},round:!0,btnClassName:"proj-continue-btn",icon:(0,V.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 5.067 8.137",style:{transform:"rotate(175deg)"},children:(0,V.jsx)("path",{id:"Fl\xe8che-chevron-s",d:"M3.438,2.488,1.2,4.775a.683.683,0,0,1-1,0,.782.782,0,0,1,0-1.055L3.6.2A.581.581,0,0,1,4.033,0h.262A.525.525,0,0,1,4.6.2L7.932,3.795a.782.782,0,0,1,0,1.055.683.683,0,0,1-1,0L4.889,2.639C4.306,2.245,4.053,2.132,3.438,2.488Z",transform:"translate(0 8.137) rotate(-90)",fill:"#fff",fillRule:"evenodd"})}),children:"Continuer"})]})},Y=t(3895),$=t(5791);var U=function(e){var n=e.onNext,t=e.entrance,i=e.exit,o=e.roles,d=e.project,s=(0,u.useState)({}),c=(0,a.Z)(s,2),v=c[0],p=c[1],f=(0,u.useState)(""),h=(0,a.Z)(f,2),m=h[0],x=h[1],j=(0,u.useState)(""),g=(0,a.Z)(j,2),b=g[0],y=g[1],Z=(0,u.useState)(""),N=(0,a.Z)(Z,2),w=N[0],C=N[1],k=function(e){var n;(null!==e&&void 0!==e&&e.key&&"enter"===(null===e||void 0===e||null===(n=e.key)||void 0===n?void 0:n.toLowerCase())||null===e||void 0===e||!e.key)&&M.sC.isEmail(m)&&(p((function(e){return(0,r.Z)((0,r.Z)({},e),{},(0,l.Z)({},m,{email:m,roleId:0,ms:Date.now()}))})),x(""),y(""),C(""))},S=function(e){p((function(n){var t=(0,r.Z)({},n);return delete t[e],t}))},E=function(e,n){return e.ms&&n.ms?e.ms>n.ms?-1:1:-1},A=(0,u.useMemo)((function(){return Object.values(v).sort(E)}),[v]);return(0,V.jsxs)("div",{className:"proj-screen__container ".concat(t?"entrance":""," ").concat(i?"exit":""),children:[(0,V.jsx)("h3",{className:"proj-screen__title",children:"Inviter des participants"}),(0,V.jsx)("h5",{className:"proj-screen__title",children:"Cette \xe9tape vous permet d\u2019inviter des utilisateurs \xe0 rejoindre ce projet."}),(0,V.jsx)(W.Z,{onKeyDown:k,value:m,onChange:function(e){var n;x(null===e||void 0===e||null===(n=e.target)||void 0===n?void 0:n.value),b&&y(""),w&&C("")},style:{with:"80%"},containerClassName:"proj-screen__input",title:"Saisir une adresse email",icon:(0,V.jsxs)("svg",{onClick:k,tabIndex:0,role:"button",className:"plus-svg-54",viewBox:"0 0 100 100",fill:"#F3BE3D",children:[(0,V.jsx)("circle",{cx:50,cy:50,r:50}),(0,V.jsx)("text",{textAnchor:"middle",x:50,y:75,fill:"#fff",fontSize:100,children:"+"})]})}),A.length>0?A.map((function(e){return(0,V.jsxs)("div",{style:{display:"flex",alignItems:"center"},children:[(0,V.jsx)($.Z,{value:e.email,onDismiss:S}),(0,V.jsx)(H,{onChange:function(n){return t=n,i=e,void p((function(e){return(0,r.Z)((0,r.Z)({},e),{},(0,l.Z)({},i.email,{email:i.email,roleId:t.target.value,ms:i.ms}))}));var t,i},type:"radio",options:o?o.map((function(e){return{value:e.id,label:e.name,description:e.description}})):[]})]},e.email)})):null,b&&A.length>0?(0,V.jsx)("span",{style:{color:"#E33F1A"},children:b}):null,!b&&w?(0,V.jsx)("span",{style:{color:"#E33F1A"},children:w}):null,(0,V.jsx)(q.Z,{onClick:function(){""!==m&&C("".concat(M.sC.isEmail(m)?"Veuillez appuyer sur Entr\xe9e si vous souhaitez inviter "+m:"email ".concat(m," invalide")));try{Object.values(v).forEach((function(e){if(!e.roleId)throw Error("Veuillez s\xe9lectionner un r\xf4le pour chaque participant")})),null!==d&&void 0!==d&&d.id&&Y.Z.sendEmail(d.id,{invitations:Object.values(v)}),""===m&&n({})}catch(t){var e;y(null!==(e=null===t||void 0===t?void 0:t.message)&&void 0!==e?e:"")}},round:!0,btnClassName:"proj-continue-btn",icon:(0,V.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 5.067 8.137",style:{transform:"rotate(175deg)"},children:(0,V.jsx)("path",{id:"Fl\xe8che-chevron-s",d:"M3.438,2.488,1.2,4.775a.683.683,0,0,1-1,0,.782.782,0,0,1,0-1.055L3.6.2A.581.581,0,0,1,4.033,0h.262A.525.525,0,0,1,4.6.2L7.932,3.795a.782.782,0,0,1,0,1.055.683.683,0,0,1-1,0L4.889,2.639C4.306,2.245,4.053,2.132,3.438,2.488Z",transform:"translate(0 8.137) rotate(-90)",fill:"#fff",fillRule:"evenodd"})}),children:A.length>0?"Inviter ces participants":"Continuer"})]})};var Q=t.p+"static/media/clap.e11804d8958e6b79668b05285348dc58.svg";var J=[G,K,U,function(e){var n=e.onNext,t=e.entrance,i=e.exit,o=e.onComplete,l="Ce projet est maintenant disponible!";return(0,V.jsxs)("div",{className:"proj-screen__container ".concat(t?"entrance":""," ").concat(i?"exit":""),children:[(0,V.jsx)("h3",{className:"proj-screen__title",children:l}),(0,V.jsx)("h5",{className:"proj-screen__title",children:"Gr\xe2ce \xe0 vous, l\u2019ensemble des acteurs va pouvoir rejoindre ce projet."}),(0,V.jsx)("img",{width:150,src:Q,alt:l}),(0,V.jsx)(q.Z,{onClick:function(){n({}),"function"===typeof o&&o()},round:!0,btnClassName:"proj-continue-btn",icon:(0,V.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 5.067 8.137",style:{transform:"rotate(175deg)"},children:(0,V.jsx)("path",{id:"Fl\xe8che-chevron-s",d:"M3.438,2.488,1.2,4.775a.683.683,0,0,1-1,0,.782.782,0,0,1,0-1.055L3.6.2A.581.581,0,0,1,4.033,0h.262A.525.525,0,0,1,4.6.2L7.932,3.795a.782.782,0,0,1,0,1.055.683.683,0,0,1-1,0L4.889,2.639C4.306,2.245,4.053,2.132,3.438,2.488Z",transform:"translate(0 8.137) rotate(-90)",fill:"#fff",fillRule:"evenodd"})}),children:"Acc\xe9der au projet"})]})}];var X=function(e){var n=e.onDismiss,t=e.onSubmit,i=e.project,o=(0,u.useState)(0),l=(0,a.Z)(o,2),d=l[0],s=l[1],c=(0,u.useState)(!1),v=(0,a.Z)(c,2),p=v[0],f=v[1],h=(0,u.useState)(!1),m=(0,a.Z)(h,2),x=m[0],j=m[1],g=(0,u.useState)({}),b=(0,a.Z)(g,2),y=b[0],Z=b[1],N=(0,u.useState)(),w=(0,a.Z)(N,2),C=w[0],k=w[1];(0,u.useEffect)((function(){A.Z.getRoleList().then((function(e){return k(e)}))}),[]);var S=(0,u.useMemo)((function(){return J[d]}),[d]);return(0,V.jsxs)("div",{style:{display:"flex",minWidth:"80%"},children:[(0,V.jsx)("div",{style:{flex:2},children:(0,V.jsx)(S,{onSave:function(e){return n=(0,r.Z)((0,r.Z)({},y),e),void(t&&t(n));var n},onComplete:n,project:i,projectData:y,roles:C,entrance:x,exit:p,onNext:function(e){Z((function(n){return s((function(e){return j(!0),setTimeout((function(){return j(!1)}),300),e<J.length-1?e+1:e})),(0,r.Z)((0,r.Z)({},n),e)}))}})}),(0,V.jsx)("div",{style:{flex:1,display:"flex",justifyContent:"flex-end",alignItems:"flex-start"},children:(0,V.jsxs)("button",{className:"proj-back__btn",onClick:function(){s((function(e){return e>0?(f(!0),setTimeout((function(){return f(!1)}),300),e-1):(n(),0)}))},children:["Retour",(0,V.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 5.067 8.137",children:(0,V.jsx)("path",{id:"Fl\xe8che",d:"M3.438,2.488,1.2,4.775a.683.683,0,0,1-1,0,.782.782,0,0,1,0-1.055L3.6.2A.581.581,0,0,1,4.033,0h.262A.525.525,0,0,1,4.6.2L7.932,3.795a.782.782,0,0,1,0,1.055.683.683,0,0,1-1,0L4.889,2.639C4.306,2.245,4.053,2.132,3.438,2.488Z",transform:"translate(0 8.137) rotate(-90)",fill:"#fff",fillRule:"evenodd"})})]})})]})},ee=t(215),ne=t(5334),te=function(e){var n=(0,u.useState)(!1),t=(0,a.Z)(n,2),i=t[0],l=t[1],d=(0,u.useState)(!1),c=(0,a.Z)(d,2),w=(c[0],c[1],(0,u.useState)("")),C=(0,a.Z)(w,2),E=C[0],A=C[1],q=(0,u.useState)([]),H=(0,a.Z)(q,2),W=H[0],G=H[1],K=(0,u.useState)(),Y=(0,a.Z)(K,2),$=Y[0],U=Y[1],Q=(0,u.useState)(),J=(0,a.Z)(Q,2),te=J[0],ie=J[1],oe=(0,u.useState)(),le=(0,a.Z)(oe,2),re=le[0],ae=le[1],de=(0,u.useState)(),se=(0,a.Z)(de,2),ue=se[0],ce=se[1],ve=(0,u.useState)(),pe=(0,a.Z)(ve,2),fe=pe[0],he=pe[1],me=(0,u.useRef)(),xe=(0,u.useRef)(),je=(0,u.useRef)(),ge=(0,u.useRef)(),be=(0,u.useRef)();be.current=$;var ye=(0,u.useRef)();ye.current=te;var Ze=(0,u.useRef)();Ze.current=re,(0,u.useRef)().current=ue;var Ne=(0,v.I)(),we=function(){var e=(0,o.Z)(s().mark((function e(n){var t;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ne(_((0,r.Z)((0,r.Z)({},n),{},{longitude:W[0],latitude:W[1]}))).unwrap();case 2:t=e.sent,Ne((0,R.B)(t)),he(t);case 5:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),Ce=function(){l(!1)},ke=function(n){var t,i=n.coordinate,o=n.pixel,r=null===(t=be.current)||void 0===t?void 0:t.forEachFeatureAtPixel(o,(function(e){return e}));if(r)return console.log(r),Ne((0,ee.fR)({is_active:!0,name:r.get("name")})),Ne((0,ne.AV)(r.get("id"))),void l(!1);var a,d=(0,N.bU)(i);G(d);var s=(0,Z.V7)(d);e.onPin&&d.length>1&&(e.onPin({longitude:d[0],latitude:d[1]}),l(!0)),A(s),l(!0),xe.current.style.display="block",null===(a=ye.current)||void 0===a||a.setPosition(i),Ee()},Se=function(e){var n,t=e.coordinate,i=e.pixel;be.current.getTarget().style.cursor="";var o,l=null===(n=be.current)||void 0===n?void 0:n.forEachFeatureAtPixel(i,(function(e){return e}));if(l&&(Ee(),be.current.getTarget().style.cursor="pointer",null===(o=Ze.current)||void 0===o||o.setPosition(t),je.current)){je.current.style="display: flex; flex-direction: column; position: relative; z-index: 20;";var r=l.get("name"),a=l.get("description");je.current.innerHTML="\n                    ".concat(r?"<h5>".concat(r,"</h5>"):"","\n                    ").concat(a?"<p>".concat(a,"</p>"):"","\n                ")}},Ee=function(){je.current&&(je.current.style="display: none;",je.current.innerHTML="")};return(0,u.useEffect)((function(){var e=new b.Z({element:null===xe||void 0===xe?void 0:xe.current,autoPan:{animation:{duration:250}}}),n=new b.Z({element:null===je||void 0===je?void 0:je.current,positioning:"bottom-center",stopEvent:!1}),t=new m.Z,i=new p.Z({target:null===me||void 0===me?void 0:me.current,overlays:[e,n],layers:[new f.Z({source:new x.Z({url:"https://{a-c}.tile.openstreetmap.org/{z}/{x}/{y}.png",projection:"EPSG:3857"})}),new L.Z({source:t})],controls:(0,j.ce)().extend([new g.Z]),view:new h.ZP({projection:"EPSG:3857",center:[3,6e6],zoom:5})}),o=new B.Z({source:t});i.addInteraction(o),U(i),ie(e),ae(n),ce(t),i.on("click",ke),i.on("pointermove",Se),i.on("movestart",Ee)}),[]),(0,u.useEffect)((function(){var n;if($&&ue&&ge.current&&e.pins&&(null===(n=e.pins)||void 0===n?void 0:n.length)>0){var t,i={r:237,g:110,b:64},o=(0,M.$h)(S,i);null===(t=e.pins)||void 0===t||t.forEach((function(n,t){var l,a,d,s,u=new y.Z((0,r.Z)({geometry:new T.Z((0,N.mi)([n.longitude,n.latitude]))},n)),c=new I.ZP({image:new P.Z({anchor:[.5,0],anchorOrigin:"bottom-right",scale:.5,src:k.orange}),text:new F.Z({font:"10px Calibri,sans-serif",fill:new D.Z({color:"rgb(".concat(i.r,",").concat(i.g,",").concat(i.b,")")}),stroke:new z.Z({color:"#fff",width:2}),text:null!==(l=null===(a=(null!==(d=null===(s=e.pins)||void 0===s?void 0:s.length)&&void 0!==d?d:0)-t)||void 0===a?void 0:a.toString())&&void 0!==l?l:"",offsetY:-o.height/3})});u.setStyle(c),null===ue||void 0===ue||ue.addFeature(u)})),xe.current.style.display="none"}}),[e.pins,$]),(0,V.jsxs)(V.Fragment,{children:[(0,V.jsx)("div",{ref:me,className:"map",id:"map"}),(0,V.jsx)("div",{onClick:function(e){null===e||void 0===e||e.stopPropagation()},ref:je,className:"ol-tool-tip"}),(0,V.jsx)("img",{ref:xe,src:k.blue,className:"project-pointer"}),(0,V.jsx)("img",{ref:ge,src:S,hidden:!0}),i&&(0,V.jsxs)(O.Z,{show:i,el:"#map",container:".background-layout",onDismiss:Ce,children:[(0,V.jsx)("code",{children:E}),(0,V.jsx)(X,{project:fe,onSubmit:we,onDismiss:Ce})]})]})},ie=t(4925),oe=t(4419),le=t.n(oe),re=t(6549),ae=t(3280),de=t(810),se=t(8006),ue=t(2607),ce=t(4023),ve=t(4947),pe=t(5211);var fe=t.p+"static/media/member.fb3513941ba1baf12e08119a7024ab11.svg",he=t(2454);var me=t.p+"static/media/organisation.efa0cfcf500774d1efcb6b093ef829b9.svg";var xe=t.p+"static/media/pin.d2679618240c8b28773a95afcb281fb5.svg",je=t(3834);var ge=t.p+"static/media/plus.8a6a02d7c59802bb732d85e8e550ad63.svg";var be=t.p+"static/media/question.9b793928a44f6612d3dd1f8c551126cc.svg",ye=t(9200),Ze=t(447),Ne={apple:re.Z,projet:ae.Z,dashboard:de.Z,google:se.Z,home:ue.Z,house:ce.Z,linkedin:ve.Z,mail:pe.Z,equipe:fe,notification:he.Z,organisation:me,pin:xe,plug:je.Z,empty:ge,question:be,search:ye.Z,user:Ze.Z,clap:Q};var we=function(e){var n,t,i,o,l,r,a,d=(0,u.useRef)(null),s=e.nodeDatum,c=e.d3ExtraProps,v=e.setActive,p=e.activeNodes,f=e.active,h=e.setEmptyNodePlacement,m=s.attributes,x=m.id,j=m.nodeType,g=m.iconName,b=p&&p[x],y=f===x,Z=c.hierarchyPointNode,N=(null===Z||void 0===Z||null===(n=Z.parent)||void 0===n||null===(t=n.data)||void 0===t||null===(i=t.attributes)||void 0===i?void 0:i.id)===f||null===(null===Z||void 0===Z?void 0:Z.parent),w=y?"#295EA7":"#fff",C="empty"===j,k="",S=null!==(o=e.nodeSize)&&void 0!==o?o:52,E=Ne.question;return C&&(w="#F3BE3D"),g in Ne?E=Ne[g]:j in Ne&&(E=Ne[j]),k=b?y?"#555":"#295EA7":"#959595",C&&!N?null:(0,V.jsxs)("svg",{x:-S/2,y:-S/2,viewBox:"0 0 ".concat(S," ").concat(S),width:S,height:S,onClick:function(e){"function"!==typeof v||C||v(Z),h&&C&&h({showForm:!0,node:Z,el:null===d||void 0===d?void 0:d.current})},ref:d,children:[(0,V.jsxs)("g",{children:[(0,V.jsx)("circle",{fill:w,cy:S/2,cx:S/2,id:x,r:S/2-(b&&!y?3:0),strokeWidth:b&&!y?3:0,stroke:"#295EA7"}),(0,V.jsx)("image",{viewBox:"0 0 ".concat(S," ").concat(S),x:"25%",y:"25%",xlinkHref:E,width:"50%",height:"50%",preserveAspectRatio:"xMidYMid slice"}),(0,V.jsx)("text",{y:S/2,x:S/2,strokeWidth:0,fontSize:10,fill:k,alignmentBaseline:"middle",textAnchor:"middle",children:(null===s||void 0===s||null===(l=s.name)||void 0===l?void 0:l.length)>9?(null===s||void 0===s||null===(r=s.name)||void 0===r?void 0:r.substring(0,7))+"...":null===s||void 0===s?void 0:s.name})]}),(0,V.jsx)("title",{children:null===(a=s.attributes)||void 0===a?void 0:a.description})]})},Ce=function(e){var n,t,i,o,l,r,d,s,c,p,f=e.placement,h=e.onSubmit,m=e.mapCoords,x=e.onClose,j=(0,v.v)((function(e){return e})).projectNodeTypes,g=null===f||void 0===f||null===(n=f.el)||void 0===n?void 0:n.getBoundingClientRect(),b=(0,u.useState)(""),y=(0,a.Z)(b,2),Z=y[0],N=y[1],w=(0,u.useState)(""),C=(0,a.Z)(w,2),k=C[0],S=C[1],E=(0,u.useState)(""),A=(0,a.Z)(E,2),_=A[0],R=A[1],L=(0,u.useState)(null),T=(0,a.Z)(L,2),I=T[0],P=T[1],F=(0,u.useState)(""),D=(0,a.Z)(F,2),z=(D[0],D[1]);(0,u.useEffect)((function(){var e,n;j.payload&&(null===(e=j.payload)||void 0===e?void 0:e.length)>0&&N(null===j||void 0===j||null===(n=j.payload[0])||void 0===n?void 0:n.id)}),[j]),(0,u.useEffect)((function(){var e;m?P(m):null!==f&&void 0!==f&&f.node&&null===(null===f||void 0===f||null===(e=f.node)||void 0===e?void 0:e.parent)&&(0,M.vW)().then((function(e){return P(null===e||void 0===e?void 0:e.coords)}),(function(e){console.log("error geting position",e),z("Veuillez activer la localisation sur votre navigateur")}))}),[m,f]);return(0,V.jsx)("div",{style:{position:"absolute",top:"".concat(null!==(t=null===g||void 0===g?void 0:g.y)&&void 0!==t?t:0,"px"),left:"".concat(null!==(i=null===g||void 0===g?void 0:g.right)&&void 0!==i?i:0,"px"),zIndex:1100},children:(0,V.jsxs)("div",{className:"placement-form-u0",children:[(0,V.jsx)("button",{className:"placement-close-icon",onClick:function(e){x&&x()},children:(0,V.jsx)("svg",{fill:"#000000",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:"24px",height:"24px",children:(0,V.jsx)("path",{d:"M 4.9902344 3.9902344 A 1.0001 1.0001 0 0 0 4.2929688 5.7070312 L 10.585938 12 L 4.2929688 18.292969 A 1.0001 1.0001 0 1 0 5.7070312 19.707031 L 12 13.414062 L 18.292969 19.707031 A 1.0001 1.0001 0 1 0 19.707031 18.292969 L 13.414062 12 L 19.707031 5.7070312 A 1.0001 1.0001 0 0 0 18.980469 3.9902344 A 1.0001 1.0001 0 0 0 18.292969 4.2929688 L 12 10.585938 L 5.7070312 4.2929688 A 1.0001 1.0001 0 0 0 4.9902344 3.9902344 z"})})}),(0,V.jsxs)("div",{className:"placement-title",children:["Ajouter un nouveau ",null===(null===f||void 0===f||null===(o=f.node)||void 0===o?void 0:o.parent)?"projet":"n\u0153ud \xe0 ".concat(null===f||void 0===f||null===(l=f.node)||void 0===l||null===(r=l.parent)||void 0===r||null===(d=r.data)||void 0===d?void 0:d.name)]}),null!==(s=f.node)&&void 0!==s&&s.parent&&j&&!j.isLoading&&null!==j&&void 0!==j&&j.payload&&(null===j||void 0===j||null===(c=j.payload)||void 0===c?void 0:c.length)>0?(0,V.jsx)("select",{value:Z,onChange:function(e){var n;return N(null===e||void 0===e||null===(n=e.target)||void 0===n?void 0:n.value)},children:j.payload.filter((function(e){return"empty"!==(null===e||void 0===e?void 0:e.label)&&"projet"!==(null===e||void 0===e?void 0:e.label)})).map((function(e){return(0,V.jsx)("option",{value:null===e||void 0===e?void 0:e.id,children:null===e||void 0===e?void 0:e.label},(null===e||void 0===e?void 0:e.id)+(null===e||void 0===e?void 0:e.label))}))}):null,null===(null===f||void 0===f||null===(p=f.node)||void 0===p?void 0:p.parent)?(0,V.jsx)("input",{readOnly:!0,type:"search",placeholder:"Emplacement du projet",value:I?"".concat(null===I||void 0===I?void 0:I.longitude,", ").concat(null===I||void 0===I?void 0:I.longitude):""}):null,(0,V.jsxs)("div",{style:{position:"relative"},children:[(0,V.jsx)("span",{style:{color:"#E33F1A",position:"absolute",left:5,top:"20%"},children:"*"}),(0,V.jsx)("input",{required:!0,style:{paddingLeft:10},placeholder:"nom",value:k,onChange:function(e){var n;return S(null===e||void 0===e||null===(n=e.target)||void 0===n?void 0:n.value)}})]}),(0,V.jsx)("div",{children:(0,V.jsx)("textarea",{placeholder:"description",value:_,onChange:function(e){var n;return R(null===e||void 0===e||null===(n=e.target)||void 0===n?void 0:n.value)}})}),(0,V.jsx)("div",{children:(0,V.jsx)("button",{disabled:!(null!==k&&void 0!==k&&k.trim()),onClick:function(){var e,n,t,i;f.node&&k&&h({name:k,typeId:Z,description:_,longitude:null===I||void 0===I?void 0:I.longitude,latitude:null===I||void 0===I?void 0:I.latitude,parentNodeId:null===f||void 0===f||null===(e=f.node)||void 0===e||null===(n=e.parent)||void 0===n||null===(t=n.data)||void 0===t||null===(i=t.attributes)||void 0===i?void 0:i.id})},children:"Add"})})]})})},ke=["nodeDatum","toggleNode"],Se=function(e){var n=e.treeData,t=e.activeNodes,i=e.setActiveNodes,o=e.active,l=e.setActive,d=e.selectedProjectId,s=e.mapCoords,c=(0,v.I)(),p=(0,u.useRef)(null),f=(0,u.useState)({x:0,y:0}),h=(0,a.Z)(f,2),m=h[0],x=h[1],j=(0,u.useState)({width:0,height:0}),g=(0,a.Z)(j,2),b=g[0],y=g[1],Z=(0,u.useState)(),N=(0,a.Z)(Z,2),w=N[0],C=N[1];(0,u.useEffect)((function(){var e,n,t,i=null===p||void 0===p||null===(e=p.current)||void 0===e?void 0:e.getBoundingClientRect();x({x:i?i.width/10:0,y:i?i.width/3:0}),y({width:null!==(n=null===i||void 0===i?void 0:i.width)&&void 0!==n?n:0,height:null!==(t=null===i||void 0===i?void 0:i.height)&&void 0!==t?t:0}),C({})}),[o]);var k=function(e){i&&i((function(n){return(0,r.Z)((0,r.Z)({},n),e)}))},S=function(e){l&&l(e),i&&i({}),C({})};return(0,V.jsxs)("div",{id:"d3-tree-project",style:{height:"100%",width:"100%",overflow:"auto"},ref:p,children:[(0,V.jsx)(le(),{data:n,orientation:"horizontal",translate:m,renderCustomNodeElement:function(e){var n,i,l,r=e.nodeDatum,a=e.toggleNode,d=(0,ie.Z)(e,ke);return(0,V.jsx)(we,{nodeDatum:r,toggleNode:a,activeNodes:t,setActive:S,d3ExtraProps:d,addParentsToActivePath:k,active:null===o||void 0===o||null===(n=o.data)||void 0===n||null===(i=n.attributes)||void 0===i||null===(l=i.id)||void 0===l?void 0:l.toString(),setEmptyNodePlacement:C})},pathClassFunc:function(e){var n,i,l,r,a,d,s,u,c,v,p,f,h,m,x,j,g,b=e.source,y=e.target;return"empty"===(null===y||void 0===y||null===(n=y.data)||void 0===n||null===(i=n.attributes)||void 0===i?void 0:i.nodeType)?(null===o||void 0===o||null===(m=o.data)||void 0===m||null===(x=m.attributes)||void 0===x?void 0:x.id)===(null===b||void 0===b||null===(j=b.data)||void 0===j||null===(g=j.attributes)||void 0===g?void 0:g.id)?"node-link to-empty":"empty-link":!t||(null===(l=t[null===y||void 0===y||null===(d=y.data)||void 0===d||null===(s=d.attributes)||void 0===s?void 0:s.id])||void 0===l||null===(r=l.data)||void 0===r||null===(a=r.attributes)||void 0===a?void 0:a.id)!==(null===y||void 0===y||null===(u=y.data)||void 0===u||null===(c=u.attributes)||void 0===c?void 0:c.id)&&(null===o||void 0===o||null===(v=o.data)||void 0===v||null===(p=v.attributes)||void 0===p?void 0:p.id)!==(null===y||void 0===y||null===(f=y.data)||void 0===f||null===(h=f.attributes)||void 0===h?void 0:h.id)?"node-link":"node-link to-active"},collapsible:!1,depthFactor:0,dimensions:b,separation:{siblings:.5}}),(null===w||void 0===w?void 0:w.showForm)&&(0,V.jsx)(Ce,{mapCoords:s,placement:w,onSubmit:function(e){var n,t,i,o;null!==w&&void 0!==w&&null!==(n=w.node)&&void 0!==n&&n.parent?c((0,ne.VR)({id:d,node:e})):c(_({description:null!==(t=e.description)&&void 0!==t?t:"",latitude:null!==(i=e.latitude)&&void 0!==i?i:0,longitude:null!==(o=e.longitude)&&void 0!==o?o:0,name:e.name})).unwrap().then((function(e){return c((0,R.B)(e))}));C({})},onClose:function(){return C({})}})]})};var Ee=t.p+"static/media/search-black.d9666e6d4103062e194c9e0c886e8e91.svg";var Ae=t.p+"static/media/filter.e1bc3dbd425be94f328d303dfce58414.svg";var _e=t.p+"static/media/chevron-left.895bf471dad3151ce05565b8b1439242.svg",Re=function(e){var n=e.title,t=e.search;return(0,V.jsxs)("div",{className:"card-head",children:[(0,V.jsxs)("div",{className:"card-f-row",children:[(0,V.jsx)("b",{children:n}),(0,V.jsxs)("div",{className:"card-filter",children:[(0,V.jsx)("u",{children:"Trier et filtrer"}),(0,V.jsx)("img",{src:Ae}),(0,V.jsx)("img",{src:Ee})]})]}),(0,V.jsxs)("div",{className:"card-search",children:[(0,V.jsxs)("div",{className:"navigate",children:[(0,V.jsx)("div",{className:"black-round",children:(0,V.jsx)("img",{src:_e})}),(0,V.jsx)("div",{className:"black-round",children:(0,V.jsx)("img",{src:_e})})]}),"string"===typeof t?(0,V.jsx)(W.Z,{type:"card-header",title:t,doThings:function(){return console.log()}}):t]}),(0,V.jsx)("div",{className:"break"})]})},Le=function(e){var n,t,o=e.active,a=e.activeNodes,d=e.setActive,s=e.projects,u=e.selectedProjectId,c=e.setSelectedProjectId,v=e.setActiveNodes,p=Object.values((0,r.Z)((0,r.Z)({},a),{},(0,l.Z)({},null===o||void 0===o||null===(n=o.data)||void 0===n||null===(t=n.attributes)||void 0===t?void 0:t.id,o))).sort(M.ow),f=function(e){var n,t;return e===(null===o||void 0===o||null===(n=o.data)||void 0===n||null===(t=n.attributes)||void 0===t?void 0:t.id)||a&&"undefined"!==typeof a[e]},h=p.length>0&&p[0],m=(null===s||void 0===s?void 0:s.length)>0?s.filter((function(e){return!(null!==e&&void 0!==e&&e.parentId)})):[],x=h?"Explorer":"Mes projets",j=function(e){e.stopPropagation(),d&&d(null),v&&v({})};return(0,V.jsx)("div",{tabIndex:0,role:"button",onKeyDown:function(e){var n;"backspace"===(null===e||void 0===e||null===(n=e.key)||void 0===n?void 0:n.toLowerCase())&&d&&d(null===o||void 0===o?void 0:o.parent)},className:"explorer-0o87uu no-padding",children:h?p.map((function(e,n){var t,i,o,l,r,a=null===e||void 0===e||null===(t=e.children)||void 0===t?void 0:t.filter((function(e){var n,t;return"empty"!==(null===e||void 0===e||null===(n=e.data)||void 0===n||null===(t=n.attributes)||void 0===t?void 0:t.nodeType)}));return(0,V.jsxs)("div",{tabIndex:0,role:"button",className:"explore-bread-crumbs-0r",children:[(0,V.jsx)("span",{className:"separator-arrow-p",children:n>0?">":""}),(0,V.jsxs)("div",{tabIndex:0,role:"button",className:"explorer-crumb-0ijf4",onClick:function(){return n=e,void(d&&d(n));var n},children:[0===n?(0,V.jsx)("button",{className:"explore-close-icon",onClick:j,children:"--"}):null,null===e||void 0===e||null===(r=e.data)||void 0===r?void 0:r.name,a&&(null===a||void 0===a?void 0:a.length)>0?(0,V.jsxs)(V.Fragment,{children:[n===p.length-1?(0,V.jsx)("svg",{width:"20px",height:"20px",viewBox:"0 0 20 20",focusable:"false",fill:"#000000",children:(0,V.jsx)("polygon",{points:"5,8 10,13 15,8"})}):null,(0,V.jsx)("div",{className:"explorer-dropdown-m3uu",children:a.map((function(e){var n,t,i,o,l,r,a,s,u;return(0,V.jsx)("button",{type:"button",title:null===e||void 0===e||null===(n=e.data)||void 0===n||null===(t=n.attributes)||void 0===t||null===(i=t.description)||void 0===i?void 0:i.toString(),className:"explorer-dropdown-m3uu-it3m ".concat(f(null===e||void 0===e||null===(o=e.data)||void 0===o||null===(l=o.attributes)||void 0===l?void 0:l.id)?"active":""),onClick:function(n){return function(e,n){e.stopPropagation(),d&&d(n)}(n,e)},children:null===e||void 0===e||null===(u=e.data)||void 0===u?void 0:u.name},null===e||void 0===e||null===(r=e.data)||void 0===r||null===(a=r.attributes)||void 0===a||null===(s=a.id)||void 0===s?void 0:s.toString())}))})]}):null]})]},null===e||void 0===e||null===(i=e.data)||void 0===i||null===(o=i.attributes)||void 0===o||null===(l=o.id)||void 0===l?void 0:l.toString())})):(0,V.jsx)("div",{className:"explore-search-project-09",children:(0,V.jsxs)("div",{tabIndex:0,role:"button",className:"explore-search-button-div",children:[x,m?(0,V.jsx)("div",{className:"explorer-proj-dropdown-m3uu",children:[].concat((0,i.Z)(m),[{id:"new-project",name:"Nouveau projet",description:"Nouveau projet"}]).map((function(e){var n;return(0,V.jsx)("button",{type:"button",title:e.description,className:"explorer-proj-dropdown-m3uu-it3m ".concat((null===(n=e.id)||void 0===n?void 0:n.toString())===(null===u||void 0===u?void 0:u.toString())?"active":""),onClick:function(){return n=e.id,void c(n);var n},children:e.name},e.id)}))}):null]})})})},Te=t(8009),Ie={label:"empty",id:0,iconName:"placeholder"};var Pe=function(e){var n=e.favs,t=n.length>=10?n:[].concat((0,i.Z)(n),(0,i.Z)(Array(10-n.length).fill(Ie).map((function(e,n){return(0,r.Z)((0,r.Z)({},e),{},{id:e.label+n})}))));return(0,V.jsxs)("div",{className:"fav-block-container-0i",children:[(0,V.jsx)("div",{className:"fav-block-title",children:"Favoris"}),(0,V.jsx)("div",{className:"fav-blocks",children:t.map((function(e){return(0,V.jsx)("button",{className:"fav-btn ".concat(e.label),type:"button",children:"empty"===e.label?"+":e.label},e.id)}))})]})},Fe=t(3174),De=t(4483),ze=t(1058),Be=function(e){var n=e.project,t=(0,v.I)(),o=(0,u.useState)([]),l=(0,a.Z)(o,2),r=l[0],d=l[1],s=(0,u.useState)(!1),c=(0,a.Z)(s,2),p=c[0],f=c[1],h=(0,u.useState)(!1),m=(0,a.Z)(h,2),x=m[0],j=m[1],g=(0,u.useState)(""),b=(0,a.Z)(g,2),y=b[0],Z=b[1];(0,u.useEffect)((function(){f(!1)}),[y]),(0,u.useEffect)((function(){j(!1)}),[r]);var N=function(e,n){var t=(0,i.Z)(r);t[n].roleId=parseInt(e.target.id),d(t),console.log(r)};function w(){t((0,ee.Wx)("Dashboard")),t((0,ee.eU)(!1))}return(0,V.jsxs)(V.Fragment,{children:[(0,V.jsx)("div",{className:"pop-in_background"}),(0,V.jsxs)("div",{className:"pop-in",children:[(0,V.jsxs)("div",{className:"pop-in_container",children:[(0,V.jsx)("p",{className:"title",children:"Inviter des participants"}),(0,V.jsx)("p",{className:"subtitle",children:"Cette \xe9tape vous permet d'inviter des utilisateurs \xe0 rejoindre ce projet."}),(0,V.jsxs)("div",{className:"content",children:[(0,V.jsxs)("div",{className:"input-container",children:[(0,V.jsx)("input",{type:"text",required:!0,value:y,onChange:function(e){return Z(e.target.value)},onKeyPress:function(e){!function(e,n){"Enter"===e.code&&(new RegExp("[a-z0-9]+@[a-z]+.[a-z]{2,3}").test(n)?(r.push({email:n,roleId:""}),Z("")):f(!0))}(e,e.currentTarget.value)}}),p&&(0,V.jsx)("p",{className:"errorMsg-popin",children:"L'email n'est pas valide"}),x&&(0,V.jsx)("p",{className:"errorMsg-popin",children:"Selectionnez des droits pour chaques participants"}),(0,V.jsx)("span",{children:"Saisir le mail"})]}),(0,V.jsx)("div",{className:"mail-container",children:r.length>0&&r.map((function(e,n){return(0,V.jsxs)("fieldset",{className:"email-line",children:[(0,V.jsx)("div",{className:"email",onClick:function(){!function(e){var n=(0,i.Z)(r);n.splice(e,1),d(n)}(n)},children:(0,V.jsx)("span",{children:e.email})}),(0,V.jsxs)("div",{className:"radio-btn",children:[(0,V.jsx)("input",{name:e.email,type:"radio",id:"1",onClick:function(e){N(e,n)}}),(0,V.jsx)("span",{children:"Administrateur"})]}),(0,V.jsxs)("div",{className:"radio-btn",children:[(0,V.jsx)("input",{name:e.email,type:"radio",id:"2",onClick:function(e){N(e,n)}}),(0,V.jsx)("span",{children:"Membre"})]}),(0,V.jsxs)("div",{className:"radio-btn",children:[(0,V.jsx)("input",{name:e.email,type:"radio",id:"3",onClick:function(e){N(e,n)}}),(0,V.jsx)("span",{children:"Observateur"})]})]},n)}))}),(0,V.jsx)(W.Z,{type:"submit",light:!0,title:"B\xe2tir ensemble",doThings:function(){var e=!0;r.map((function(n){""===n.roleId&&(e=!1)})),e&&r.length>0?(console.log("send mail"),t((0,ze.Y)({invitations:{invitations:r},id:n})),w()):(j(!0),console.log("dont send mail"))},iconName:Fe.yOZ})]})]}),(0,V.jsx)("div",{children:(0,V.jsx)("div",{className:"pop-in_goback",onClick:function(){return w()},children:(0,V.jsx)(De.G,{icon:Fe.NBC,className:"icon_center"})})})]})]})},Me=["children"],Oe=function(e){var n=e.children,t=(0,ie.Z)(e,Me);return(0,V.jsx)("tr",(0,r.Z)((0,r.Z)({},t),{},{children:n}))},qe=function(e){var n=e.data,t=e.meta,i=e.treeMeta,o=e.newColumn,l=e.newRow,d=function(e){return"string"===typeof e?e:null},s={};(null===n||void 0===n?void 0:n.length)>0&&n.forEach((function(e){var n,t,i,o;null!==(n=e.tree)&&void 0!==n&&null!==(t=n.children)&&void 0!==t&&t.length&&(null===e||void 0===e||null===(i=e.tree)||void 0===i||null===(o=i.children)||void 0===o||o.forEach((function(e){e.name&&(s[e.name]=e)})))}));var u=Object.keys((0,r.Z)((0,r.Z)((0,r.Z)({},null!==t&&void 0!==t?t:{}),null!==s&&void 0!==s?s:{}),{},{empty:""}));return(null===n||void 0===n?void 0:n.length)>0?(0,V.jsx)("div",{style:{maxWidth:"100vw",overflow:"auto",maxHeight:"20vh",overflowY:"auto"},children:(0,V.jsxs)("table",{className:"project-table",style:{borderCollapse:"collapse",borderRadius:5},children:[(0,V.jsx)("thead",{children:(0,V.jsx)(Oe,{children:(0,V.jsxs)(V.Fragment,{children:[Object.entries(t).map((function(e){var n,t=(0,a.Z)(e,2),i=t[0],o=t[1];return(0,V.jsx)("th",{children:null!==(n=o.displayName)&&void 0!==n?n:i},i)})),Object.keys(s).map((function(e){return(0,V.jsx)("th",{style:{textTransform:"capitalize"},children:e},e)})),(0,V.jsx)("th",{style:{textAlign:"center"},children:o.renderHeader()})]})})}),(0,V.jsxs)("tbody",{children:[n.map((function(e,n){return(0,V.jsxs)("tr",{children:[Object.entries(t).map((function(t){var i=(0,a.Z)(t,2),o=i[0],l=i[1];return(0,V.jsx)("td",{children:l.render?l.render(e,n):d(e[o])},o)})),Object.values(s).map((function(t){var o,l,r;if(null!==e&&void 0!==e&&null!==(o=e.tree)&&void 0!==o&&o.children&&(null===e||void 0===e||null===(l=e.tree)||void 0===l?void 0:l.children.length)>1){var a,d,s,u,c=null===e||void 0===e||null===(a=e.tree)||void 0===a||null===(d=a.children)||void 0===d?void 0:d.find((function(e){return e.name===(null===t||void 0===t?void 0:t.name)}));return c?(0,V.jsx)("td",{"data-key":c.name+e.id,children:null===(s=i.status)||void 0===s?void 0:s.render(e,c,n)},c.name+e.id):(0,V.jsx)("td",{children:null===(u=i.none)||void 0===u?void 0:u.render(e,t,n)},e.id+(null===t||void 0===t?void 0:t.name))}return(0,V.jsx)("td",{children:null===(r=i.none)||void 0===r?void 0:r.render(e,t,n)},e.id+(null===t||void 0===t?void 0:t.name))})),(0,V.jsx)("td",{children:o.renderData(n)},e.id+"new")]},e.id)})),l&&(0,V.jsx)("tr",{children:u.map((function(e,n){return(0,V.jsx)("td",{children:l.render(e,n,u.length)},e)}))})]}),(0,V.jsx)("tfoot",{children:(0,V.jsx)("tr",{children:u.map((function(e,n){return(0,V.jsx)("td",{children:(0,V.jsx)("span",{style:{visibility:"hidden",display:"flex"},children:"h"})},e)}))})})]})}):null},Ve=t(5897),He=function(e){var n=e.progress,t=e.color;return(0,V.jsx)("div",{className:"simple-progress-xx",style:{border:"1px solid ".concat(null!==t&&void 0!==t?t:"#295EA7")},children:(0,V.jsx)("span",{style:{width:"".concat(n>100?n%100:n,"%"),backgroundColor:null!==t&&void 0!==t?t:"#295EA7"},children:(0,V.jsxs)("span",{style:{fontSize:10,width:"auto"},children:[n,"%"]})})})},We=t(5530),Ge=["onEnter","style","className","onBlur"],Ke=function(e){var n=e.onEnter,t=e.style,i=e.className,o=e.onBlur,l=(0,ie.Z)(e,Ge);return(0,V.jsx)("input",(0,r.Z)((0,r.Z)({style:(0,r.Z)((0,r.Z)({},{width:"100%",background:"transparent",border:"none",outline:"none",margin:0,lineHeight:"inherit",fontFamily:"inherit",fontSize:"inherit"}),null!==t&&void 0!==t?t:{}),onKeyDown:function(e){var t,i;null!==e&&void 0!==e&&e.key&&"enter"===(null===e||void 0===e||null===(t=e.key)||void 0===t?void 0:t.toLowerCase())&&n(null===e||void 0===e||null===(i=e.target)||void 0===i?void 0:i.value)},onBlur:function(e){var n;return o(null===e||void 0===e||null===(n=e.target)||void 0===n?void 0:n.value)}},l),{},{className:"editable-cell-sb ".concat(null!==i&&void 0!==i?i:"")}))},Ye=["onChange","onEnter","style","className","options","selected","color"],$e=function(e){e.onChange,e.onEnter;var n,t=e.style,i=e.className,o=e.options,l=e.selected,a=e.color,d=(0,ie.Z)(e,Ye),s=(0,Ve.$)().t,u=null===o||void 0===o?void 0:o.find((function(e){return e.id===l||e.label===l}));return(0,V.jsxs)("div",(0,r.Z)((0,r.Z)({style:(0,r.Z)((0,r.Z)({},{width:"100%",background:null!==a&&void 0!==a?a:"transparent",border:"none",outline:"none",margin:0,lineHeight:"inherit",fontFamily:"inherit",fontSize:"inherit",position:"relative"}),null!==t&&void 0!==t?t:{})},d),{},{className:"dropdown-select-cell-sb ".concat(null!==i&&void 0!==i?i:""),children:[(0,V.jsx)("input",{style:{width:"100%",background:"transparent",border:"none",outline:"none",margin:0,lineHeight:"inherit",fontFamily:"inherit",fontSize:"inherit",position:"relative",cursor:"pointer"},className:"dropdown-select-cell-input",defaultValue:s(null!==(n=null===u||void 0===u?void 0:u.label)&&void 0!==n?n:"")}),(null===o||void 0===o?void 0:o.length)>0&&(0,V.jsx)("ul",{className:"dropdown-select-list-group-sb",children:null===o||void 0===o?void 0:o.map((function(e){var n,t;return(0,V.jsx)("li",{style:{background:null!==a&&void 0!==a?a:"#fff"},value:null!==(n=e.id)&&void 0!==n?n:e.label,className:"dropdown-select-list-item-sb ".concat(u.label===e.label||u.id===e.id?"selected":""),children:(0,V.jsx)("button",{className:"dropdown-select-button",children:s(null!==(t=e.label)&&void 0!==t?t:"")})},e.label+e.id)}))})]}))},Ue=t(7637),Qe=function(){var e,n,t,d=(0,v.I)(),p=(0,v.v)((function(e){return e})),f=p.projects,h=p.knowledgeTree,m=p.projectNodeTypes,x=p.projectNodeStatuses,j=(0,v.v)((function(e){return e.pages.selected_tab})),g=(0,u.useState)({}),b=(0,a.Z)(g,2),y=b[0],Z=b[1],N=(0,u.useState)(),w=(0,a.Z)(N,2),C=w[0],k=w[1],S=(0,u.useState)(M.Z),E=(0,a.Z)(S,2),A=E[0],_=E[1],L=(0,u.useState)(),T=(0,a.Z)(L,2),I=T[0],P=T[1],F=(0,u.useState)(),D=(0,a.Z)(F,2),z=D[0],B=D[1],O=(0,u.useState)(),q=(0,a.Z)(O,2),H=q[0],W=q[1],G=(0,u.useState)(!1),K=(0,a.Z)(G,2),Y=K[0],$=K[1],U=(0,u.useState)(""),Q=(0,a.Z)(U,2),J=Q[0],X=Q[1],ie=(0,Ve.$)().t,oe=function(e){h.payload&&d((0,ee.fR)({is_active:e,name:h.payload.name}))};(0,u.useEffect)((function(){d((0,c.w)()),d((0,R.mW)()),d((0,Te.y)(z)),d((0,Ue.N)(z))}),[]),(0,u.useEffect)((function(){var e;!f.isLoading&&f.payload&&(P(f.payload),(null===f||void 0===f||null===(e=f.payload)||void 0===e?void 0:e.length)>0&&B((function(e){var n;return e||(null===f||void 0===f||null===(n=f.payload[0])||void 0===n?void 0:n.id)})))}),[f]),(0,u.useEffect)((function(){z&&("new-project"!==z?d((0,ne.AV)(z)):_(M.Z)),console.log({exploreProjectId:z})}),[z]),(0,u.useEffect)((function(){!h.isLoading&&h.payload&&_(h.payload)}),[h]),(0,u.useEffect)((function(){if("undefined"!==typeof C&&null!==C){for(var e=C,n={};null!==e&&void 0!==e;){var t,i,o,a,d,s,u,c,v,p,f,h,m,x,j,g;if(null!==(t=e)&&void 0!==t&&null!==(i=t.data)&&void 0!==i&&null!==(o=i.attributes)&&void 0!==o&&o.id&&null!==(a=e)&&void 0!==a&&null!==(d=a.parent)&&void 0!==d&&null!==(s=d.data)&&void 0!==s&&null!==(u=s.attributes)&&void 0!==u&&u.id)n=(0,r.Z)((0,r.Z)({},n),{},(g={},(0,l.Z)(g,null===(v=e)||void 0===v||null===(p=v.parent)||void 0===p||null===(f=p.data)||void 0===f||null===(h=f.attributes)||void 0===h?void 0:h.id,e.parent),(0,l.Z)(g,null===(m=e)||void 0===m||null===(x=m.data)||void 0===x||null===(j=x.attributes)||void 0===j?void 0:j.id,e),g));e=null===(c=e)||void 0===c?void 0:c.parent}Z(n),oe(!0)}else oe(!1)}),[C]);var le=function(e){null!==e&&void 0!==e&&e.trim()&&(null===I||void 0===I||I.forEach(function(){var n=(0,o.Z)(s().mark((function n(t){return s().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,d((0,ne.VR)({id:null===t||void 0===t?void 0:t.id,node:{description:"",name:e,nodeType:"libre"}}));case 2:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()),X("")),$(!1)},re=function(e){X(e),$(!1)},ae=function(e){var n,t,i,o,l=null!==(n=null!==e&&void 0!==e&&e.tree?null===e||void 0===e||null===(t=e.tree)||void 0===t||null===(i=t.attributes)||void 0===i?void 0:i.status:null===e||void 0===e||null===(o=e.attributes)||void 0===o?void 0:o.status)&&void 0!==n?n:"todo",r="#ED6E40";switch(l){case"in-progress":r="#F3BE3D";break;case"planned":r="#295EA7";break;case"blocked":r="#E33F1A";break;case"todo":r="#959595";break;case"delivered":case"deployed":r="#29A74A"}return{status:l,color:r}};return(0,V.jsxs)(V.Fragment,{children:["Invitation"===j&&(0,V.jsx)(Be,{project:z}),(0,V.jsxs)("div",{className:"dashboard-layout",children:[(0,V.jsxs)("div",{className:"explorer",children:[(0,V.jsx)(Re,{title:"Explorer",search:(0,V.jsx)(Le,{active:C,activeNodes:y,setActive:k,setActiveNodes:Z,projects:I,selectedProjectId:z,setSelectedProjectId:B})}),(0,V.jsx)(Pe,{favs:null!==(e=m.payload)&&void 0!==e?e:[]}),(0,V.jsx)("div",{className:"canvas-explorer",children:(0,V.jsx)(Se,{active:C,treeData:A,activeNodes:y,setActive:k,setActiveNodes:Z,selectedProjectId:z,mapCoords:H})})]}),(0,V.jsxs)("div",{className:"project",children:[(0,V.jsx)(Re,{title:"Contextualiser (".concat(null!==C&&void 0!==C&&null!==(n=C.data)&&void 0!==n&&n.name?null===C||void 0===C||null===(t=C.data)||void 0===t?void 0:t.name:"Mes projets",")"),search:"Carte"}),(0,V.jsx)("div",{className:"map-container",children:(0,V.jsx)(te,{onPin:W,pins:I})}),(null===I||void 0===I?void 0:I.length)>0?(0,V.jsx)(qe,{data:(0,i.Z)(I).sort(M.R1),meta:{name:{displayName:ie("project-name"),render:function(e,n){return(0,V.jsx)("div",{style:{padding:"0 5px",background:"#fff",borderTopLeftRadius:0===n?5:0,borderTopRightRadius:0===n?5:0},children:e.name})}},creator:{displayName:ie("project-manager"),render:function(e,n){var t,i,o,l;return(0,V.jsx)("div",{style:{padding:"0 5px",background:"#fff",borderTopLeftRadius:0===n?5:0,borderTopRightRadius:0===n?5:0},title:"".concat(null!==(t=e.creator.firstName)&&void 0!==t?t:""," ").concat(null!==(i=e.creator.lastName)&&void 0!==i?i:""),children:"".concat(null!==(o=e.creator.firstName)&&void 0!==o?o:""," ").concat(null!==(l=e.creator.lastName)&&void 0!==l?l:"")})}},progression:{displayName:ie("progression"),render:function(e,n){return(0,V.jsx)("div",{style:{display:"flex",background:"#fff",borderTopLeftRadius:0===n?5:0,borderTopRightRadius:0===n?5:0},children:(0,V.jsx)(He,{color:"#ED6E40",progress:50})})}},status:{displayName:ie("status"),render:function(e){var n=ae(e);return(0,V.jsx)($e,{options:x.payload,selected:n.status,editable:!0,onChange:function(){return null},color:n.color})}}},treeMeta:{status:{render:function(e,n){var t=ae(n);return(0,V.jsx)("div",{style:{background:t.color,color:"#fff",padding:"0 5px"},children:ie(t.status)})}},none:{render:function(e,n){return(0,V.jsx)(We.Z,{style:{height:20,width:20},onClick:function(){return function(e){var n,t,i,o=e.id,l=e.node;d((0,ne.VR)({id:o,node:{description:null===l||void 0===l||null===(n=l.attributes)||void 0===n?void 0:n.description,name:null===l||void 0===l?void 0:l.name,nodeType:null!==(t=null===l||void 0===l||null===(i=l.attributes)||void 0===i?void 0:i.nodeType)&&void 0!==t?t:"libre"}}))}({id:e.id,node:n})}})}}},newColumn:{renderData:function(e){return(0,V.jsx)("div",{style:{display:"flex",background:"#fff",borderTopLeftRadius:0===e?5:0,borderTopRightRadius:0===e?5:0},children:(0,V.jsx)("span",{style:{visibility:"hidden"},children:"h"})})},renderHeader:function(){return Y?(0,V.jsx)(Ke,{autoFocus:!0,style:{textAlign:"right"},onBlur:re,onEnter:le,defaultValue:J}):(0,V.jsx)(We.Z,{style:{height:20,width:20},onClick:function(){return $(!0)}})}},newRow:{render:function(e,n,t){return(0,V.jsx)("div",{style:{display:"flex",background:"#fff",borderBottomLeftRadius:0===n?5:0,borderBottomRightRadius:n===t-1?5:0},children:0===n?(0,V.jsx)("span",{style:{padding:"0 10px"},title:"use the map to add new projects",children:(0,V.jsx)(We.Z,{style:{height:20,width:20,marginTop:-5}})}):(0,V.jsx)("span",{style:{visibility:"hidden"},children:"h"})})}}}):null]})]})]})}}}]);
//# sourceMappingURL=428.5c0e8e14.chunk.js.map